/*! For license information please see podletjs.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PodletJS=t():e.PodletJS=t()}(this,()=>(()=>{var e,t,r,n,s={251:(e,t)=>{t.read=function(e,t,r,n,s){var i,o,a=8*s-n-1,l=(1<<a)-1,c=l>>1,u=-7,f=r?s-1:0,p=r?-1:1,h=e[t+f];for(f+=p,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=256*i+e[t+f],f+=p,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=n;u>0;o=256*o+e[t+f],f+=p,u-=8);if(0===i)i=1-c;else{if(i===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),i-=c}return(h?-1:1)*o*Math.pow(2,i-n)},t.write=function(e,t,r,n,s,i){var o,a,l,c=8*i-s-1,u=(1<<c)-1,f=u>>1,p=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+f>=1?p/l:p*Math.pow(2,1-f))*l>=2&&(o++,l/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(t*l-1)*Math.pow(2,s),o+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,s),o=0));s>=8;e[r+h]=255&a,h+=d,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;e[r+h]=255&o,h+=d,o/=256,c-=8);e[r+h-d]|=128*m}},6724:function(e,t,r){var n=r(8287).Buffer;e.exports=function(){function e(e,t,r){(t=(e=>"symbol"==typeof(e=((e,t)=>{if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return String(e);if("object"!=typeof(r=r.call(e,t)))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"))?e:e+"")(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function t(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function s(r){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?t(Object(s),!0).forEach(function(t){e(r,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(s,e))})}return r}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e){var t,r;return Object.prototype.hasOwnProperty.call(e,"__esModule")?e:("function"==typeof(t=e.default)?(r=function e(){var r=!1;try{r=this instanceof e}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)}).prototype=t.prototype:r={},Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r)}var a,l,c={exports:{}};function u(e,t){for(var r=0,n=e.length-1;0<=n;n--){var s=e[n];"."===s?e.splice(n,1):".."===s?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;)e.unshift("..");return e}function f(e){return p.exec(e).slice(1)}var p=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function h(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){var n=0<=r?arguments[r]:"/";if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=u(_(e.split("/"),function(e){return!!e}),!t).join("/"))||"."}function d(e){var t=m(e),r="/"===E(e,-1);return(e=(e=u(_(e.split("/"),function(e){return!!e}),!t).join("/"))||t?e:".")&&r&&(e+="/"),(t?"/":"")+e}function m(e){return"/"===e.charAt(0)}function y(){return d(_(Array.prototype.slice.call(arguments,0),function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function g(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return r<t?[]:e.slice(t,r-t+1)}e=h(e).substr(1),t=h(t).substr(1);for(var n=r(e.split("/")),s=r(t.split("/")),i=Math.min(n.length,s.length),o=i,a=0;a<i;a++)if(n[a]!==s[a]){o=a;break}var l=[];for(a=o;a<n.length;a++)l.push("..");return(l=l.concat(s.slice(o))).join("/")}function v(e){var t=(e=f(e))[0];return e=e[1],t||e?t+(e=e&&e.substr(0,e.length-1)):"."}function b(e,t){return e=f(e)[2],t&&e.substr(-1*t.length)===t?e.substr(0,e.length-t.length):e}function w(e){return f(e)[3]}var k={extname:w,basename:b,dirname:v,sep:"/",delimiter:":",relative:g,join:y,isAbsolute:m,normalize:d,resolve:h};function _(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var $,E=function(e,t,r){return e.substr(t,r)},S=(k=o(Object.freeze({__proto__:null,basename:b,default:k,delimiter:":",dirname:v,extname:w,isAbsolute:m,join:y,normalize:d,relative:g,resolve:h,sep:"/"})),{env:{}}),O="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){function r(){}e.super_=t,r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},N=/%[sdj%]/g;function A(e){if(!F(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(T(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,s=n.length,i=String(e).replace(N,function(e){if("%%"===e)return"%";if(s<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),o=n[r];r<s;o=n[++r])U(o)||!H(o)?i+=" "+o:i+=" "+T(o);return i}function P(e,t){var n;return J(r.g.process)?function(){return P(e,t).apply(this,arguments)}:!0===S.noDeprecation?e:(n=!1,function(){if(!n){if(S.throwDeprecation)throw new Error(t);S.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)})}var x,j={};function I(e){return J(x)&&(x=S.env.NODE_DEBUG||""),e=e.toUpperCase(),j[e]||(new RegExp("\\b"+e+"\\b","i").test(x)?j[e]=function(){var t=A.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:j[e]=function(){}),j[e]}function T(e,t){var r={seen:[],stylize:L};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),K(t)?r.showHidden=t:t&&ue(r,t),J(r.showHidden)&&(r.showHidden=!1),J(r.depth)&&(r.depth=2),J(r.colors)&&(r.colors=!1),J(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=C),M(r,e,r.depth)}function C(e,t){return(t=T.styles[t])?"["+T.colors[t][0]+"m"+e+"["+T.colors[t][1]+"m":e}function L(e,t){return e}function M(e,t,r){if(e.customInspect&&t&&Q(t.inspect)&&t.inspect!==T&&(!t.constructor||t.constructor.prototype!==t))return F(n=t.inspect(r,e))?n:M(e,n,r);var n=((e,t)=>{var r;return J(t)?e.stylize("undefined","undefined"):F(t)?(r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(r,"string")):V(t)?e.stylize(""+t,"number"):K(t)?e.stylize(""+t,"boolean"):U(t)?e.stylize("null","null"):void 0})(e,t);if(n)return n;n=Object.keys(t);var s,i=(s={},n.forEach(function(e,t){s[e]=!0}),s);if(e.showHidden&&(n=Object.getOwnPropertyNames(t)),Y(t)&&(0<=n.indexOf("message")||0<=n.indexOf("description")))return D(t);if(0===n.length){if(Q(t))return a=t.name?": "+t.name:"",e.stylize("[Function"+a+"]","special");if(G(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(W(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Y(t))return D(t)}var o,a="",l=!1,c=["{","}"];return B(t)&&(l=!0,c=["[","]"]),Q(t)&&(a=" [Function"+(t.name?": "+t.name:"")+"]"),G(t)&&(a=" "+RegExp.prototype.toString.call(t)),W(t)&&(a=" "+Date.prototype.toUTCString.call(t)),Y(t)&&(a=" "+D(t)),0!==n.length||l&&0!=t.length?r<0?G(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),o=l?((e,t,r,n,s)=>{for(var i=[],o=0,a=t.length;o<a;++o)fe(t,String(o))?i.push(R(e,t,r,n,String(o),!0)):i.push("");return s.forEach(function(s){s.match(/^\d+$/)||i.push(R(e,t,r,n,s,!0))}),i})(e,t,r,i,n):n.map(function(n){return R(e,t,r,i,n,l)}),e.seen.pop(),60<o.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===a?"":a+"\n ")+" "+o.join(",\n  ")+" "+c[1]:c[0]+a+" "+o.join(", ")+" "+c[1]):c[0]+a+c[1]}function D(e){return"["+Error.prototype.toString.call(e)+"]"}function R(e,t,r,n,s,i){var o,a;if((t=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]}).get?a=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(a=e.stylize("[Setter]","special")),fe(n,s)||(o="["+s+"]"),a||(e.seen.indexOf(t.value)<0?-1<(a=M(e,t.value,U(r)?null:r-1)).indexOf("\n")&&(a=i?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),J(o)){if(i&&s.match(/^\d+$/))return a;o=(o=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(o,"string"))}return o+": "+a}function B(e){return Array.isArray(e)}function K(e){return"boolean"==typeof e}function U(e){return null===e}function q(e){return null==e}function V(e){return"number"==typeof e}function F(e){return"string"==typeof e}function z(e){return"symbol"==typeof e}function J(e){return void 0===e}function G(e){return H(e)&&"[object RegExp]"===ee(e)}function H(e){return"object"==typeof e&&null!==e}function W(e){return H(e)&&"[object Date]"===ee(e)}function Y(e){return H(e)&&("[object Error]"===ee(e)||e instanceof Error)}function Q(e){return"function"==typeof e}function X(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function Z(e){return n.isBuffer(e)}function ee(e){return Object.prototype.toString.call(e)}function te(e){return e<10?"0"+e.toString(10):e.toString(10)}T.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},T.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var re,ne,se,ie,oe,ae,le=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ce(){var e,t;console.log("%s - %s",(t=[te((e=new Date).getHours()),te(e.getMinutes()),te(e.getSeconds())].join(":"),[e.getDate(),le[e.getMonth()],t].join(" ")),A.apply(null,arguments))}function ue(e,t){if(t&&H(t))for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function fe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function pe(e,t){t=t||{},e=oe(e);for(var r,n,s,i,o,a,l=(e=>{var t=[],r=!0,n={};for(Object.keys(e).forEach(function(r){t.push([].concat(e[r],r))});r;){r=!1;for(var s=0;s<t.length;s++)for(var i=s+1;i<t.length;i++)if(t[s].filter(function(e){return-1!==t[i].indexOf(e)}).length){t[s]=t[s].concat(t[i]),t.splice(i,1),r=!0;break}}return t.forEach(function(e){e=e.filter(function(e,t,r){return r.indexOf(e)===t}),n[e.pop()]=e}),n})(t.alias||{}),c=Object.assign({"short-option-groups":!0,"camel-case-expansion":!0,"dot-notation":!0,"parse-numbers":!0,"boolean-negation":!0,"negation-prefix":"no-","duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"populate--":!1,"combine-arrays":!1,"set-placeholder-key":!1,"halt-at-non-option":!1,"strip-aliased":!1,"strip-dashed":!1},t.configuration),u=t.default||{},f=t.configObjects||[],p=t.envPrefix,h=c["populate--"],d=h?"--":"_",m={},y=t.__||ae.format,g=null,v={aliases:{},arrays:{},bools:{},strings:{},numbers:{},counts:{},normalize:{},configs:{},defaulted:{},nargs:{},coercions:{},keys:[]},b=/^-[0-9]+(\.[0-9]+)?/,w=new RegExp("^--"+c["negation-prefix"]+"(.+)"),k=([].concat(t.array).filter(Boolean).forEach(function(e){var t=e.key||e;(e=Object.keys(e).map(function(e){return{boolean:"bools",string:"strings",number:"numbers"}[e]}).filter(Boolean).pop())&&(v[e][t]=!0),v.arrays[t]=!0,v.keys.push(t)}),[].concat(t.boolean).filter(Boolean).forEach(function(e){v.bools[e]=!0,v.keys.push(e)}),[].concat(t.string).filter(Boolean).forEach(function(e){v.strings[e]=!0,v.keys.push(e)}),[].concat(t.number).filter(Boolean).forEach(function(e){v.numbers[e]=!0,v.keys.push(e)}),[].concat(t.count).filter(Boolean).forEach(function(e){v.counts[e]=!0,v.keys.push(e)}),[].concat(t.normalize).filter(Boolean).forEach(function(e){v.normalize[e]=!0,v.keys.push(e)}),Object.keys(t.narg||{}).forEach(function(e){v.nargs[e]=t.narg[e],v.keys.push(e)}),Object.keys(t.coerce||{}).forEach(function(e){v.coercions[e]=t.coerce[e],v.keys.push(e)}),Array.isArray(t.config)||"string"==typeof t.config?[].concat(t.config).filter(Boolean).forEach(function(e){v.configs[e]=!0}):Object.keys(t.config||{}).forEach(function(e){v.configs[e]=t.config[e]}),[t.key,l,t.default,v.arrays].forEach(function(e){Object.keys(e||{}).forEach(function(e){v.aliases[e]||(v.aliases[e]=[].concat(l[e]||[]),v.aliases[e].concat(e).forEach(function(t){/-/.test(t)&&c["camel-case-expansion"]&&(t=ne(t))!==e&&-1===v.aliases[e].indexOf(t)&&(v.aliases[e].push(t),m[t]=!0)}),v.aliases[e].concat(e).forEach(function(t){1<t.length&&/[A-Z]/.test(t)&&c["camel-case-expansion"]&&(t=se(t,"-"))!==e&&-1===v.aliases[e].indexOf(t)&&(v.aliases[e].push(t),m[t]=!0)}),v.aliases[e].forEach(function(t){v.aliases[t]=[e].concat(v.aliases[e].filter(function(e){return t!==e}))}))})}),Object.keys(u).forEach(function(e){(v.aliases[e]||[]).forEach(function(t){u[t]=u[e]})}),{_:[]}),_=(Object.keys(v.bools).forEach(function(e){Object.prototype.hasOwnProperty.call(u,e)&&(C(e,u[e]),[].concat(v.aliases[e]||[],e).forEach(function(e){v.defaulted[e]=!0}))}),[]),$=0;$<e.length;$++){var E,S,O,N,A=e[$];if(A.match(/^--.+=/)||!c["short-option-groups"]&&A.match(/^-.+=/))q((S=A.match(/^--?([^=]+)=([\s\S]*)$/))[1],v.nargs)?(e.splice($+1,0,S[2]),$=I($,S[1],e)):q(S[1],v.arrays)&&e.length>$+1?(e.splice($+1,0,S[2]),$=T($,S[1],e)):C(S[1],S[2]);else if(A.match(w)&&c["boolean-negation"])C(E=A.match(w)[1],!1);else if(A.match(/^--.+/)||!c["short-option-groups"]&&A.match(/^-[^-]+/))q(E=A.match(/^--?(.+)/)[1],v.nargs)?$=I($,E,e):q(E,v.arrays)&&e.length>$+1?$=T($,E,e):!(void 0===(O=0===v.nargs[E]?void 0:e[$+1])||O.match(/^-/)&&!O.match(b)||q(E,v.bools)||q(E,v.counts))||/^(true|false)$/.test(O)?(C(E,O),$++):C(E,V(E));else if(A.match(/^-.\..+=/))C((S=A.match(/^-([^=]+)=([\s\S]*)$/))[1],S[2]);else if(A.match(/^-.\..+/))O=e[$+1],E=A.match(/^-(.\..+)/)[1],void 0===O||O.match(/^-/)||q(E,v.bools)||q(E,v.counts)?C(E,V(E)):(C(E,O),$++);else if(A.match(/^-[^-]+/)&&!A.match(b)){for(var P=A.slice(1,-1).split(""),x=!1,j=0;j<P.length;j++){if(O=A.slice(j+2),P[j+1]&&"="===P[j+1]){N=A.slice(j+3),q(E=P[j],v.nargs)?(e.splice($+1,0,N),$=I($,E,e)):q(E,v.arrays)&&e.length>$+1?(e.splice($+1,0,N),$=T($,E,e)):C(E,N),x=!0;break}if("-"===O)C(P[j],O);else{if(/[A-Za-z]/.test(P[j])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(O)){C(P[j],O),x=!0;break}if(P[j+1]&&P[j+1].match(/\W/)){C(P[j],O),x=!0;break}C(P[j],V(P[j]))}}E=A.slice(-1)[0],x||"-"===E||(q(E,v.nargs)?$=I($,E,e):q(E,v.arrays)&&e.length>$+1?$=T($,E,e):!(void 0===(O=e[$+1])||/^(-|--)[^-]/.test(O)&&!O.match(b)||q(E,v.bools)||q(E,v.counts))||/^(true|false)$/.test(O)?(C(E,O),$++):C(E,V(E)))}else{if("--"===A){_=e.slice($+1);break}if(c["halt-at-non-option"]){_=e.slice($);break}k._.push(M("_",A))}}function I(e,t,r){for(var n=q(t,v.nargs),s=0,i=e+1;i<r.length&&!r[i].match(/^-[^0-9]/);i++)s++;s<n&&(g=Error(y("Not enough arguments following: %s",t)));var o=Math.min(s,n);for(i=e+1;i<o+e+1;i++)C(t,r[i]);return e+o}function T(e,t,r){for(var n=e+1,s=[],i=0<e,o=e+1;o<r.length;o++){if(/^-/.test(r[o])&&!b.test(r[o])){o===n&&C(t,F("array")),i=!0;break}e=o,s.push(r[o])}return i?C(t,s.map(function(e){return L(t,e)})):s.forEach(function(e){C(t,e)}),e}function C(e,t){[].concat(v.aliases[e]||[],e).forEach(function(e){delete v.defaulted[e]}),/-/.test(e)&&c["camel-case-expansion"]&&(r=e.split(".").map(function(e){return ne(e)}).join("."),function e(t,r){v.aliases[t]&&v.aliases[t].length||(v.aliases[t]=[r],m[r]=!0),v.aliases[r]&&v.aliases[r].length||e(r,t)}(e,r));var r,n=L(e,t),s=e.split(".");U(k,s,n),v.aliases[e]&&v.aliases[e].forEach&&v.aliases[e].forEach(function(e){e=e.split("."),U(k,e,n)}),1<s.length&&c["dot-notation"]&&(v.aliases[s[0]]||[]).forEach(function(e){e=e.split(".");var t=[].concat(s);t.shift(),e=e.concat(t),U(k,e,n)}),q(e,v.normalize)&&!q(e,v.arrays)&&[e].concat(v.aliases[e]||[]).forEach(function(e){k.__defineSetter__(e,function(e){t=ie.normalize(e)}),k.__defineGetter__(e,function(){return"string"==typeof t?ie.normalize(t):t})})}function L(e,t){"string"!=typeof t||"'"!==t[0]&&'"'!==t[0]||t[t.length-1]!==t[0]||(t=t.substring(1,t.length-1));var r=M(e,t=(q(e,v.bools)||q(e,v.counts))&&"string"==typeof t?"true"===t:t);return q(e,v.counts)&&(z(r)||"boolean"==typeof r)&&(r=he),q(e,v.normalize)&&q(e,v.arrays)?Array.isArray(t)?t.map(ie.normalize):ie.normalize(t):r}function M(e,t){var r;return q(e,v.strings)||q(e,v.coercions)||!(null!=(r=t)&&("number"==typeof r||/^0x[0-9a-f]+$/i.test(r)||!(1<r.length&&"0"===r[0])&&/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(r))&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(t))||!z(t)&&q(e,v.numbers))?t:Number(t)}function D(e,t){Object.keys(e).forEach(function(r){var n=e[r];r=t?t+"."+r:r,"object"==typeof n&&null!==n&&!Array.isArray(n)&&c["dot-notation"]?D(n,r):(!K(k,r.split("."))||v.defaulted[r]||v.arrays[r]&&c["combine-arrays"])&&C(r,n)})}function R(e,t){var r;void 0!==p&&(r="string"==typeof p?p:"",Object.keys(process.env).forEach(function(n){var s;""!==r&&0!==n.lastIndexOf(r,0)||(s=n.split("__").map(function(e,t){return 0===t&&(e=e.substring(r.length)),ne(e)}),!(t&&v.configs[s.join(".")]||!t))||K(e,s)&&!v.defaulted[s.join(".")]||C(s.join("."),process.env[n])}))}function B(e,t,r){Object.keys(r).forEach(function(n){K(e,n.split("."))||(U(e,n.split("."),r[n]),(t[n]||[]).forEach(function(t){K(e,t.split("."))||U(e,t.split("."),r[n])}))})}function K(e,t){var r=e;return(t=c["dot-notation"]?t:[t.join(".")]).slice(0,-1).forEach(function(e){r=r[e]||{}}),e=t[t.length-1],"object"==typeof r&&e in r}function U(e,t,r){var n=e,s=((t=c["dot-notation"]?t:[t.join(".")]).slice(0,-1).forEach(function(e,t){e=me(e),"object"==typeof n&&void 0===n[e]&&(n[e]={}),n="object"!=typeof n[e]||Array.isArray(n[e])?(Array.isArray(n[e])?n[e].push({}):n[e]=[n[e],{}],n[e][n[e].length-1]):n[e]}),e=me(t[t.length-1]),q(t.join("."),v.arrays)),i=Array.isArray(r);let o=c["duplicate-arguments-array"];!o&&q(e,v.nargs)&&(o=!0,!z(n[e])&&1===v.nargs[e]||Array.isArray(n[e])&&n[e].length===v.nargs[e])&&(n[e]=void 0),r===he?n[e]=he(n[e]):Array.isArray(n[e])?o&&s&&i?n[e]=c["flatten-duplicate-arrays"]?n[e].concat(r):(Array.isArray(n[e][0])?n[e]:[n[e]]).concat([r]):o||Boolean(s)!==Boolean(i)?n[e]=n[e].concat([r]):n[e]=r:void 0===n[e]&&s?n[e]=i?r:[r]:o&&!(void 0===n[e]||q(e,v.bools)||q(t.join("."),v.bools)||q(e,v.counts))?n[e]=[n[e],r]:n[e]=r}function q(e,t){var r=!1;return[].concat(v.aliases[e]||[],e).forEach(function(e){t[e]&&(r=t[e])}),r}function V(e){return q(e,v.bools)||q(e,v.counts)||!(""+e in u)?F((e=>{var t="boolean";return q(e,v.strings)?t="string":q(e,v.numbers)?t="number":q(e,v.arrays)&&(t="array"),t})(e)):u[e]}function F(e){return{boolean:!0,string:"",number:void 0,array:[]}[e]}function z(e){return void 0===e}return R(k,!0),R(k,!1),r=k,B(n={},v.aliases,u),Object.keys(v.configs).forEach(function(e){var t=r[e]||n[e];if(t)try{var s=null,i=ie.resolve(process.cwd(),t);if("function"==typeof v.configs[e]){try{s=v.configs[e](i)}catch(i){s=i}if(s instanceof Error)return void(g=s)}else s=(e=>{throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')})(i);D(s)}catch(i){r[e]&&(g=Error(y("Invalid JSON config file: %s",t)))}}),void 0!==f&&f.forEach(function(e){D(e)}),B(k,v.aliases,u),s=k,o={},Object.keys(s).forEach(function(e){if(!o.hasOwnProperty(e)&&"function"==typeof(i=q(e,v.coercions)))try{var t=i(s[e]);[].concat(v.aliases[e]||[],e).forEach(e=>{o[e]=s[e]=t})}catch(e){g=e}}),c["set-placeholder-key"]&&(a=k,v.keys.forEach(e=>{~e.indexOf(".")||void 0===a[e]&&(a[e]=void 0)})),Object.keys(v.counts).forEach(function(e){K(k,e.split("."))||C(e,0)}),h&&_.length&&(k[d]=[]),_.forEach(function(e){k[d].push(e)}),c["camel-case-expansion"]&&c["strip-dashed"]&&Object.keys(k).filter(e=>"--"!==e&&e.includes("-")).forEach(e=>{delete k[e]}),c["strip-aliased"]&&[].concat(...Object.keys(l).map(e=>l[e])).forEach(e=>{c["camel-case-expansion"]&&delete k[e.split(".").map(e=>ne(e)).join(".")],delete k[e]}),{argv:k,error:g,aliases:v.aliases,newAliases:m,configuration:c}}function he(e){return void 0!==e?e+1:1}function de(e,t){return pe(e.slice(),t).argv}function me(e){return"__proto__"===e?"___proto___":e}function ye(e){return!(!(t=e)||"object"!=typeof t||(t=e,"[object RegExp]"===(e=Object.prototype.toString.call(t)))||"[object Date]"===e||(e=>e.$$typeof===ve)(t));var t}O=o(Object.freeze({__proto__:null,_extend:ue,debuglog:I,default:{inherits:O,_extend:ue,log:ce,isBuffer:Z,isPrimitive:X,isFunction:Q,isError:Y,isDate:W,isObject:H,isRegExp:G,isUndefined:J,isSymbol:z,isString:F,isNumber:V,isNullOrUndefined:q,isNull:U,isBoolean:K,isArray:B,inspect:T,deprecate:P,format:A,debuglog:I},deprecate:P,format:A,inherits:O,inspect:T,isArray:B,isBoolean:K,isBuffer:Z,isDate:W,isError:Y,isFunction:Q,isNull:U,isNullOrUndefined:q,isNumber:V,isObject:H,isPrimitive:X,isRegExp:G,isString:F,isSymbol:z,isUndefined:J,log:ce})),Ue||(Ue=1,ne=(()=>{if(!a){a=1;var e=(e,t)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e=(e=e!==e.toLowerCase()?(e=>{let t=!1,r=!1,n=!1;for(let i=0;i<e.length;i++){var s=e[i];t&&/[a-zA-Z]/.test(s)&&s.toUpperCase()===s?(e=e.slice(0,i)+"-"+e.slice(i),t=!1,n=r,r=!0,i++):r&&n&&/[a-zA-Z]/.test(s)&&s.toLowerCase()===s?(e=e.slice(0,i-1)+"-"+e.slice(i-1),n=r,r=!1,t=!0):(t=s.toLowerCase()===s&&s.toUpperCase()!==s,n=r,r=s.toUpperCase()===s&&s.toLowerCase()!==s)}return e})(e):e).replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(e,t)=>t.toUpperCase()).replace(/\d+(\w|$)/g,e=>e.toUpperCase()),t.pascalCase?e.charAt(0).toUpperCase()+e.slice(1):e)};c.exports=e,c.exports.default=e}return c.exports})(),Yt||(Yt=1,l=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/([a-z\d])([A-Z])/g,"$1"+(t=void 0===t?"_":t)+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}),se=l,ie=k,Qt||(Qt=1,$=function(e){if(Array.isArray(e))return e.map(e=>"string"!=typeof e?e+"":e);e=e.trim();for(var t,r=0,n=null,s=null,i=[],o=0;o<e.length;o++)t=n," "!==(n=e.charAt(o))||s?(n===s?s=null:"'"!==n&&'"'!==n||(s=s||n),i[r]||(i[r]=""),i[r]+=n):" "!==t&&r++;return i}),oe=$,ae=O,de.detailed=function(e,t){return pe(e.slice(),t)},re=de);var ge=i(re),ve="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function be(e,t){return!1!==t.clone&&t.isMergeableObject(e)?ke(Array.isArray(e)?[]:{},e,t):e}function we(e,t,r){return e.concat(t).map(function(e){return be(e,r)})}function ke(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||we,r.isMergeableObject=r.isMergeableObject||ye;var n,s,i,o,a=Array.isArray(t);return a===Array.isArray(e)?a?r.arrayMerge(e,t,r):(n=e,s=t,o={},(i=r).isMergeableObject(n)&&Object.keys(n).forEach(function(e){o[e]=be(n[e],i)}),Object.keys(s).forEach(function(e){i.isMergeableObject(s[e])&&n[e]?o[e]=ke(n[e],s[e],i):o[e]=be(s[e],i)}),o):be(t,r)}ke.all=function(e,t){if(Array.isArray(e))return e.reduce(function(e,r){return ke(e,r,t)},{});throw new Error("first argument should be an array")};var _e=ke,$e={};let Ee=Symbol.for("yaml.alias"),Se=Symbol.for("yaml.document"),Oe=Symbol.for("yaml.map"),Ne=Symbol.for("yaml.pair"),Ae=Symbol.for("yaml.scalar"),Pe=Symbol.for("yaml.seq"),xe=Symbol.for("yaml.node.type"),je=e=>!!e&&"object"==typeof e&&e[xe]===Ee,Ie=e=>!!e&&"object"==typeof e&&e[xe]===Se,Te=e=>!!e&&"object"==typeof e&&e[xe]===Oe,Ce=e=>!!e&&"object"==typeof e&&e[xe]===Ne,Le=e=>!!e&&"object"==typeof e&&e[xe]===Ae,Me=e=>!!e&&"object"==typeof e&&e[xe]===Pe;function De(e){if(e&&"object"==typeof e)switch(e[xe]){case Oe:case Pe:return!0}return!1}function Re(e){if(e&&"object"==typeof e)switch(e[xe]){case Ee:case Oe:case Ae:case Pe:return!0}return!1}let Be=e=>(Le(e)||De(e))&&!!e.anchor,Ke=Symbol("break visit");var Ue=Symbol("skip children");let qe=Symbol("remove node");function Ve(e,t){t=Ge(t),Ie(e)?Fe(null,e.contents,t,Object.freeze([e]))===qe&&(e.contents=null):Fe(null,e,t,Object.freeze([]))}function Fe(e,t,r,n){var s=He(e,t,r,n);if(Re(s)||Ce(s))return We(e,n,s),Fe(e,s,r,n);if("symbol"!=typeof s)if(De(t)){n=Object.freeze(n.concat(t));for(let e=0;e<t.items.length;++e){var i=Fe(e,t.items[e],r,n);if("number"==typeof i)e=i-1;else{if(i===Ke)return Ke;i===qe&&(t.items.splice(e,1),--e)}}}else if(Ce(t)){if(n=Object.freeze(n.concat(t)),(e=Fe("key",t.key,r,n))===Ke)return Ke;if(e===qe&&(t.key=null),(e=Fe("value",t.value,r,n))===Ke)return Ke;e===qe&&(t.value=null)}return s}async function ze(e,t){t=Ge(t),Ie(e)?await Je(null,e.contents,t,Object.freeze([e]))===qe&&(e.contents=null):await Je(null,e,t,Object.freeze([]))}async function Je(e,t,r,n){var s=await He(e,t,r,n);if(Re(s)||Ce(s))return We(e,n,s),Je(e,s,r,n);if("symbol"!=typeof s)if(De(t)){n=Object.freeze(n.concat(t));for(let e=0;e<t.items.length;++e){var i=await Je(e,t.items[e],r,n);if("number"==typeof i)e=i-1;else{if(i===Ke)return Ke;i===qe&&(t.items.splice(e,1),--e)}}}else if(Ce(t)){if(n=Object.freeze(n.concat(t)),(e=await Je("key",t.key,r,n))===Ke)return Ke;if(e===qe&&(t.key=null),(e=await Je("value",t.value,r,n))===Ke)return Ke;e===qe&&(t.value=null)}return s}function Ge(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function He(e,t,r,n){return"function"==typeof r?r(e,t,n):Te(t)?r.Map?.(e,t,n):Me(t)?r.Seq?.(e,t,n):Ce(t)?r.Pair?.(e,t,n):Le(t)?r.Scalar?.(e,t,n):je(t)?r.Alias?.(e,t,n):void 0}function We(e,t,r){if(De(t=t[t.length-1]))t.items[e]=r;else if(Ce(t))"key"===e?t.key=r:t.value=r;else{if(!Ie(t))throw e=je(t)?"alias":"scalar",new Error(`Cannot replace node with ${e} parent`);t.contents=r}}Ve.BREAK=Ke,Ve.SKIP=Ue,Ve.REMOVE=qe,ze.BREAK=Ke,ze.SKIP=Ue,ze.REMOVE=qe;let Ye={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class Qe{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Qe.defaultYaml,e),this.tags=Object.assign({},Qe.defaultTags,t)}clone(){var e=new Qe(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){var e=new Qe(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Qe.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Qe.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:Qe.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Qe.defaultTags),this.atNextDocument=!1);var r,n,s=e.trim().split(/[ \t]+/),i=s.shift();switch(i){case"%TAG":return!(2!==s.length&&(t(0,"%TAG directive should contain exactly two parts"),s.length<2)||([n,r]=s,this.tags[n]=r,0));case"%YAML":return this.yaml.explicit=!0,1!==s.length?(t(0,"%YAML directive should contain exactly one part"),!1):([n]=s,"1.1"===n||"1.2"===n?(this.yaml.version=n,!0):(t(6,"Unsupported YAML version "+n,/^\d+\.\d+$/.test(n)),!1));default:return t(0,"Unknown directive "+i,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])t("Not a valid tag: "+e);else{if("<"===e[1])return"!"===(r=e.slice(2,-1))||"!!"===r?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),r);var[,r,n]=e.match(/^(.*!)([^!]*)$/s),s=(n||t(`The ${e} tag has no suffix`),this.tags[r]);if(s)try{return s+decodeURIComponent(n)}catch(e){return t(String(e)),null}if("!"===r)return e;t("Could not resolve tag: "+e)}return null}tagString(e){for(let[t,r]of Object.entries(this.tags))if(e.startsWith(r))return t+e.substring(r.length).replace(/[!,[\]{}]/g,e=>Ye[e]);return"!"===e[0]?e:`!<${e}>`}toString(e){var t=this.yaml.explicit?["%YAML "+(this.yaml.version||"1.2")]:[],r=Object.entries(this.tags);let n;if(e&&0<r.length&&Re(e.contents)){let t={};Ve(e.contents,(e,r)=>{Re(r)&&r.tag&&(t[r.tag]=!0)}),n=Object.keys(t)}else n=[];for(let[s,i]of r)"!!"===s&&"tag:yaml.org,2002:"===i||e&&!n.some(e=>e.startsWith(i))||t.push(`%TAG ${s} `+i);return t.join("\n")}}function Xe(e){if(/[\x00-\x19\s,[\]{}]/.test(e))throw e=JSON.stringify(e),new Error("Anchor must not contain whitespace or control characters: "+e);return 1}function Ze(e){let t=new Set;return Ve(e,{Value(e,r){r.anchor&&t.add(r.anchor)}}),t}function et(e,t){for(let n=1;;++n){var r=""+e+n;if(!t.has(r))return r}}function tt(e,t,r,n){if(n&&"object"==typeof n)if(Array.isArray(n))for(let t=0,r=n.length;t<r;++t){var s=n[t],i=tt(e,n,String(t),s);void 0===i?delete n[t]:i!==s&&(n[t]=i)}else if(n instanceof Map)for(var o of Array.from(n.keys())){var a=n.get(o),l=tt(e,n,o,a);void 0===l?n.delete(o):l!==a&&n.set(o,l)}else if(n instanceof Set)for(var c of Array.from(n)){var u=tt(e,n,c,c);void 0===u?n.delete(c):u!==c&&(n.delete(c),n.add(u))}else for(var[f,p]of Object.entries(n)){var h=tt(e,n,f,p);void 0===h?delete n[f]:h!==p&&(n[f]=h)}return e.call(t,r,n)}function rt(e,t,r){if(Array.isArray(e))return e.map((e,t)=>rt(e,String(t),r));if(e&&"function"==typeof e.toJSON){if(!r||!Be(e))return e.toJSON(t,r);let n={aliasCount:0,count:1,res:void 0};return r.anchors.set(e,n),r.onCreate=e=>{n.res=e,delete r.onCreate},t=e.toJSON(t,r),r.onCreate&&r.onCreate(t),t}return"bigint"!=typeof e||r?.keep?e:Number(e)}Qe.defaultYaml={explicit:!1,version:"1.2"},Qe.defaultTags={"!!":"tag:yaml.org,2002:"};class nt{constructor(e){Object.defineProperty(this,xe,{value:e})}clone(){var e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:r,onAnchor:n,reviver:s}={}){if(!Ie(e))throw new TypeError("A document argument is required");let i=rt(this,"",e={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100});if("function"==typeof n)for(let{count:t,res:r}of e.anchors.values())n(r,t);return"function"==typeof s?tt(s,{"":i},"",i):i}}class st extends nt{constructor(e){super(Ee),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,t){let r,n=void(t?.aliasResolveCache?r=t.aliasResolveCache:(r=[],Ve(e,{Node:(e,t)=>{(je(t)||Be(t))&&r.push(t)}}),t&&(t.aliasResolveCache=r)));for(var s of r){if(s===this)break;s.anchor===this.source&&(n=s)}return n}toJSON(e,t){if(!t)return{source:this.source};var r,{anchors:n,doc:s,maxAliasCount:i}=t,o=this.resolve(s,t);if(!o)throw r="Unresolved alias (the anchor must be set before the alias): "+this.source,new ReferenceError(r);let a=n.get(o);if(a||(rt(o,null,t),a=n.get(o)),!a||void 0===a.res)throw new ReferenceError("This should not happen: Alias anchor was not resolved?");if(0<=i&&(a.count+=1,0===a.aliasCount&&(a.aliasCount=function e(t,r,n){if(je(r)){let e=r.resolve(t),s=n&&e&&n.get(e);return s?s.count*s.aliasCount:0}if(De(r)){let i=0;for(var s of r.items){let r=e(t,s,n);r>i&&(i=r)}return i}if(Ce(r)){let s=e(t,r.key,n),i=e(t,r.value,n);return Math.max(s,i)}return 1}(s,o,n)),a.count*a.aliasCount>i))throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack");return a.res}toString(e,t,r){var n,s="*"+this.source;if(e){if(Xe(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source))throw n="Unresolved alias (the anchor must be set before the alias): "+this.source,new Error(n);if(e.implicitKey)return s+" "}return s}}let it=e=>!e||"function"!=typeof e&&"object"!=typeof e;class ot extends nt{constructor(e){super(Ae),this.value=e}toJSON(e,t){return t?.keep?this.value:rt(this.value,e,t)}toString(){return String(this.value)}}ot.BLOCK_FOLDED="BLOCK_FOLDED",ot.BLOCK_LITERAL="BLOCK_LITERAL",ot.PLAIN="PLAIN",ot.QUOTE_DOUBLE="QUOTE_DOUBLE",ot.QUOTE_SINGLE="QUOTE_SINGLE";function at(e,t,r){if(Re(e=Ie(e)?e.contents:e))return e;if(Ce(e))return(n=r.schema[Oe].createNode?.(r.schema,null,r)).items.push(e),n;(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());var{aliasDuplicateObjects:n,onAnchor:s,onTagObj:i,schema:o,sourceObjects:a}=r;let l;if(n&&e&&"object"==typeof e){if(l=a.get(e))return l.anchor??(l.anchor=s(e)),new st(l.anchor);l={anchor:null,node:null},a.set(e,l)}let c=((e,t,r)=>{if(t){var n;if(n=(n=r.filter(e=>e.tag===t)).find(e=>!e.format)??n[0])return n;throw new Error(`Tag ${t} not found`)}return r.find(t=>t.identify?.(e)&&!t.format)})(e,t=t?.startsWith("!!")?"tag:yaml.org,2002:"+t.slice(2):t,o.tags);if(!c){if(!(e=e&&"function"==typeof e.toJSON?e.toJSON():e)||"object"!=typeof e){let t=new ot(e);return l&&(l.node=t),t}c=e instanceof Map||!(Symbol.iterator in Object(e))?o[Oe]:o[Pe]}i&&(i(c),delete r.onTagObj);let u=c?.createNode?c.createNode(r.schema,e,r):"function"==typeof c?.nodeClass?.from?c.nodeClass.from(r.schema,e,r):new ot(e);return t?u.tag=t:c.default||(u.tag=c.tag),l&&(l.node=u),u}function lt(e,t,r){let n=r;for(let e=t.length-1;0<=e;--e){var s,i=t[e];n="number"==typeof i&&Number.isInteger(i)&&0<=i?((s=[])[i]=n,s):new Map([[i,n]])}return at(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}let ct=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class ut extends nt{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){var t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(t=>Re(t)||Ce(t)?t.clone(e):t),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(ct(e))this.add(t);else{var[e,...r]=e,n=this.get(e,!0);if(De(n))n.addIn(r,t);else{if(void 0!==n||!this.schema)throw new Error(`Expected YAML collection at ${e}. Remaining path: `+r);this.set(e,lt(this.schema,r,t))}}}deleteIn(e){var[e,...t]=e;if(0===t.length)return this.delete(e);var r=this.get(e,!0);if(De(r))return r.deleteIn(t);throw new Error(`Expected YAML collection at ${e}. Remaining path: `+t)}getIn(e,t){var[e,...r]=e;return e=this.get(e,!0),0===r.length?!t&&Le(e)?e.value:e:De(e)?e.getIn(r,t):void 0}hasAllNullValues(e){return this.items.every(t=>!!Ce(t)&&(null==(t=t.value)||e&&Le(t)&&null==t.value&&!t.commentBefore&&!t.comment&&!t.tag))}hasIn(e){var[e,...t]=e;return 0===t.length?this.has(e):!!De(e=this.get(e,!0))&&e.hasIn(t)}setIn(e,t){var[e,...r]=e;if(0===r.length)this.set(e,t);else{var n=this.get(e,!0);if(De(n))n.setIn(r,t);else{if(void 0!==n||!this.schema)throw new Error(`Expected YAML collection at ${e}. Remaining path: `+r);this.set(e,lt(this.schema,r,t))}}}}let ft=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function pt(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}let ht=(e,t,r)=>e.endsWith("\n")?pt(r,t):r.includes("\n")?"\n"+pt(r,t):(e.endsWith(" ")?"":" ")+r,dt="flow",mt="block",yt="quoted";function gt(e,t,r="flow",{indentAtStart:n,lineWidth:s=80,minContentWidth:i=20,onFold:o,onOverflow:a}={}){if(!s||s<0)return e;s<i&&(i=0);var l=Math.max(1+i,1+s-t.length);if(e.length<=l)return e;var c=[],u={};let f,p=s-t.length,h=void("number"==typeof n&&(n>s-Math.max(2,i)?c.push(0):p=s-n)),d=!1,m=-1,y=-1,g=-1;r===mt&&-1!==(m=vt(e,m,t.length))&&(p=m+l);for(let n;n=e[m+=1];){if(r===yt&&"\\"===n){switch(e[(y=m)+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}g=m}if("\n"===n)r===mt&&(m=vt(e,m,t.length)),p=m+t.length+l,h=void 0;else if(" "===n&&f&&" "!==f&&"\n"!==f&&"\t"!==f&&(v=e[m+1])&&" "!==v&&"\n"!==v&&"\t"!==v&&(h=m),m>=p)if(h)c.push(h),p=h+l,h=void 0;else if(r===yt){for(;" "===f||"\t"===f;)f=n,n=e[m+=1],d=!0;var v=m>g+1?m-2:y-1;if(u[v])return e;c.push(v),u[v]=!0,p=v+l,h=void 0}else d=!0;f=n}if(d&&a&&a(),0===c.length)return e;o&&o();let b=e.slice(0,c[0]);for(let n=0;n<c.length;++n){var w=c[n];let s=c[n+1]||e.length;0===w?b="\n"+t+e.slice(0,s):(r===yt&&u[w]&&(b+=e[w]+"\\"),b+="\n"+t+e.slice(w+1,s))}return b}function vt(e,t,r){let n=t,s=t+1,i=e[s];for(;" "===i||"\t"===i;)if(t<s+r)i=e[++t];else{for(;(i=e[++t])&&"\n"!==i;);n=t,s=t+1,i=e[s]}return n}let bt,wt=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),kt=e=>/^(%|---|\.\.\.)/m.test(e);function _t(e,t){var r=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return r;var n=t.implicitKey,s=t.options.doubleQuotedMinMultiLineLength,i=t.indent||(kt(e)?"  ":"");let o="",a=0;for(let e=0,t=r[e];t;t=r[++e])if(" "===t&&"\\"===r[e+1]&&"n"===r[e+2]&&(o+=r.slice(a,e)+"\\ ",e+=1,a=e,t="\\"),"\\"===t)switch(r[e+1]){case"u":o+=r.slice(a,e);var l=r.substr(e+2,4);switch(l){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:"00"===l.substr(0,2)?o+="\\x"+l.substr(2):o+=r.substr(e,6)}e+=5,a=e+1;break;case"n":if(n||'"'===r[e+2]||r.length<s)e+=1;else{for(o+=r.slice(a,e)+"\n\n";"\\"===r[e+2]&&"n"===r[e+3]&&'"'!==r[e+4];)o+="\n",e+=2;o+=i," "===r[e+2]&&(o+="\\"),e+=1,a=e+1}break;default:e+=1}return o=a?o+r.slice(a):r,n?o:gt(o,i,yt,wt(t,!1))}function $t(e,t){var r;return!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e)?_t(e,t):(r=t.indent||(kt(e)?"  ":""),e="'"+e.replace(/'/g,"''").replace(/\n+/g,"$&\n"+r)+"'",t.implicitKey?e:gt(e,r,dt,wt(t,!1)))}function Et(e,t){var r,n,s=t.options.singleQuote;let i;return(i=!1!==s&&(r=e.includes('"'),n=e.includes("'"),r&&!n||(!n||r)&&s)?$t:_t)(e,t)}try{bt=new RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{bt=/\n+(?!\n|$)/g}function St({comment:e,type:t,value:r},n,s,i){var{blockQuote:o,commentString:a,lineWidth:l}=n.options;if(!o||/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return Et(r,n);var c=n.indent||(n.forceBlockIndent||kt(r)?"  ":""),l="literal"===o||"folded"!==o&&t!==ot.BLOCK_FOLDED&&(t===ot.BLOCK_LITERAL||!((e,t,r)=>{if(t&&!(t<0)){var n=t-r,s=e.length;if(!(s<=n)){for(let t=0,r=0;t<s;++t)if("\n"===e[t]){if(t-r>n)return 1;if(s-(r=t+1)<=n)return}return 1}}})(r,l,c.length));if(!r)return l?"|\n":">\n";let u,f;for(f=r.length;0<f;--f){var p=r[f-1];if("\n"!==p&&"\t"!==p&&" "!==p)break}let h=r.substring(f);var d=h.indexOf("\n");-1===d?u="-":r===h||d!==h.length-1?(u="+",i&&i()):u="",h&&(r=r.slice(0,-h.length),h=(h="\n"===h[h.length-1]?h.slice(0,-1):h).replace(bt,"$&"+c));let m,y=!1,g=-1;for(m=0;m<r.length;++m){var v=r[m];if(" "===v)y=!0;else{if("\n"!==v)break;g=m}}let b=r.substring(0,g<m?g+1:m),w=(b&&(r=r.substring(b.length),b=b.replace(/\n+/g,"$&"+c)),(y?c?"2":"1":"")+u);if(e&&(w+=" "+a(e.replace(/ ?[\r\n]+/g," ")),s)&&s(),!l){d=r.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,"$&"+c);let e=!1;if(i=wt(n,!0),"folded"!==o&&t!==ot.BLOCK_FOLDED&&(i.onOverflow=()=>{e=!0}),a=gt(""+b+d+h,c,mt,i),!e)return`>${w}\n`+c+a}return`|${w}\n`+c+b+(r=r.replace(/\n+/g,"$&"+c))+h}function Ot(e,t,r,n){let{implicitKey:s,inFlow:i}=t,o="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)}),a=e.type;e=e=>{switch(e){case ot.BLOCK_FOLDED:case ot.BLOCK_LITERAL:return s||i?Et(o.value,t):St(o,t,r,n);case ot.QUOTE_DOUBLE:return _t(o.value,t);case ot.QUOTE_SINGLE:return $t(o.value,t);case ot.PLAIN:{var a=o,l=t,c=r,u=n,{type:f,value:p}=a,{actualString:h,implicitKey:d,indent:m,indentStep:y,inFlow:g}=l;if(d&&p.includes("\n")||g&&/[[\]{},]/.test(p))return Et(p,l);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(p))return d||g||!p.includes("\n")?Et(p,l):St(a,l,c,u);if(!d&&!g&&f!==ot.PLAIN&&p.includes("\n"))return St(a,l,c,u);if(kt(p)){if(""===m)return l.forceBlockIndent=!0,St(a,l,c,u);if(d&&m===y)return Et(p,l)}let e=p.replace(/\n+/g,"$&\n"+m);if(h){var g=t=>t.default&&"tag:yaml.org,2002:str"!==t.tag&&t.test?.test(e),{compat:f,tags:a}=l.doc.schema;if(a.some(g)||f?.some(g))return Et(p,l)}return d?e:gt(e,m,dt,wt(l,!1))}default:return null}};let l=e(a=a!==ot.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)?ot.QUOTE_DOUBLE:a);if(null===l){var c,{defaultKeyType:c,defaultStringType:u}=t.options;if(null===(l=e(c=s&&c||u)))throw new Error("Unsupported default string type "+c)}return l}function Nt(e,t){let r;switch((t=Object.assign({blockQuote:!0,commentString:ft,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t)).collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:e,flowCollectionPadding:t.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof t.indent?" ".repeat(t.indent):"  ",inFlow:r,options:t}}function At(e,t,r,n){if(Ce(e))return e.toString(t,r,n);if(je(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let s;e=Re(e)?e:t.doc.createNode(e,{onTagObj:e=>s=e});var i,o,a,l,c=(s=s??((e,t)=>{if(t.tag){var r=e.filter(e=>e.tag===t.tag);if(0<r.length)return r.find(e=>e.format===t.format)??r[0]}let n,s;if(Le(t)){s=t.value;let i=e.filter(e=>e.identify?.(s));1<i.length&&0<(r=i.filter(e=>e.test)).length&&(i=r),n=i.find(e=>e.format===t.format)??i.find(e=>!e.format)}else s=t,n=e.find(e=>e.nodeClass&&s instanceof e.nodeClass);if(n)return n;throw r=s?.constructor?.name??(null===s?"null":typeof s),new Error(`Tag not resolved for ${r} value`)})(t.doc.schema.tags,e),[u,i,{anchors:o,doc:a}]=[e,s,t],a.directives?(l=[],(c=(Le(u)||De(u))&&u.anchor)&&Xe(c)&&(o.add(c),l.push("&"+c)),(o=u.tag??(i.default?null:i.tag))&&l.push(a.directives.tagString(o)),l.join(" ")):""),u=(0<c.length&&(t.indentAtStart=(t.indentAtStart??0)+c.length+1),"function"==typeof s.stringify?s.stringify(e,t,r,n):Le(e)?Ot(e,t,r,n):e.toString(t,r,n));return c?Le(e)||"{"===u[0]||"["===u[0]?c+" "+u:c+"\n"+t.indent+u:u}function Pt(e,t){"debug"!==e&&"warn"!==e||console.warn(t)}let xt={identify:e=>"<<"===e||"symbol"==typeof e&&"<<"===e.description,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new ot(Symbol("<<")),{addToJSMap:jt}),stringify:()=>"<<"};function jt(e,t,r){if(r=e&&je(r)?r.resolve(e.doc):r,Me(r))for(var n of r.items)It(e,t,n);else if(Array.isArray(r))for(var s of r)It(e,t,s);else It(e,t,r)}function It(e,t,r){var n=e&&je(r)?r.resolve(e.doc):r;if(!Te(n))throw new Error("Merge sources must be maps or map aliases");for(let[r,s]of n.toJSON(null,e,Map))t instanceof Map?t.has(r)||t.set(r,s):t instanceof Set?t.add(r):Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{value:s,writable:!0,enumerable:!0,configurable:!0})}function Tt(e,t,{key:r,value:n}){var s,i;return Re(r)&&r.addToJSMap?r.addToJSMap(e,t,n):(s=e,(xt.identify(i=r)||Le(i)&&(!i.type||i.type===ot.PLAIN)&&xt.identify(i.value))&&s?.doc.schema.tags.some(e=>e.tag===xt.tag&&e.default)?jt(e,t,n):(i=rt(r,"",e),t instanceof Map?t.set(i,rt(n,i,e)):t instanceof Set?t.add(i):(n=rt(n,s=((e,t,r)=>{if(null===t)return"";if("object"!=typeof t)return String(t);if(Re(e)&&r?.doc){var n,s=Nt(r.doc,{});for(n of(s.anchors=new Set,r.anchors.keys()))s.anchors.add(n.anchor);if(s.inFlow=!0,s.inStringifyKey=!0,e=e.toString(s),!r.mapKeyWarned){let t=JSON.stringify(e);40<t.length&&(t=t.substring(0,36)+'..."'),Pt(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${t}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return e}return JSON.stringify(t)})(r,i,e),e),s in t?Object.defineProperty(t,s,{value:n,writable:!0,enumerable:!0,configurable:!0}):t[s]=n))),t}function Ct(e,t,r){return e=at(e,void 0,r),t=at(t,void 0,r),new Lt(e,t)}class Lt{constructor(e,t=null){Object.defineProperty(this,xe,{value:Ne}),this.key=e,this.value=t}clone(e){let{key:t,value:r}=this;return Re(t)&&(t=t.clone(e)),Re(r)&&(r=r.clone(e)),new Lt(t,r)}toJSON(e,t){return Tt(t,t?.mapAsMap?new Map:{},this)}toString(e,t,r){if(e?.doc){var[{key:e,value:t},r,n,s]=[this,e,t,r],{allNullValues:i,doc:o,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:f}}=r;let p=Re(e)&&e.comment||null;if(f){if(p)throw new Error("With simple keys, key nodes cannot have comments");if(De(e)||!Re(e)&&"object"==typeof e)throw new Error("With simple keys, collection cannot be used as a key value")}let h=!f&&(!e||p&&null==t&&!r.inFlow||De(e)||(Le(e)?e.type===ot.BLOCK_FOLDED||e.type===ot.BLOCK_LITERAL:"object"==typeof e)),d=(r=Object.assign({},r,{allNullValues:!1,implicitKey:!h&&(f||!i),indent:a+l}),!1),m=!1,y=At(e,r,()=>d=!0,()=>m=!0);if(!h&&!r.inFlow&&1024<y.length){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");h=!0}if(r.inFlow){if(i||null==t)return d&&n&&n(),""===y?"?":h?"? "+y:y}else if(i&&!f||null==t&&h)return y="? "+y,p&&!d?y+=ht(y,r.indent,c(p)):m&&s&&s(),y;d&&(p=null),h?(p&&(y+=ht(y,r.indent,c(p))),y=`? ${y}\n${a}:`):(y+=":",p&&(y+=ht(y,r.indent,c(p))));let g,v,b,w=(Re(t)?(g=!!t.spaceBefore,v=t.commentBefore,b=t.comment):(g=!1,v=null,b=null,t&&"object"==typeof t&&(t=o.createNode(t))),r.implicitKey=!1,h||p||!Le(t)||(r.indentAtStart=y.length+1),m=!1,u||!(2<=l.length)||r.inFlow||h||!Me(t)||t.flow||t.tag||t.anchor||(r.indent=r.indent.substring(2)),!1),k=(e=At(t,r,()=>w=!0,()=>m=!0)," ");if(p||g||v)k=g?"\n":"",v&&(k+="\n"+pt(i=c(v),r.indent)),""!==e||r.inFlow?k+="\n"+r.indent:"\n"===k&&(k="\n\n");else if(!h&&De(t)){if(f=e[0],o=-1!==(a=e.indexOf("\n")),u=r.inFlow??t.flow??0===t.items.length,o||!u){let t=!1;if(o&&("&"===f||"!"===f)){let r=e.indexOf(" ");(-1===(r="&"===f&&-1!==r&&r<a&&"!"===e[r+1]?e.indexOf(" ",r+1):r)||a<r)&&(t=!0)}t||(k="\n"+r.indent)}}else""!==e&&"\n"!==e[0]||(k="");return y+=k+e,r.inFlow?w&&n&&n():b&&!w?y+=ht(y,r.indent,c(b)):m&&s&&s(),y}return JSON.stringify(this)}}function Mt(e,t,r){return(t.inFlow??e.flow?Rt:Dt)(e,t,r)}function Dt({comment:e,items:t},r,{blockItemPrefix:n,flowChars:s,itemIndent:i,onChompKeep:o,onComment:a}){var{indent:l,options:{commentString:c}}=r,u=Object.assign({},r,{indent:i,type:null});let f=!1;var p=[];for(let e=0;e<t.length;++e){var h,d=t[e];let s=null,o=(Re(d)?(!f&&d.spaceBefore&&p.push(""),Bt(r,p,d.commentBefore,f),d.comment&&(s=d.comment)):Ce(d)&&(h=Re(d.key)?d.key:null)&&(!f&&h.spaceBefore&&p.push(""),Bt(r,p,h.commentBefore,f)),f=!1,At(d,u,()=>s=null,()=>f=!0));s&&(o+=ht(o,i,c(s))),f&&s&&(f=!1),p.push(n+o)}let m;if(0===p.length)m=s.start+s.end;else{m=p[0];for(let e=1;e<p.length;++e){var y=p[e];m+=y?"\n"+l+y:"\n"}}return e?(m+="\n"+pt(c(e),l),a&&a()):f&&o&&o(),m}function Rt({items:e},t,{flowChars:r,itemIndent:n}){var{indent:s,indentStep:i,flowCollectionPadding:o,options:{commentString:a}}=t,l=(n+=i,Object.assign({},t,{indent:n,inFlow:!0,type:null}));let c=!1,u=0;var f=[];for(let r=0;r<e.length;++r){var p,h,d=e[r];let s=null,i=(Re(d)?(d.spaceBefore&&f.push(""),Bt(t,f,d.commentBefore,!1),d.comment&&(s=d.comment)):Ce(d)&&((p=Re(d.key)?d.key:null)&&(p.spaceBefore&&f.push(""),Bt(t,f,p.commentBefore,!1),p.comment)&&(c=!0),(h=Re(d.value)?d.value:null)?(h.comment&&(s=h.comment),h.commentBefore&&(c=!0)):null==d.value&&p?.comment&&(s=p.comment)),s&&(c=!0),At(d,l,()=>s=null));r<e.length-1&&(i+=","),s&&(i+=ht(i,n,a(s))),!c&&(f.length>u||i.includes("\n"))&&(c=!0),f.push(i),u=f.length}var m,{start:r,end:y}=r;if(0===f.length)return r+y;if(c||(m=f.reduce((e,t)=>e+t.length+2,2),c=0<t.options.lineWidth&&m>t.options.lineWidth),c){let e=r;for(var g of f)e+=g?"\n"+i+s+g:"\n";return e+"\n"+s+y}return""+r+o+f.join(" ")+o+y}function Bt({indent:e,options:{commentString:t}},r,n,s){(n=n&&s?n.replace(/^\n+/,""):n)&&(s=pt(t(n),e),r.push(s.trimStart()))}function Kt(e,t){var r,n=Le(t)?t.value:t;for(r of e)if(Ce(r)){if(r.key===t||r.key===n)return r;if(Le(r.key)&&r.key.value===n)return r}}class Ut extends ut{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(Oe,e),this.items=[]}static from(e,t,r){let{keepUndefined:n,replacer:s}=r,i=new this(e);var o=(e,o)=>{if("function"==typeof s)o=s.call(t,e,o);else if(Array.isArray(s)&&!s.includes(e))return;void 0===o&&!n||i.items.push(Ct(e,o,r))};if(t instanceof Map)for(var[a,l]of t)o(a,l);else if(t&&"object"==typeof t)for(var c of Object.keys(t))o(c,t[c]);return"function"==typeof e.sortMapEntries&&i.items.sort(e.sortMapEntries),i}add(e,t){let r;r=Ce(e)?e:e&&"object"==typeof e&&"key"in e?new Lt(e.key,e.value):new Lt(e,e?.value),e=Kt(this.items,r.key);let n=this.schema?.sortMapEntries;if(e){if(!t)throw new Error(`Key ${r.key} already set`);Le(e.value)&&it(r.value)?e.value.value=r.value:e.value=r.value}else n&&-1!==(t=this.items.findIndex(e=>n(r,e)<0))?this.items.splice(t,0,r):this.items.push(r)}delete(e){return!!(e=Kt(this.items,e))&&0<this.items.splice(this.items.indexOf(e),1).length}get(e,t){return e=Kt(this.items,e)?.value,(!t&&Le(e)?e.value:e)??void 0}has(e){return!!Kt(this.items,e)}set(e,t){this.add(new Lt(e,t),!0)}toJSON(e,t,r){var n,s=r?new r:t?.mapAsMap?new Map:{};for(n of(t?.onCreate&&t.onCreate(s),this.items))Tt(t,s,n);return s}toString(e,t,r){if(!e)return JSON.stringify(this);for(var n of this.items)if(!Ce(n))throw new Error(`Map items must all be pairs; found ${JSON.stringify(n)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Mt(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:t})}}let qt={collection:"map",default:!0,nodeClass:Ut,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(Te(e)||t("Expected a mapping for this tag"),e),createNode:(e,t,r)=>Ut.from(e,t,r)};class Vt extends ut{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Pe,e),this.items=[]}add(e){this.items.push(e)}delete(e){return"number"==typeof(e=Ft(e))&&0<this.items.splice(e,1).length}get(e,t){if("number"==typeof(e=Ft(e)))return e=this.items[e],!t&&Le(e)?e.value:e}has(e){return"number"==typeof(e=Ft(e))&&e<this.items.length}set(e,t){var r=Ft(e);if("number"!=typeof r)throw new Error(`Expected a valid index, not ${e}.`);e=this.items[r],Le(e)&&it(t)?e.value=t:this.items[r]=t}toJSON(e,t){var r,n=[];t?.onCreate&&t.onCreate(n);let s=0;for(r of this.items)n.push(rt(r,String(s++),t));return n}toString(e,t,r){return e?Mt(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:t}):JSON.stringify(this)}static from(e,t,r){var n,s=r.replacer,i=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(var o of t)"function"==typeof s&&(n=t instanceof Set?o:String(e++),o=s.call(t,n,o)),i.items.push(at(o,void 0,r))}return i}}function Ft(e){let t=Le(e)?e.value:e;return"number"==typeof(t=t&&"string"==typeof t?Number(t):t)&&Number.isInteger(t)&&0<=t?t:null}let zt={collection:"seq",default:!0,nodeClass:Vt,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(Me(e)||t("Expected a sequence for this tag"),e),createNode:(e,t,r)=>Vt.from(e,t,r)},Jt={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,r,n)=>Ot(e,t=Object.assign({actualString:!0},t),r,n)},Gt={identify:e=>null==e,createNode:()=>new ot(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ot(null),stringify:({source:e},t)=>"string"==typeof e&&Gt.test.test(e)?e:t.options.nullStr},Ht={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new ot("t"===e[0]||"T"===e[0]),stringify:({source:e,value:t},r)=>e&&Ht.test.test(e)&&t===("t"===e[0]||"T"===e[0])?e:t?r.options.trueStr:r.options.falseStr};function Wt({format:e,minFractionDigits:t,tag:r,value:n}){if("bigint"==typeof n)return String(n);var s="number"==typeof n?n:Number(n);if(!isFinite(s))return isNaN(s)?".nan":s<0?"-.inf":".inf";let i=JSON.stringify(n);if(!e&&t&&(!r||"tag:yaml.org,2002:float"===r)&&/^\d/.test(i)){let e=i.indexOf("."),r=(e<0&&(e=i.length,i+="."),t-(i.length-e-1));for(;0<r--;)i+="0"}return i}var Yt={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Wt},Qt=(k={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){var t=Number(e.value);return isFinite(t)?t.toExponential():Wt(e)}},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){var t=new ot(parseFloat(e)),r=e.indexOf(".");return-1!==r&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-r-1),t},stringify:Wt});let Xt=e=>"bigint"==typeof e||Number.isInteger(e),Zt=(e,t,r,{intAsBigInt:n})=>n?BigInt(e):parseInt(e.substring(t),r);function er(e,t,r){var n=e.value;return Xt(n)&&0<=n?r+n.toString(t):Wt(e)}O={identify:e=>Xt(e)&&0<=e,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,r)=>Zt(e,2,8,r),stringify:e=>er(e,8,"0o")},Ue={identify:Xt,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,r)=>Zt(e,0,10,r),stringify:Wt};var tr={identify:e=>Xt(e)&&0<=e,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,r)=>Zt(e,2,16,r),stringify:e=>er(e,16,"0x")},rr=[qt,zt,Jt,Gt,Ht,O,Ue,tr,Yt,k,Qt];function nr(e){return"bigint"==typeof e||Number.isInteger(e)}var sr=({value:e})=>JSON.stringify(e),ir=(sr=[qt,zt].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:sr},{identify:e=>null==e,createNode:()=>new ot(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:sr},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>"true"===e,stringify:sr},{identify:nr,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:r})=>r?BigInt(e):parseInt(e,10),stringify:({value:e})=>nr(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:sr}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t("Unresolved plain scalar "+JSON.stringify(e)),e)}),{identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"!=typeof atob)return t("This environment does not support reading binary tags; either Buffer or atob is required"),e;var r=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let e=0;e<r.length;++e)n[e]=r.charCodeAt(e);return n},stringify({comment:e,type:t,value:r},n,s,i){if(!r)return"";var o=r;let a;if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<o.length;++t)e+=String.fromCharCode(o[t]);a=btoa(e)}if((t=t??ot.BLOCK_LITERAL)!==ot.QUOTE_DOUBLE){var l=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),c=Math.ceil(a.length/l),u=new Array(c);for(let e=0,t=0;e<c;++e,t+=l)u[e]=a.substr(t,l);a=u.join(t===ot.BLOCK_LITERAL?"\n":" ")}return Ot({comment:e,type:t,value:a},n,s,i)}});function or(e,t){if(Me(e))for(let s=0;s<e.items.length;++s){let i=e.items[s];var r,n;Ce(i)||(Te(i)&&(1<i.items.length&&t("Each pair must have its own sequence indicator"),r=i.items[0]||new Lt(new ot(null)),i.commentBefore&&(r.key.commentBefore=r.key.commentBefore?i.commentBefore+"\n"+r.key.commentBefore:i.commentBefore),i.comment&&((n=r.value??r.key).comment=n.comment?i.comment+"\n"+n.comment:i.comment),i=r),e.items[s]=Ce(i)?i:new Lt(i))}else t("Expected a sequence for this tag");return e}function ar(e,t,r){var n=r.replacer,s=new Vt(e);s.tag="tag:yaml.org,2002:pairs";let i=0;if(t&&Symbol.iterator in Object(t))for(var o of t){let e,l;if("function"==typeof n&&(o=n.call(t,String(i++),o)),Array.isArray(o)){if(2!==o.length)throw new TypeError("Expected [key, value] tuple: "+o);e=o[0],l=o[1]}else if(o&&o instanceof Object){var a=Object.keys(o);if(1!==a.length)throw new TypeError(`Expected tuple with one key, not ${a.length} keys`);e=a[0],l=o[e]}else e=o;s.items.push(Ct(e,l,r))}return s}var lr={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:or,createNode:ar};class cr extends Vt{constructor(){super(),this.add=Ut.prototype.add.bind(this),this.delete=Ut.prototype.delete.bind(this),this.get=Ut.prototype.get.bind(this),this.has=Ut.prototype.has.bind(this),this.set=Ut.prototype.set.bind(this),this.tag=cr.tag}toJSON(e,t){if(!t)return super.toJSON(e);var r,n=new Map;for(r of(t?.onCreate&&t.onCreate(n),this.items)){let e,s;if(Ce(r)?(e=rt(r.key,"",t),s=rt(r.value,e,t)):e=rt(r,"",t),n.has(e))throw new Error("Ordered maps must not include duplicate keys");n.set(e,s)}return n}static from(e,t,r){return e=ar(e,t,r),(t=new this).items=e.items,t}}cr.tag="tag:yaml.org,2002:omap";var ur={collection:"seq",identify:e=>e instanceof Map,nodeClass:cr,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){e=or(e,t);var r,n=[];for({key:r}of e.items)Le(r)&&(n.includes(r.value)?t("Ordered maps must not include duplicate keys: "+r.value):n.push(r.value));return Object.assign(new cr,e)},createNode:(e,t,r)=>cr.from(e,t,r)};function fr({value:e,source:t},r){return t&&(e?pr:hr).test.test(t)?t:e?r.options.trueStr:r.options.falseStr}let pr={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ot(!0),stringify:fr},hr={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new ot(!1),stringify:fr};var dr={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Wt},mr={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){var t=Number(e.value);return isFinite(t)?t.toExponential():Wt(e)}},yr={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){var t=new ot(parseFloat(e.replace(/_/g,""))),r=e.indexOf(".");return-1!==r&&"0"===(e=e.substring(r+1).replace(/_/g,""))[e.length-1]&&(t.minFractionDigits=e.length),t},stringify:Wt};let gr=e=>"bigint"==typeof e||Number.isInteger(e);function vr(e,t,r,{intAsBigInt:n}){var s=e[0];if("-"!==s&&"+"!==s||(t+=1),e=e.substring(t).replace(/_/g,""),n){switch(r){case 2:e="0b"+e;break;case 8:e="0o"+e;break;case 16:e="0x"+e}let t=BigInt(e);return"-"===s?BigInt(-1)*t:t}let i=parseInt(e,r);return"-"===s?-1*i:i}function br(e,t,r){var n=e.value;return gr(n)?(t=n.toString(t),n<0?"-"+r+t.substr(1):r+t):Wt(e)}var wr={identify:gr,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,r)=>vr(e,2,2,r),stringify:e=>br(e,2,"0b")},kr={identify:gr,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,r)=>vr(e,1,8,r),stringify:e=>br(e,8,"0")},_r={identify:gr,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,r)=>vr(e,0,10,r),stringify:Wt},$r={identify:gr,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,r)=>vr(e,2,16,r),stringify:e=>br(e,16,"0x")};class Er extends Ut{constructor(e){super(e),this.tag=Er.tag}add(e){let t;t=Ce(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new Lt(e.key,null):new Lt(e,null),Kt(this.items,t.key)||this.items.push(t)}get(e,t){return e=Kt(this.items,e),!t&&Ce(e)?Le(e.key)?e.key.value:e.key:e}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);var r=Kt(this.items,e);r&&!t?this.items.splice(this.items.indexOf(r),1):!r&&t&&this.items.push(new Lt(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,r);throw new Error("Set items must all have null values")}static from(e,t,r){var n=r.replacer,s=new this(e);if(t&&Symbol.iterator in Object(t))for(var i of t)"function"==typeof n&&(i=n.call(t,i,i)),s.items.push(Ct(i,null,r));return s}}Er.tag="tag:yaml.org,2002:set";var Sr={collection:"map",identify:e=>e instanceof Set,nodeClass:Er,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,r)=>Er.from(e,t,r),resolve(e,t){if(Te(e)){if(e.hasAllNullValues(!0))return Object.assign(new Er,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function Or(e,t){var r=e[0];e="-"===r||"+"===r?e.substring(1):e;let n=e=>(t?BigInt:Number)(e);return e=e.replace(/_/g,"").split(":").reduce((e,t)=>e*n(60)+n(t),n(0)),"-"===r?n(-1)*e:e}function Nr(e){let t=e.value,r=e=>e;if("bigint"==typeof t)r=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return Wt(e);let n="";t<0&&(n="-",t*=r(-1));var s=[t%(e=r(60))];return t<60?s.unshift(0):(t=(t-s[0])/e,s.unshift(t%e),60<=t&&(t=(t-s[0])/e,s.unshift(t))),n+s.map(e=>String(e).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var Ar={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:r})=>Or(e,r),stringify:Nr},Pr={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>Or(e,!1),stringify:Nr};let xr={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){if(!(e=e.match(xr.test)))throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");var[,t,r,n,s,i,o]=e.map(Number),a=e[7]?Number((e[7]+"00").substr(1,3)):0;let l=Date.UTC(t,r-1,n,s||0,i||0,o||0,a);if((t=e[8])&&"Z"!==t){let e=Or(t,!1);Math.abs(e)<30&&(e*=60),l-=6e4*e}return new Date(l)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""};wr=[qt,zt,Jt,Gt,pr,hr,wr,kr,_r,$r,dr,mr,yr,ir,xt,ur,lr,Sr,Ar,Pr,xr];let jr=new Map([["core",rr],["failsafe",[qt,zt,Jt]],["json",sr],["yaml11",wr],["yaml-1.1",wr]]),Ir={binary:ir,bool:Ht,float:Qt,floatExp:k,floatNaN:Yt,floatTime:Pr,int:Ue,intHex:tr,intOct:O,intTime:Ar,map:qt,merge:xt,null:Gt,omap:ur,pairs:lr,seq:zt,set:Sr,timestamp:xr},Tr={"tag:yaml.org,2002:binary":ir,"tag:yaml.org,2002:merge":xt,"tag:yaml.org,2002:omap":ur,"tag:yaml.org,2002:pairs":lr,"tag:yaml.org,2002:set":Sr,"tag:yaml.org,2002:timestamp":xr};function Cr(e,t,r){var n=jr.get(t);if(n&&!e)return r&&!n.includes(xt)?n.concat(xt):n.slice();let s=n;if(!s){if(!Array.isArray(e))throw n=Array.from(jr.keys()).filter(e=>"yaml11"!==e).map(e=>JSON.stringify(e)).join(", "),new Error(`Unknown schema "${t}"; use one of ${n} or define customTags array`);s=[]}if(Array.isArray(e))for(var i of e)s=s.concat(i);else"function"==typeof e&&(s=e(s.slice()));return(s=r?s.concat(xt):s).reduce((e,t)=>{var r="string"==typeof t?Ir[t]:t;if(r)return e.includes(r)||e.push(r),e;throw r=JSON.stringify(t),e=Object.keys(Ir).map(e=>JSON.stringify(e)).join(", "),new Error(`Unknown custom tag ${r}; use one of `+e)},[])}let Lr=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class Mr{constructor({compat:e,customTags:t,merge:r,resolveKnownTags:n,schema:s,sortMapEntries:i,toStringDefaults:o}){this.compat=Array.isArray(e)?Cr(e,"compat"):e?Cr(null,e):null,this.name="string"==typeof s&&s||"core",this.knownTags=n?Tr:{},this.tags=Cr(t,this.name,r),this.toStringOptions=o??null,Object.defineProperty(this,Oe,{value:qt}),Object.defineProperty(this,Ae,{value:Jt}),Object.defineProperty(this,Pe,{value:zt}),this.sortMapEntries="function"==typeof i?i:!0===i?Lr:null}clone(){var e=Object.create(Mr.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}class Dr{constructor(e,t,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,xe,{value:Se});let n=null;"function"==typeof t||Array.isArray(t)?n=t:void 0===r&&t&&(r=t,t=void 0),t=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);let s=(this.options=t).version;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new Qe({version:s}),this.setSchema(s,r),this.contents=void 0===e?null:this.createNode(e,n,r)}clone(){var e=Object.create(Dr.prototype,{[xe]:{value:Se}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Re(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Rr(this.contents)&&this.contents.add(e)}addIn(e,t){Rr(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){var r;return e.anchor||(r=Ze(this),e.anchor=!t||r.has(t)?et(t||"a",r):t),new st(e.anchor)}createNode(e,t,r){let n;"function"==typeof t?(e=t.call({"":e},"",e),n=t):Array.isArray(t)?(0<(s=t.filter(e=>"number"==typeof e||e instanceof String||e instanceof Number).map(String)).length&&(t=t.concat(s)),n=t):void 0===r&&t&&(r=t,t=void 0);var{aliasDuplicateObjects:s,anchorPrefix:t,flow:r,keepUndefined:i,onTagObj:o,tag:a}=r??{},{onAnchor:t,setAnchors:l,sourceObjects:c}=((e,t)=>{let r=[],n=new Map,s=null;return{onAnchor:n=>(r.push(n),s=s??Ze(e),n=et(t,s),s.add(n),n),setAnchors:()=>{for(var e of r){var t,s=n.get(e);if("object"!=typeof s||!s.anchor||!Le(s.node)&&!De(s.node))throw(t=new Error("Failed to resolve repeated object (this should not happen)")).source=e,t;s.node.anchor=s.anchor}},sourceObjects:n}})(this,t||"a");return e=at(e,a,{aliasDuplicateObjects:s??!0,keepUndefined:i??!1,onAnchor:t,onTagObj:o,replacer:n,schema:this.schema,sourceObjects:c}),r&&De(e)&&(e.flow=!0),l(),e}createPair(e,t,r={}){return e=this.createNode(e,null,r),t=this.createNode(t,null,r),new Lt(e,t)}delete(e){return!!Rr(this.contents)&&this.contents.delete(e)}deleteIn(e){return ct(e)?null!=this.contents&&!(this.contents=null):!!Rr(this.contents)&&this.contents.deleteIn(e)}get(e,t){return De(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return ct(e)?!t&&Le(this.contents)?this.contents.value:this.contents:De(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!De(this.contents)&&this.contents.has(e)}hasIn(e){return ct(e)?void 0!==this.contents:!!De(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=lt(this.schema,[e],t):Rr(this.contents)&&this.contents.set(e,t)}setIn(e,t){ct(e)?this.contents=t:null==this.contents?this.contents=lt(this.schema,Array.from(e),t):Rr(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let r;switch(e="number"==typeof e?String(e):e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Qe({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Qe({version:e}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:var n=JSON.stringify(e);throw new Error("Expected '1.1', '1.2' or null as first argument, but found: "+n)}if(t.schema instanceof Object)this.schema=t.schema;else{if(!r)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new Mr(Object.assign(r,t))}}toJS({json:e,jsonArg:t,mapAsMap:r,maxAliasCount:n,onAnchor:s,reviver:i}={}){e={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===r,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100};let o=rt(this.contents,t??"",e);if("function"==typeof s)for(let{count:t,res:r}of e.anchors.values())s(r,t);return"function"==typeof i?tt(i,{"":o},"",o):o}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(0<this.errors.length)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0))throw t=JSON.stringify(e.indent),new Error('"indent" option must be a positive integer, not '+t);{var t=this,r=[];let i=!0===e.directives;!1!==e.directives&&t.directives&&((n=t.directives.toString(t))?(r.push(n),i=!0):t.directives.docStart&&(i=!0)),i&&r.push("---");var n=Nt(t,e);e=n.options.commentString,t.commentBefore&&(1!==r.length&&r.unshift(""),s=e(t.commentBefore),r.unshift(pt(s,"")));let o=!1,a=null;if(t.contents){Re(t.contents)&&(t.contents.spaceBefore&&i&&r.push(""),t.contents.commentBefore&&(s=e(t.contents.commentBefore),r.push(pt(s,""))),n.forceBlockIndent=!!t.comment,a=t.contents.comment);var s=a?void 0:()=>o=!0;let l=At(t.contents,n,()=>a=null,s);a&&(l+=ht(l,"",e(a))),"|"!==l[0]&&">"!==l[0]||"---"!==r[r.length-1]?r.push(l):r[r.length-1]="--- "+l}else r.push(At(t.contents,n));if(t.directives?.docEnd)t.comment?(s=e(t.comment)).includes("\n")?(r.push("..."),r.push(pt(s,""))):r.push("... "+s):r.push("...");else{let n=t.comment;(n=n&&o?n.replace(/^\n+/,""):n)&&(o&&!a||""===r[r.length-1]||r.push(""),r.push(pt(e(n),"")))}return r.join("\n")+"\n"}}}function Rr(e){if(De(e))return 1;throw new Error("Expected a YAML collection as document contents")}class Br extends Error{constructor(e,t,r,n){super(),this.name=e,this.code=r,this.message=n,this.pos=t}}class Kr extends Br{constructor(e,t,r){super("YAMLParseError",e,t,r)}}class Ur extends Br{constructor(e,t,r){super("YAMLWarning",e,t,r)}}let qr=(e,t)=>r=>{if(-1!==r.pos[0]){r.linePos=r.pos.map(e=>t.linePos(e));var{line:n,col:s}=r.linePos[0];r.message+=` at line ${n}, column `+s;let o=s-1,a=e.substring(t.lineStarts[n-1],t.lineStarts[n]).replace(/[\n\r]+$/,"");if(60<=o&&80<a.length&&(i=Math.min(o-39,a.length-79),a="…"+a.substring(i),o-=i-1),80<a.length&&(a=a.substring(0,79)+"…"),1<n&&/^ *$/.test(a.substring(0,o))){let r=e.substring(t.lineStarts[n-2],t.lineStarts[n-1]);80<r.length&&(r=r.substring(0,79)+"…\n"),a=r+a}if(/[^ ]/.test(a)){let e=1;var i=r.linePos[1],n=(i&&i.line===n&&i.col>s&&(e=Math.max(1,Math.min(i.col-s,80-o)))," ".repeat(o)+"^".repeat(e));r.message+=`:\n\n${a}\n${n}\n`}}};function Vr(e,{flow:t,indicator:r,next:n,offset:s,onError:i,parentIndent:o,startOnNewline:a}){let l=!1,c=a,u=a,f="",p="",h=!1,d=!1,m=null,y=null,g=null,v=null,b=null,w=null,k=null;for(var _ of e)switch(d&&("space"!==_.type&&"newline"!==_.type&&"comma"!==_.type&&i(_.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),d=!1),m&&(c&&"comment"!==_.type&&"newline"!==_.type&&i(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),_.type){case"space":t||"doc-start"===r&&"flow-collection"===n?.type||!_.source.includes("\t")||(m=_),u=!0;break;case"comment":u||i(_,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");var $=_.source.substring(1)||" ";f?f+=p+$:f=$,p="",c=!1;break;case"newline":c?f?f+=_.source:w&&"seq-item-ind"===r||(l=!0):p+=_.source,c=!0,h=!0,(y||g)&&(v=_),u=!0;break;case"anchor":y&&i(_,"MULTIPLE_ANCHORS","A node can have at most one anchor"),_.source.endsWith(":")&&i(_.offset+_.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),y=_,k=k??_.offset,c=!1,u=!1,d=!0;break;case"tag":g&&i(_,"MULTIPLE_TAGS","A node can have at most one tag"),g=_,k=k??_.offset,c=!1,u=!1,d=!0;break;case r:(y||g)&&i(_,"BAD_PROP_ORDER",`Anchors and tags must be after the ${_.source} indicator`),w&&i(_,"UNEXPECTED_TOKEN",`Unexpected ${_.source} in `+(t??"collection")),w=_,c="seq-item-ind"===r||"explicit-key-ind"===r,u=!1;break;case"comma":if(t){b&&i(_,"UNEXPECTED_TOKEN","Unexpected , in "+t),b=_,c=!1,u=!1;break}default:i(_,"UNEXPECTED_TOKEN",`Unexpected ${_.type} token`),c=!1,u=!1}return e=(a=e[e.length-1])?a.offset+a.source.length:s,d&&n&&"space"!==n.type&&"newline"!==n.type&&"comma"!==n.type&&("scalar"!==n.type||""!==n.source)&&i(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(c&&m.indent<=o||"block-map"===n?.type||"block-seq"===n?.type)&&i(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:b,found:w,spaceBefore:l,comment:f,hasNewline:h,anchor:y,tag:g,newlineAfterProp:v,end:e,start:k??e}}function Fr(e){if(e)switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return 1;if(e.end)for(var t of e.end)if("newline"===t.type)return 1;return;case"flow-collection":for(var r of e.items){for(var n of r.start)if("newline"===n.type)return 1;if(r.sep)for(var s of r.sep)if("newline"===s.type)return 1;if(Fr(r.key)||Fr(r.value))return 1}return;default:return 1}}function zr(e,t,r){var n;"flow-collection"!==t?.type||(n=t.end[0]).indent!==e||"]"!==n.source&&"}"!==n.source||!Fr(t)||r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}function Jr(e,t,r){if(!1!==(e=e.options.uniqueKeys)){let n="function"==typeof e?e:(e,t)=>e===t||Le(e)&&Le(t)&&e.value===t.value;return t.some(e=>n(e.key,r))}}let Gr="All mapping items must start at the same column";function Hr(e,t,r,n){let s="";if(e){let c=!1,u="";for(var i of e){var{source:o,type:a}=i;switch(a){case"space":c=!0;break;case"comment":r&&!c&&n(i,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");var l=o.substring(1)||" ";s?s+=u+l:s=l,u="";break;case"newline":s&&(u+=o),c=!0;break;default:n(i,"UNEXPECTED_TOKEN",`Unexpected ${a} at node end`)}t+=o.length}}return{comment:s,offset:t}}let Wr="Block collections are not allowed within flow collections",Yr=e=>e&&("block-map"===e.type||"block-seq"===e.type);function Qr(e,t,r,n,s,i){return e=("block-map"===r.type?({composeNode:e,composeEmptyNode:t},r,n,s,i)=>{var o,a=new(i?.nodeClass??Ut)(r.schema);r.atRoot&&(r.atRoot=!1);let l=n.offset,c=null;for(o of n.items){var{start:u,key:f,sep:p,value:h}=o,d=Vr(u,{indicator:"explicit-key-ind",next:f??p?.[0],offset:l,onError:s,parentIndent:n.indent,startOnNewline:!0}),m=!d.found;if(m){if(f&&("block-seq"===f.type?s(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in f&&f.indent!==n.indent&&s(l,"BAD_INDENT",Gr)),!d.anchor&&!d.tag&&!p){c=d.end,d.comment&&(a.comment?a.comment+="\n"+d.comment:a.comment=d.comment);continue}(d.newlineAfterProp||Fr(f))&&s(f??u[u.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else d.found?.indent!==n.indent&&s(l,"BAD_INDENT",Gr);r.atKey=!0;var y=d.end,u=f?e(r,f,d,s):t(r,y,u,null,d,s);l=(r.schema.compat&&zr(n.indent,f,s),r.atKey=!1,Jr(r,a.items,u)&&s(y,"DUPLICATE_KEY","Map keys must be unique"),y=Vr(p??[],{indicator:"map-value-ind",next:h,offset:u.range[2],onError:s,parentIndent:n.indent,startOnNewline:!f||"block-scalar"===f.type})).end,y.found?(m&&("block-map"!==h?.type||y.hasNewline||s(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict)&&d.start<y.found.offset-1024&&s(u.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"),f=h?e(r,h,y,s):t(r,l,p,null,y,s),r.schema.compat&&zr(n.indent,h,s),l=f.range[2],d=new Lt(u,f),r.options.keepSourceTokens&&(d.srcToken=o),a.items.push(d)):(m&&s(u.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),y.comment&&(u.comment?u.comment+="\n"+y.comment:u.comment=y.comment),p=new Lt(u),r.options.keepSourceTokens&&(p.srcToken=o),a.items.push(p))}return c&&c<l&&s(c,"IMPOSSIBLE","Map comment with trailing content"),a.range=[n.offset,l,c??l],a}:"block-seq"===r.type?({composeNode:e,composeEmptyNode:t},r,n,s,i)=>{var o,a,l=new(i?.nodeClass??Vt)(r.schema);r.atRoot&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let c=n.offset,u=null;for({start:o,value:a}of n.items){var f=Vr(o,{indicator:"seq-item-ind",next:a,offset:c,onError:s,parentIndent:n.indent,startOnNewline:!0});if(!f.found){if(!(f.anchor||f.tag||a)){u=f.end,f.comment&&(l.comment=f.comment);continue}a&&"block-seq"===a.type?s(f.end,"BAD_INDENT","All sequence items must start at the same column"):s(c,"MISSING_CHAR","Sequence item without - indicator")}f=a?e(r,a,f,s):t(r,f.end,o,null,f,s),r.schema.compat&&zr(n.indent,a,s),c=f.range[2],l.items.push(f)}return l.range=[n.offset,c,u??c],l}:({composeNode:e,composeEmptyNode:t},r,n,s,i)=>{var o="{"===n.start.source,a=o?"flow map":"flow sequence",l=new(i?.nodeClass??(o?Ut:Vt))(r.schema);l.flow=!0,(i=r.atRoot)&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let c=n.offset+n.start.source.length;for(let i=0;i<n.items.length;++i){var u=n.items[i],{start:f,key:p,sep:h,value:d}=u,m=Vr(f,{flow:a,indicator:"explicit-key-ind",next:p??h?.[0],offset:c,onError:s,parentIndent:n.indent,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||h||d)){0===i&&m.comma?s(m.comma,"UNEXPECTED_TOKEN","Unexpected , in "+a):i<n.items.length-1&&s(m.start,"UNEXPECTED_TOKEN","Unexpected empty item in "+a),m.comment&&(l.comment?l.comment+="\n"+m.comment:l.comment=m.comment),c=m.end;continue}!o&&r.options.strict&&Fr(p)&&s(p,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===i)m.comma&&s(m.comma,"UNEXPECTED_TOKEN","Unexpected , in "+a);else if(m.comma||s(m.start,"MISSING_CHAR",`Missing , between ${a} items`),m.comment){let e="";e:for(var y of f)switch(y.type){case"comma":case"space":break;case"comment":e=y.source.substring(1);break e;default:break e}if(e){let t=l.items[l.items.length-1];(t=Ce(t)?t.value??t.key:t).comment?t.comment+="\n"+e:t.comment=e,m.comment=m.comment.substring(e.length+1)}}if(o||h||m.found){r.atKey=!0;var g=m.end,v=p?e(r,p,m,s):t(r,g,f,null,m,s),b=(Yr(p)&&s(v.range,"BLOCK_IN_FLOW",Wr),r.atKey=!1,Vr(h??[],{flow:a,indicator:"map-value-ind",next:d,offset:v.range[2],onError:s,parentIndent:n.indent,startOnNewline:!1}));if(b.found){if(!o&&!m.found&&r.options.strict){if(h)for(var w of h){if(w===b.found)break;if("newline"===w.type){s(w,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<b.found.offset-1024&&s(b.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else d&&("source"in d&&d.source&&":"===d.source[0]?s(d,"MISSING_CHAR","Missing space after : in "+a):s(b.start,"MISSING_CHAR",`Missing , or : between ${a} items`));var p,k=((p=d?e(r,d,b,s):b.found?t(r,b.end,h,null,b,s):null)?Yr(d)&&s(p.range,"BLOCK_IN_FLOW",Wr):b.comment&&(v.comment?v.comment+="\n"+b.comment:v.comment=b.comment),new Lt(v,p));r.options.keepSourceTokens&&(k.srcToken=u),o?(Jr(r,(u=l).items,v)&&s(g,"DUPLICATE_KEY","Map keys must be unique"),u.items.push(k)):((g=new Ut(r.schema)).flow=!0,g.items.push(k),u=(p??v).range,g.range=[v.range[0],u[1],u[2]],l.items.push(g)),c=p?p.range[2]:b.end}else k=d?e(r,d,m,s):t(r,m.end,h,null,m,s),l.items.push(k),c=k.range[2],Yr(d)&&s(k.range,"BLOCK_IN_FLOW",Wr)}var _,$=o?"}":"]",[E,...S]=n.end;let O=c;return E&&E.source===$?O=E.offset+E.source.length:(_=a[0].toUpperCase()+a.substring(1),s(c,i?"MISSING_CHAR":"BAD_INDENT",i?_+" must end with a "+$:_+" in block collection must be sufficiently indented and end with a "+$),E&&1!==E.source.length&&S.unshift(E)),0<S.length?((i=Hr(S,O,r.options.strict,s)).comment&&(l.comment?l.comment+="\n"+i.comment:l.comment=i.comment),l.range=[n.offset,O,i.offset]):l.range=[n.offset,O,O],l})(e,t,r,n,i),t=e.constructor,"!"===s||s===t.tagName?e.tag=t.tagName:s&&(e.tag=s),e}function Xr(e,t,r){var n=t.offset,s=(({offset:e,props:t},r,n)=>{if("block-scalar-header"!==t[0].type)return n(t[0],"IMPOSSIBLE","Block scalar header not found"),null;let s=t[0].source,i=s[0],o=0,a="",l=-1;for(let t=1;t<s.length;++t){var c,u=s[t];a||"-"!==u&&"+"!==u?(c=Number(u),!o&&c?o=c:-1===l&&(l=e+t)):a=u}-1!==l&&n(l,"UNEXPECTED_TOKEN","Block scalar header includes extra characters: "+s);let f=!1,p="",h=s.length;for(let e=1;e<t.length;++e){var d=t[e];switch(d.type){case"space":f=!0;case"newline":h+=d.source.length;break;case"comment":r&&!f&&n(d,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),h+=d.source.length,p=d.source.substring(1);break;case"error":n(d,"UNEXPECTED_TOKEN",d.message),h+=d.source.length;break;default:var m;n(d,"UNEXPECTED_TOKEN","Unexpected token in block scalar header: "+d.type),(m=d.source)&&"string"==typeof m&&(h+=m.length)}}return{mode:i,indent:o,chomp:a,comment:p,length:h}})(t,e.options.strict,r);if(!s)return{value:"",type:null,comment:"",range:[n,n,n]};var i=">"===s.mode?ot.BLOCK_FOLDED:ot.BLOCK_LITERAL,o=t.source?(e=>{var t=e.split(/\n( *)/),r=(e=t[0]).match(/^( *)/),n=[r=r?.[1]?[r[1],e.slice(r[1].length)]:["",e]];for(let e=1;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n})(t.source):[];let a=o.length;for(let e=o.length-1;0<=e;--e){var l=o[e][1];if(""!==l&&"\r"!==l)break;a=e}if(0===a){let e="+"===s.chomp&&0<o.length?"\n".repeat(Math.max(1,o.length-1)):"",r=n+s.length;return t.source&&(r+=t.source.length),{value:e,type:i,comment:s.comment,range:[n,r,r]}}let c=t.indent+s.indent,u=t.offset+s.length,f=0;for(let t=0;t<a;++t){var[p,h]=o[t];if(""!==h&&"\r"!==h){p.length<c&&r(u+p.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),0===s.indent&&(c=p.length),f=t,0!==c||e.atRoot||r(u,"BAD_INDENT","Block scalar values in collections must be indented");break}0===s.indent&&p.length>c&&(c=p.length),u+=p.length+h.length+1}for(let e=o.length-1;e>=a;--e)o[e][0].length>c&&(a=e+1);let d="",m="",y=!1;for(let e=0;e<f;++e)d+=o[e][0].slice(c)+"\n";for(let e=f;e<a;++e){let[t,n]=o[e];u+=t.length+n.length+1;var g,v="\r"===n[n.length-1];(n=v?n.slice(0,-1):n)&&t.length<c&&(g=s.indent?"explicit indentation indicator":"first line",r(u-n.length-(v?2:1),"BAD_INDENT","Block scalar lines must not be less indented than their "+g),t=""),i===ot.BLOCK_LITERAL?(d+=m+t.slice(c)+n,m="\n"):t.length>c||"\t"===n[0]?(" "===m?m="\n":y||"\n"!==m||(m="\n\n"),d+=m+t.slice(c)+n,m="\n",y=!0):""===n?"\n"===m?d+="\n":m="\n":(d+=m+n,m=" ",y=!1)}switch(s.chomp){case"-":break;case"+":for(let e=a;e<o.length;++e)d+="\n"+o[e][0].slice(c);"\n"!==d[d.length-1]&&(d+="\n");break;default:d+="\n"}return t=n+s.length+t.source.length,{value:d,type:i,comment:s.comment,range:[n,t,t]}}function Zr(e,t,r){let n,s,{offset:i,type:o,source:a,end:l}=e;var c=(e,t,n)=>r(i+e,t,n);switch(o){case"scalar":n=ot.PLAIN,s=((e,t)=>{let r="";switch(e[0]){case"\t":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":r="block scalar indicator "+e[0];break;case"@":case"`":r="reserved character "+e[0]}return r&&t(0,"BAD_SCALAR_START","Plain value cannot start with "+r),en(e)})(a,c);break;case"single-quoted-scalar":n=ot.QUOTE_SINGLE,s=((e,t)=>("'"===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR","Missing closing 'quote"),en(e.slice(1,-1)).replace(/''/g,"'")))(a,c);break;case"double-quoted-scalar":n=ot.QUOTE_DOUBLE,s=((e,t)=>{let r="";for(let a=1;a<e.length-1;++a){var n=e[a];if("\r"!==n||"\n"!==e[a+1])if("\n"===n){var{fold:s,offset:i}=((e,t)=>{let r="",n=e[t+1];for(;!(" "!==n&&"\t"!==n&&"\n"!==n&&"\r"!==n||"\r"===n&&"\n"!==e[t+2]);)"\n"===n&&(r+="\n"),n=e[(t+=1)+1];return{fold:r=r||" ",offset:t}})(e,a);r+=s,a=i}else if("\\"===n){let n=e[++a];if(s=tn[n])r+=s;else if("\n"===n)for(n=e[a+1];" "===n||"\t"===n;)n=e[1+ ++a];else if("\r"===n&&"\n"===e[a+1])for(n=e[1+ ++a];" "===n||"\t"===n;)n=e[1+ ++a];else"x"===n||"u"===n||"U"===n?(r+=((e,t,r,n)=>{var s=e.substr(t,r),i=(i=s.length===r&&/^[0-9a-fA-F]+$/.test(s))?parseInt(s,16):NaN;return isNaN(i)?(n(t-2,"BAD_DQ_ESCAPE","Invalid escape sequence "+(s=e.substr(t-2,r+2))),s):String.fromCodePoint(i)})(e,a+1,i={x:2,u:4,U:8}[n],t),a+=i):(t(a-1,"BAD_DQ_ESCAPE","Invalid escape sequence "+(o=e.substr(a-1,2))),r+=o)}else if(" "===n||"\t"===n){var o=a;let t=e[a+1];for(;" "===t||"\t"===t;)t=e[1+ ++a];"\n"===t||"\r"===t&&"\n"===e[a+2]||(r+=a>o?e.slice(o,a+1):n)}else r+=n}return'"'===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR",'Missing closing "quote'),r})(a,c);break;default:return r(e,"UNEXPECTED_TOKEN","Expected a flow scalar value, but found: "+o),{value:"",type:null,comment:"",range:[i,i+a.length,i+a.length]}}var u=i+a.length;return{value:s,type:n,comment:(t=Hr(l,u,t,r)).comment,range:[i,u,t.offset]}}function en(e){let t,r;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),r=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=t.exec(e);if(!n)return e;let s=n[1],i=" ",o=t.lastIndex;for(r.lastIndex=o;n=r.exec(e);)""===n[1]?"\n"===i?s+=i:i="\n":(s+=i+n[1],i=" "),o=r.lastIndex;var a=/[ \t]*(.*)/sy;return a.lastIndex=o,n=a.exec(e),s+i+(n?.[1]??"")}let tn={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function rn(e,t,r,n){var{value:s,type:i,comment:o,range:a}="block-scalar"===t.type?Xr(e,t,n):Zr(t,e.options.strict,n),l=r?e.directives.tagName(r.source,e=>n(r,"TAG_RESOLVE_FAILED",e)):null;let c,u;c=e.options.stringKeys&&e.atKey?e.schema[Ae]:l?((e,t,r,n,s)=>{if("!"!==r){var i,o,a=[];for(i of e.tags)if(!i.collection&&i.tag===r){if(!i.default||!i.test)return i;a.push(i)}for(o of a)if(o.test?.test(t))return o;var l=e.knownTags[r];if(l&&!l.collection)return e.tags.push(Object.assign({},l,{default:!1,test:void 0})),l;s(n,"TAG_RESOLVE_FAILED","Unresolved tag: "+r,"tag:yaml.org,2002:str"!==r)}return e[Ae]})(e.schema,s,l,r,n):"scalar"===t.type?(({atKey:e,directives:t,schema:r},n,s,i)=>{var o=r.tags.find(t=>(!0===t.default||e&&"key"===t.default)&&t.test?.test(n))||r[Ae];return r.compat&&(r=r.compat.find(e=>e.default&&e.test?.test(n))??r[Ae],o.tag!==r.tag)&&i(s,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${t.tagString(o.tag)} or `+(t=t.tagString(r.tag)),!0),o})(e,s,t,n):e.schema[Ae];try{var f=c.resolve(s,e=>n(r??t,"TAG_RESOLVE_FAILED",e),e.options);u=Le(f)?f:new ot(f)}catch(i){e=i instanceof Error?i.message:String(i),n(r??t,"TAG_RESOLVE_FAILED",e),u=new ot(s)}return u.range=a,u.source=s,i&&(u.type=i),l&&(u.tag=l),c.format&&(u.format=c.format),o&&(u.comment=o),u}let nn={composeNode:sn,composeEmptyNode:on};function sn(e,t,r,n){var s=e.atKey,{spaceBefore:i,comment:o,anchor:a,tag:l}=r;let c,u=!0;switch(t.type){case"alias":c=(({options:e},{offset:t,source:r,end:n},s)=>{var i=new st(r.substring(1));return""===i.source&&s(t,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&s(t+r.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0),n=Hr(n,r=t+r.length,e.strict,s),i.range=[t,r,n.offset],n.comment&&(i.comment=n.comment),i})(e,t,n),(a||l)&&n(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=rn(e,t,l,n),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=((e,t,r,n,s)=>{let i=n.tag,o=i?t.directives.tagName(i.source,e=>s(i,"TAG_RESOLVE_FAILED",e)):null,a=("block-seq"===r.type&&(({anchor:n,newlineAfterProp:c}=n),n=n&&i?n.offset>i.offset?n:i:n??i)&&(!c||c.offset<n.offset)&&s(n,"MISSING_CHAR","Missing newline after block sequence props"),"block-map"===r.type||"block-seq"!==r.type&&"{"===r.start.source?"map":"seq");if(!i||!o||"!"===o||o===Ut.tagName&&"map"==a||o===Vt.tagName&&"seq"==a)return Qr(e,t,r,s,o);let l=t.schema.tags.find(e=>e.tag===o&&e.collection===a);if(!l){var c=t.schema.knownTags[o];if(!c||c.collection!==a)return c?s(i,"BAD_COLLECTION_TYPE",`${c.tag} used for ${a} collection, but expects `+(c.collection??"scalar"),!0):s(i,"TAG_RESOLVE_FAILED","Unresolved tag: "+o,!0),Qr(e,t,r,s,o);t.schema.tags.push(Object.assign({},c,{default:!1})),l=c}return n=Qr(e,t,r,s,o,l),c=l.resolve?.(n,e=>s(i,"TAG_RESOLVE_FAILED",e),t.options)??n,(e=Re(c)?c:new ot(c)).range=n.range,e.tag=o,l?.format&&(e.format=l.format),e})(nn,e,t,r,n),a&&(c.anchor=a.source.substring(1));break;default:n(t,"UNEXPECTED_TOKEN","error"===t.type?t.message:`Unsupported token (type: ${t.type})`),c=on(e,t.offset,void 0,null,r,n),u=!1}return a&&""===c.anchor&&n(a,"BAD_ALIAS","Anchor cannot be an empty string"),s&&e.options.stringKeys&&(!Le(c)||"string"!=typeof c.value||c.tag&&"tag:yaml.org,2002:str"!==c.tag)&&n(l??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(c.spaceBefore=!0),o&&("scalar"===t.type&&""===t.source?c.comment=o:c.commentBefore=o),e.options.keepSourceTokens&&u&&(c.srcToken=t),c}function on(e,t,r,n,{spaceBefore:s,comment:i,anchor:o,tag:a,end:l},c){return e=rn(e,{type:"scalar",offset:((e,t,r)=>{if(t)for(let n=(r=r??t.length)-1;0<=n;--n){let r=t[n];switch(r.type){case"space":case"comment":case"newline":e-=r.source.length;continue}for(r=t[++n];"space"===r?.type;)e+=r.source.length,r=t[++n];break}return e})(t,r,n),indent:-1,source:""},a,c),o&&(e.anchor=o.source.substring(1),""===e.anchor)&&c(o,"BAD_ALIAS","Anchor cannot be an empty string"),s&&(e.spaceBefore=!0),i&&(e.comment=i,e.range[2]=l),e}function an(e){var t;return"number"==typeof e?[e,e+1]:Array.isArray(e)?2===e.length?e:[e[0],e[1]]:(({offset:e,source:t}=e),[e,e+("string"==typeof t?t.length:1)])}function ln(e){let t="",r=!1,n=!1;for(let i=0;i<e.length;++i){var s=e[i];switch(s[0]){case"#":t+=(""===t?"":n?"\n\n":"\n")+(s.substring(1)||" "),r=!0,n=!1;break;case"%":"#"!==e[i+1]?.[0]&&(i+=1),r=!1;break;default:r||(n=!0),r=!1}}return{comment:t,afterEmptyLine:n}}class cn{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,r,n)=>{e=an(e),n?this.warnings.push(new Ur(e,t,r)):this.errors.push(new Kr(e,t,r))},this.directives=new Qe({version:e.version||"1.2"}),this.options=e}decorate(e,t){var{comment:r,afterEmptyLine:n}=ln(this.prelude);if(r){var s=e.contents;if(t)e.comment=e.comment?e.comment+"\n"+r:r;else if(n||e.directives.docStart||!s)e.commentBefore=r;else if(De(s)&&!s.flow&&0<s.items.length){let e=s.items[0];n=(e=Ce(e)?e.key:e).commentBefore,e.commentBefore=n?r+"\n"+n:r}else n=s.commentBefore,s.commentBefore=n?r+"\n"+n:r}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:ln(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,r=-1){for(var n of e)yield*this.next(n);yield*this.end(t,r)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(t,r,n)=>{var s=an(e);s[0]+=t,this.onError(s,"BAD_DIRECTIVE",r,n)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":[t,r,{offset:n,start:s,value:i,end:o},a]=[this.options,this.directives,e,this.onError],r=Object.assign({_directives:r},t),r={atKey:!1,atRoot:!0,directives:(t=new Dr(void 0,r)).directives,options:t.options,schema:t.schema},(l=Vr(s,{indicator:"doc-start",next:i??o?.[0],offset:n,onError:a,parentIndent:0,startOnNewline:!0})).found&&(t.directives.docStart=!0,!i||"block-map"!==i.type&&"block-seq"!==i.type||l.hasNewline||a(l.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),t.contents=i?sn(r,i,l,a):on(r,l.end,s,null,l,a),(r=Hr(o,i=t.contents.range[2],!1,a)).comment&&(t.comment=r.comment),t.range=[n,i,r.offset],s=t,this.atDirectives&&!s.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(s,!1),this.doc&&(yield this.doc),this.doc=s,this.atDirectives=!1;break;case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":l=e.source?e.message+": "+JSON.stringify(e.source):e.message,o=new Kr(an(e),"UNEXPECTED_TOKEN",l),(this.atDirectives||!this.doc?this:this.doc).errors.push(o);break;case"doc-end":this.doc?(this.doc.directives.docEnd=!0,a=Hr(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError),this.decorate(this.doc,!0),a.comment&&(n=this.doc.comment,this.doc.comment=n?n+"\n"+a.comment:a.comment),this.doc.range[2]=a.offset):this.errors.push(new Kr(an(e),"UNEXPECTED_TOKEN","Unexpected doc-end without preceding document"));break;default:this.errors.push(new Kr(an(e),"UNEXPECTED_TOKEN","Unsupported token "+e.type))}var t,r,n,s,i,o,a,l}*end(e=!1,t=-1){this.doc?(this.decorate(this.doc,!0),yield this.doc,this.doc=null):e&&(e=Object.assign({_directives:this.directives},this.options),e=new Dr(void 0,e),this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),e.range=[0,t,t],this.decorate(e,!1),yield e)}}function un(e,t){if(t)for(var r of t)switch(r.type){case"space":case"comment":e.push(r);break;case"newline":return e.push(r),1}}function fn(e,t,r){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=r,e.source=t;break;case"block-scalar":{var n,s=e.props.slice(1);let i=t.length;for(n of("block-scalar-header"===e.props[0].type&&(i-=e.props[0].source.length),s))n.offset+=i;delete e.props,Object.assign(e,{type:r,source:t,end:s});break}case"block-map":case"block-seq":s={type:"newline",offset:e.offset+t.length,indent:e.indent,source:"\n"},delete e.items,Object.assign(e,{type:r,source:t,end:[s]});break;default:s="indent"in e?e.indent:-1;var i,o="end"in e&&Array.isArray(e.end)?e.end.filter(e=>"space"===e.type||"comment"===e.type||"newline"===e.type):[];for(i of Object.keys(e))"type"!==i&&"offset"!==i&&delete e[i];Object.assign(e,{type:r,indent:s,source:t,end:o})}}function pn(e){switch(e.type){case"block-scalar":{let r="";for(var t of e.props)r+=pn(t);return r+e.source}case"block-map":case"block-seq":{let t="";for(var r of e.items)t+=hn(r);return t}case"flow-collection":{let t=e.start.source;for(var n of e.items)t+=hn(n);for(var s of e.end)t+=s.source;return t}case"document":{let t=hn(e);if(e.end)for(var i of e.end)t+=i.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(var o of e.end)t+=o.source;return t}}}function hn({start:e,key:t,sep:r,value:n}){let s="";for(var i of e)s+=i.source;if(t&&(s+=pn(t)),r)for(var o of r)s+=o.source;return n&&(s+=pn(n)),s}let dn=Symbol("break visit");kr=Symbol("skip children");let mn=Symbol("remove item");function yn(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),function e(t,r,n){let s=n(r,t);if("symbol"==typeof s)return s;for(var i of["key","value"]){let o=r[i];if(o&&"items"in o){for(let r=0;r<o.items.length;++r){let s=e(Object.freeze(t.concat([[i,r]])),o.items[r],n);if("number"==typeof s)r=s-1;else{if(s===dn)return dn;s===mn&&(o.items.splice(r,1),--r)}}"function"==typeof s&&"key"===i&&(s=s(r,t))}}return"function"==typeof s?s(r,t):s}(Object.freeze([]),e,t)}yn.BREAK=dn,yn.SKIP=kr,yn.REMOVE=mn,yn.itemAtPath=(e,t)=>{let r=e;for(var[n,s]of t){if(n=r?.[n],!n||!("items"in n))return;r=n.items[s]}return r},yn.parentCollection=(e,t)=>{if(e=yn.itemAtPath(e,t.slice(0,-1)),t=t[t.length-1][0],e=e?.[t],e&&"items"in e)return e;throw new Error("Parent collection not found")};let gn="\ufeff";function vn(e){switch(e){case gn:return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case"":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function bn(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}_r=Object.freeze({__proto__:null,BOM:gn,DOCUMENT:"",FLOW_END:"",SCALAR:"",createScalarToken:function(e,t){var{implicitKey:r=!1,indent:n,inFlow:s=!1,offset:i=-1,type:o="PLAIN"}=t,a=Ot({type:o,value:e},{implicitKey:r,indent:0<n?" ".repeat(n):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}}),l=t.end??[{type:"newline",offset:-1,indent:n,source:"\n"}];switch(a[0]){case"|":case">":var c=a.indexOf("\n"),u=a.substring(0,c);return c=a.substring(c+1)+"\n",un(u=[{type:"block-scalar-header",offset:i,indent:n,source:u}],l)||u.push({type:"newline",offset:-1,indent:n,source:"\n"}),{type:"block-scalar",offset:i,indent:n,props:u,source:c};case'"':return{type:"double-quoted-scalar",offset:i,indent:n,source:a,end:l};case"'":return{type:"single-quoted-scalar",offset:i,indent:n,source:a,end:l};default:return{type:"scalar",offset:i,indent:n,source:a,end:l}}},isCollection:e=>!!e&&"items"in e,isScalar:e=>!!e&&("scalar"===e.type||"single-quoted-scalar"===e.type||"double-quoted-scalar"===e.type||"block-scalar"===e.type),prettyToken:function(e){switch(e){case gn:return"<BOM>";case"":return"<DOC>";case"":return"<FLOW_END>";case"":return"<SCALAR>";default:return JSON.stringify(e)}},resolveAsScalar:function(e,t=!0,r){if(e){var n=(e,t,n)=>{if(e="number"==typeof e?e:Array.isArray(e)?e[0]:e.offset,!r)throw new Kr([e,e+1],t,n);r(e,t,n)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Zr(e,t,n);case"block-scalar":return Xr({options:{strict:t}},e,n)}}return null},setScalarValue:function(e,t,r={}){let{afterKey:n=!1,implicitKey:s=!1,inFlow:i=!1,type:o}=r,a="indent"in e?e.indent:null;if(n&&"number"==typeof a&&(a+=2),!o)switch(e.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":var l=e.props[0];if("block-scalar-header"!==l.type)throw new Error("Invalid block scalar header");o=">"===l.source[0]?"BLOCK_FOLDED":"BLOCK_LITERAL";break;default:o="PLAIN"}var c=Ot({type:o,value:t},{implicitKey:s||null===a,indent:null!==a&&0<a?" ".repeat(a):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":var u=e,f=(h=c).indexOf("\n"),p=h.substring(0,f),h=h.substring(f+1)+"\n";if("block-scalar"===u.type){if("block-scalar-header"!==(f=u.props[0]).type)throw new Error("Invalid block scalar header");f.source=p,u.source=h}else{f=u.offset;var d,m="indent"in u?u.indent:-1;for(d of(un(f=[{type:"block-scalar-header",offset:f,indent:m,source:p}],"end"in u?u.end:void 0)||f.push({type:"newline",offset:-1,indent:m,source:"\n"}),Object.keys(u)))"type"!==d&&"offset"!==d&&delete u[d];Object.assign(u,{type:"block-scalar",indent:m,props:f,source:h})}break;case'"':fn(e,c,"double-quoted-scalar");break;case"'":fn(e,c,"single-quoted-scalar");break;default:fn(e,c,"scalar")}},stringify:e=>("type"in e?pn:hn)(e),tokenType:vn,visit:yn});let wn=new Set("0123456789ABCDEFabcdef"),kn=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),_n=new Set(",[]{}"),$n=new Set(" ,[]{}\n\r\t"),En=e=>!e||$n.has(e);class Sn{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){if(e){if("string"!=typeof e)throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!t;let r=this.next??"stream";for(;r&&(t||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(0<this.indentNext){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){var r=this.buffer[n+e+1];if("\n"===r||!r&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}return"-"!==t&&"."!==t||"---"!==(r=this.buffer.substr(e,3))&&"..."!==r||!bn(this.buffer[e+3])?e:-1}getLine(){let e=this.lineEndPos;return("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&--e,this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if(e[0]===gn&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let s=e.length,i=e.indexOf("#");for(;-1!==i;){var t=e[i-1];if(" "===t||"\t"===t){s=i-1;break}i=e.indexOf("#",i+1)}for(;;){var r=e[s-1];if(" "!==r&&"\t"!==r)break;--s}var n=(yield*this.pushCount(s))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-n),this.pushNewline(),"stream"}return this.atLineEnd()?(n=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"):(yield"",yield*this.parseLineStart())}*parseLineStart(){var e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");if(("---"===(e=this.peek(3))||"..."===e)&&bn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"---"===e?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!bn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){var[e,t]=this.peek(2);return t||this.atEnd?"-"!==e&&"?"!==e&&":"!==e||!bn(t)?"doc":(e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0)),this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()):this.setNext("block-start")}*parseDocument(){yield*this.pushSpaces(!0);var e=this.getLine();if(null===e)return this.setNext("doc");var t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(En),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t=(t+=(yield*this.parseBlockScalarHeader()))+(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,r=-1;for(;0<(e=yield*this.pushNewline())?(t=yield*this.pushSpaces(!1),this.indentValue=r=t):t=0,0<e+(t+=(yield*this.pushSpaces(!0))););var n=this.getLine();if(null===n)return this.setNext("flow");if((-1!==r&&r<this.indentNext&&"#"!==n[0]||0===r&&(n.startsWith("---")||n.startsWith("..."))&&bn(n[3]))&&(r!==this.indentNext-1||1!==this.flowLevel||"]"!==n[0]&&"}"!==n[0]))return this.flowLevel=0,yield"",yield*this.parseLineStart();let s=0;for(;","===n[s];)s=(s+=(yield*this.pushCount(1)))+(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(n[s+=(yield*this.pushIndicators())]){case void 0:return"flow";case"#":return yield*this.pushCount(n.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,--this.flowLevel,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(En),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":var i=this.charAt(1);if(this.flowKey||bn(i)||","===i)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow";default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){var e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}var r=this.buffer.substring(0,t);let n=r.indexOf("\n",this.pos);if(-1!==n){for(;-1!==n;){var s=this.continueScalar(n+1);if(-1===s)break;n=r.indexOf("\n",s)}-1!==n&&(t=n-("\r"===r[n-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){var t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if("0"<t&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil(e=>bn(e)||"#"===e)}*parseBlockScalar(){let e,t=this.pos-1,r=0;e:for(let s=this.pos;e=this.buffer[s];++s)switch(e){case" ":r+=1;break;case"\n":t=s,r=0;break;case"\r":var n=this.buffer[s+1];if(!n&&!this.atEnd)return this.setNext("block-scalar");if("\n"===n)break;default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=r:this.indentNext=this.blockScalarIndent+(0===this.indentNext?1:this.indentNext);do{var s=this.continueScalar(t+1);if(-1===s)break;t=this.buffer.indexOf("\n",s)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let i=t+1;for(e=this.buffer[i];" "===e;)e=this.buffer[++i];if("\t"===e){for(;"\t"===e||" "===e||"\r"===e||"\n"===e;)e=this.buffer[++i];t=i-1}else if(!this.blockScalarKeep)for(;;){let e=t-1,n=this.buffer[e];"\r"===n&&(n=this.buffer[--e]);for(var o=e;" "===n;)n=this.buffer[--e];if(!("\n"===n&&e>=this.pos&&e+1+r>o))break;t=e}return yield"",yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){var e=0<this.flowLevel;let t,r=this.pos-1,n=this.pos-1;for(;t=this.buffer[++n];)if(":"===t){var s=this.buffer[n+1];if(bn(s)||e&&_n.has(s))break;r=n}else if(bn(t)){let i=this.buffer[n+1];if("\r"===t&&("\n"===i?(n+=1,t="\n",i=this.buffer[n+1]):r=n),"#"===i||e&&_n.has(i))break;if("\n"===t){if(-1===(s=this.continueScalar(n+1)))break;n=Math.max(n,s-2)}}else{if(e&&_n.has(t))break;r=n}return t||this.atEnd?(yield"",yield*this.pushToIndex(r+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return 0<e?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){return(e=this.buffer.slice(this.pos,e))?(yield e,this.pos+=e.length,e.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(En))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":var e=0<this.flowLevel,t=this.charAt(1);if(bn(t)||e&&_n.has(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!bn(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(kn.has(t))t=this.buffer[++e];else{if("%"!==t||!wn.has(this.buffer[e+1])||!wn.has(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){var e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t=this.pos-1;for(var r;" "===(r=this.buffer[++t])||e&&"\t"===r;);var n=t-this.pos;return 0<n&&(yield this.buffer.substr(this.pos,n),this.pos=t),n}*pushUntil(e){let t=this.pos,r=this.buffer[t];for(;!e(r);)r=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class On{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,r=this.lineStarts.length;for(;t<r;){var n=t+r>>1;this.lineStarts[n]<e?t=1+n:r=n}return this.lineStarts[t]===e?{line:t+1,col:1}:0===t?{line:0,col:e}:{line:t,col:e-this.lineStarts[t-1]+1}}}}function Nn(e,t){for(let r=0;r<e.length;++r)if(e[r].type===t)return 1}function An(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function Pn(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return 1;default:return}}function xn(e){switch(e.type){case"document":return e.start;case"block-map":var t=e.items[e.items.length-1];return t.sep??t.start;case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function jn(e){if(0===e.length)return[];let t=e.length;e:for(;0<=--t;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===e[++t]?.type;);return e.splice(t,e.length)}function In(e){if("flow-seq-start"===e.start.type)for(var t of e.items)!t.sep||t.value||Nn(t.start,"explicit-key-ind")||Nn(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,Pn(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Tn{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Sn,this.onNewLine=e}*parse(e,t=!1){for(var r of(this.onNewLine&&0===this.offset&&this.onNewLine(0),this.lexer.lex(e,t)))yield*this.next(r);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)this.atScalar=!1,yield*this.step(),this.offset+=e.length;else{var t=vn(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else yield*this.pop({type:"error",offset:this.offset,message:"Not a YAML token: "+e,source:e}),this.offset+=e.length}}*end(){for(;0<this.stack.length;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){var e=this.peek(1);if("doc-end"!==this.type||e&&"doc-end"===e.type){if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}else{for(;0<this.stack.length;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){let t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{var r=this.peek(1);switch("block-scalar"===t.type?t.indent="indent"in r?r.indent:0:"flow-collection"===t.type&&"document"===r.type&&(t.indent=0),"flow-collection"===t.type&&In(t),r.type){case"document":r.value=t;break;case"block-scalar":r.props.push(t);break;case"block-map":var n=r.items[r.items.length-1];if(n.value)return r.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!n.explicitKey);n.value=t;break;case"block-seq":(n=r.items[r.items.length-1]).value?r.items.push({start:[],value:t}):n.value=t;break;case"flow-collection":return void(!(n=r.items[r.items.length-1])||n.value?r.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}));default:yield*this.pop(),yield*this.pop(t)}"document"!==r.type&&"block-map"!==r.type&&"block-seq"!==r.type||"block-map"!==t.type&&"block-seq"!==t.type||(e=t.items[t.items.length-1])&&!e.sep&&!e.value&&0<e.start.length&&-1===An(e.start)&&(0===t.indent||e.start.every(e=>"comment"!==e.type||e.indent<t.indent))&&("document"===r.type?r.end=e.start:r.items.push({start:e.start}),t.items.splice(-1,1))}else yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":var e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":return void(-1!==An(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}var t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){var t=jn(xn(this.peek(2)));let r;e.end?((r=e.end).push(this.sourceToken),delete e.end):r=[this.sourceToken],t={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:r}]},this.onKeyLine=!0,this.stack[this.stack.length-1]=t}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var t=e.items[e.items.length-1];switch(this.type){case"newline":return this.onKeyLine=!1,void(t.value?(r="end"in t.value?t.value.end:void 0,"comment"===(Array.isArray(r)?r[r.length-1]:void 0)?.type?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})):(t.sep||t.start).push(this.sourceToken));case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){var r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r))return Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){var n,s=!this.onKeyLine&&this.indent===e.indent,i=s&&(t.sep||t.explicitKey)&&"seq-item-ind"!==this.type;let r=[];if(i&&t.sep&&!t.value){var o=[];for(let r=0;r<t.sep.length;++r){var a=t.sep[r];switch(a.type){case"newline":o.push(r);break;case"space":break;case"comment":a.indent>e.indent&&(o.length=0);break;default:o.length=0}}2<=o.length&&(r=t.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":return void(i||t.value?(r.push(this.sourceToken),e.items.push({start:r}),this.onKeyLine=!0):(t.sep||t.start).push(this.sourceToken));case"explicit-key-ind":return t.sep||t.explicitKey?i||t.value?(r.push(this.sourceToken),e.items.push({start:r,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}):(t.start.push(this.sourceToken),t.explicitKey=!0),void(this.onKeyLine=!0);case"map-value-ind":return t.explicitKey?t.sep?t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):Nn(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}):Pn(t.key)&&!Nn(t.sep,"newline")?(n=jn(t.start),l=t.key,(c=t.sep).push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:l,sep:c}]})):0<r.length?t.sep=t.sep.concat(r,this.sourceToken):t.sep.push(this.sourceToken):Nn(t.start,"newline")?Object.assign(t,{key:null,sep:[this.sourceToken]}):(n=jn(t.start),this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]})):t.sep?t.value||i?e.items.push({start:r,key:null,sep:[this.sourceToken]}):Nn(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}),void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":var l=this.flowScalar(this.type);return void(i||t.value?(e.items.push({start:r,key:l,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(l):(Object.assign(t,{key:l,sep:[]}),this.onKeyLine=!0));default:var c=this.startBlockValue(e);if(c){if("block-seq"===c.type){if(!t.explicitKey&&t.sep&&!Nn(t.sep,"newline"))return void(yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source}))}else s&&e.items.push({start:r});return void this.stack.push(c)}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var t=e.items[e.items.length-1];switch(this.type){case"newline":return void(t.value?(r="end"in t.value?t.value.end:void 0,"comment"===(Array.isArray(r)?r[r.length-1]:void 0)?.type?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})):t.start.push(this.sourceToken));case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){var r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r))return Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;return void t.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(t.value||Nn(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken))}if(this.indent>e.indent){var n=this.startBlockValue(e);if(n)return void this.stack.push(n)}yield*this.pop(),yield*this.step()}*flowCollection(e){var t,r=e.items[e.items.length-1];if("flow-error-end"===this.type)for(;yield*this.pop(),(t=this.peek(1))&&"flow-collection"===t.type;);else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!r||r.sep?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken));case"map-value-ind":return void(!r||r.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!r||r.value?e.items.push({start:[this.sourceToken]}):(r.sep||r.start).push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":var n=this.flowScalar(this.type);return void(!r||r.value?e.items.push({start:[],key:n,sep:[]}):r.sep?this.stack.push(n):Object.assign(r,{key:n,sep:[]}));case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}(i=this.startBlockValue(e))?this.stack.push(i):(yield*this.pop(),yield*this.step())}else{var s,i;"block-map"===(i=this.peek(2)).type&&("map-value-ind"===this.type&&i.indent===e.indent||"newline"===this.type&&!i.items[i.items.length-1].sep)?(yield*this.pop(),yield*this.step()):"map-value-ind"===this.type&&"flow-collection"!==i.type?(i=jn(xn(i)),In(e),(s=e.end.splice(1,e.end.length)).push(this.sourceToken),i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:s}]},this.onKeyLine=!0,this.stack[this.stack.length-1]=i):yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":this.onKeyLine=!0;var t=jn(xn(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,explicitKey:!0}]};case"map-value-ind":return this.onKeyLine=!0,t=jn(xn(e)),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}return null}atIndentedComment(e,t){return"comment"===this.type&&!(this.indent<=t)&&e.every(e=>"newline"===e.type||"space"===e.type)}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type)&&(yield*this.pop())}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function Cn(e){var t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new On||null,prettyErrors:t}}function Ln(e,t={}){var{lineCounter:r,prettyErrors:n}=Cn(t),s=new Tn(r?.addNewLine);if(t=new cn(t),s=Array.from(t.compose(s.parse(e))),n&&r)for(var i of s)i.errors.forEach(qr(e,r)),i.warnings.forEach(qr(e,r));return 0<s.length?s:Object.assign([],{empty:!0},t.streamInfo())}function Mn(e,t={}){var r,{lineCounter:n,prettyErrors:s}=Cn(t),i=new Tn(n?.addNewLine);let o=null;for(r of new cn(t).compose(i.parse(e),!0,e.length))if(o){if("silent"!==o.options.logLevel){o.errors.push(new Kr(r.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else o=r;return s&&n&&(o.errors.forEach(qr(e,n)),o.warnings.forEach(qr(e,n))),o}function Dn(e,t,r){let n,s=("function"==typeof t?n=t:void 0===r&&t&&"object"==typeof t&&(r=t),Mn(e,r));if(!s)return null;if(s.warnings.forEach(e=>Pt(s.options.logLevel,e)),0<s.errors.length){if("silent"!==s.options.logLevel)throw s.errors[0];s.errors=[]}return s.toJS(Object.assign({reviver:n},r))}function Rn(e,t,r){let n=null;if("function"==typeof t||Array.isArray(t)?n=t:void 0===r&&t&&(r=t),"number"==typeof(r="string"==typeof r?r.length:r)&&(r=(s=Math.round(r))<1?void 0:8<s?{indent:8}:{indent:s}),void 0===e){var s=(r??t??{}).keepUndefined;if(!s)return}return(Ie(e)&&!n?e:new Dr(e,n,r)).toString(r)}$r=Object.freeze({__proto__:null,Alias:st,CST:_r,Composer:cn,Document:Dr,Lexer:Sn,LineCounter:On,Pair:Lt,Parser:Tn,Scalar:ot,Schema:Mr,YAMLError:Br,YAMLMap:Ut,YAMLParseError:Kr,YAMLSeq:Vt,YAMLWarning:Ur,isAlias:je,isCollection:De,isDocument:Ie,isMap:Te,isNode:Re,isPair:Ce,isScalar:Le,isSeq:Me,parse:Dn,parseAllDocuments:Ln,parseDocument:Mn,stringify:Rn,visit:Ve,visitAsync:ze});var Bn,Kn=o(Object.freeze({__proto__:null,Alias:st,CST:_r,Composer:cn,Document:Dr,Lexer:Sn,LineCounter:On,Pair:Lt,Parser:Tn,Scalar:ot,Schema:Mr,YAMLError:Br,YAMLMap:Ut,YAMLParseError:Kr,YAMLSeq:Vt,YAMLWarning:Ur,default:$r,isAlias:je,isCollection:De,isDocument:Ie,isMap:Te,isNode:Re,isPair:Ce,isScalar:Le,isSeq:Me,parse:Dn,parseAllDocuments:Ln,parseDocument:Mn,stringify:Rn,visit:Ve,visitAsync:ze})),Un={exports:{}},qn={},Vn={},Fn={},zn={},Jn={},Gn={};function Hn(){if(!Bn){Bn=1;{var e=Gn;Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class i{}e._CodeOrName=i,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class o extends i{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=o;class a extends i{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){var e;return!(1<this._items.length||""!==(e=this._items[0])&&'""'!==e)}get str(){var e;return null!=(e=this._str)?e:this._str=this._items.reduce((e,t)=>""+e+t,"")}get names(){var e;return null!=(e=this._names)?e:this._names=this._items.reduce((e,t)=>(t instanceof o&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function t(e,...t){var r=[e[0]];let s=0;for(;s<t.length;)n(r,t[s]),r.push(e[++s]);return new a(r)}e._Code=a,e.nil=new a(""),e._=t;let l=new a("+");function r(e,...t){var r=[s(e[0])];let i=0;for(;i<t.length;)r.push(l),n(r,t[i]),r.push(l,s(e[++i]));{var c=r;let e=1;for(;e<c.length-1;){if(c[e]===l){var u=((e,t)=>'""'===t?e:'""'===e?t:"string"!=typeof e?"string"!=typeof t||'"'!==t[0]||e instanceof o?void 0:'"'+e+t.slice(1):t instanceof o||'"'!==e[e.length-1]?void 0:"string"!=typeof t?""+e.slice(0,-1)+t+'"':'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0)(c[e-1],c[e+1]);if(void 0!==u){c.splice(e-1,3,u);continue}c[e++]="+"}e++}}return new a(r)}function n(e,t){t instanceof a?e.push(...t._items):t instanceof o?e.push(t):e.push("number"==typeof(e=t)||"boolean"==typeof e||null===e?e:s(Array.isArray(e)?e.join(","):e))}function s(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=r,e.addCodeArg=n,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:r`${e}${t}`},e.stringify=function(e){return new a(s(e))},e.safeStringify=s,e.getProperty=function(r){return"string"==typeof r&&e.IDENTIFIER.test(r)?new a("."+r):t`[${r}]`},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new a(""+t);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)},e.regexpCode=function(e){return new a(e.toString())}}}return Gn}var Wn,Yn,Qn={};function Xn(){if(!Wn){Wn=1;{var e=Qn;Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;let n=Hn();class s extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var t,r;(r=t||(e.UsedValueState=t={}))[r.Started=0]="Started",r[r.Completed=1]="Completed",e.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class i{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof n.Name?e:this.name(e)}name(e){return new n.Name(this._newName(e))}_newName(e){return""+e+(this._names[e]||this._nameGroup(e)).index++}_nameGroup(e){var t;if(null!=(t=null==(t=this._parent)?void 0:t._prefixes)&&t.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}e.Scope=i;class o extends n.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=n._`.${new n.Name(t)}[${r}]`}}e.ValueScopeName=o;let a=n._`\n`;class l extends i{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?a:n.nil}}get(){return this._scope}name(e){return new o(e,this._newName(e))}value(e,t){if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");var r=(e=this.toName(e)).prefix,n=null!=(n=t.key)?n:t.ref;let s=this._values[r];if(s){var i=s.get(n);if(i)return i}else s=this._values[r]=new Map;return s.set(n,e),(i=this._scope[r]||(this._scope[r]=[]))[n=i.length]=t.ref,e.setValue(t,{property:r,itemIndex:n}),e}getValue(e,t){if(e=this._values[e])return e.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return n._`${e}${t.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(r,i,o={},a){let l=n.nil;for(var c in r){var u=r[c];if(u){let r=o[c]=o[c]||new Map;u.forEach(o=>{if(!r.has(o)){r.set(o,t.Started);var c=i(o);if(c){var u=this.opts.es5?e.varKinds.var:e.varKinds.const;l=n._`${l}${u} ${o} = ${c};${this.opts._n}`}else{if(!(c=null==a?void 0:a(o)))throw new s(o);l=n._`${l}${c}${this.opts._n}`}r.set(o,t.Completed)}})}}return l}}e.ValueScope=l}}return Qn}function Zn(){if(!Yn){Yn=1;{var e=Jn;Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;let c=Hn(),u=Xn();var t=Hn(),r=(Object.defineProperty(e,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return t.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return t.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return t.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return t.Name}}),Xn());Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return r.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return r.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return r.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return r.varKinds}}),e.operators={GT:new c._Code(">"),GTE:new c._Code(">="),LT:new c._Code("<"),LTE:new c._Code("<="),EQ:new c._Code("==="),NEQ:new c._Code("!=="),NOT:new c._Code("!"),OR:new c._Code("||"),AND:new c._Code("&&"),ADD:new c._Code("+")};class f{optimizeNodes(){return this}optimizeNames(e,t){return this}}class p extends f{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){e=e?u.varKinds.var:this.varKind;var r=void 0===this.rhs?"":" = "+this.rhs;return`${e} ${this.name}${r};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=i(this.rhs,e,t)),this}get names(){return this.rhs instanceof c._CodeOrName?this.rhs.names:{}}}class h extends f{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof c.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=i(this.rhs,e,t),this}get names(){return s(this.lhs instanceof c.Name?{}:{...this.lhs.names},this.rhs)}}class d extends h{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class m extends f{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return this.label+":"+e}}class y extends f{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?" "+this.label:""};`+e}}class g extends f{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class v extends f{constructor(e){super(),this.code=e}render({_n:e}){return this.code+";"+e}optimizeNodes(){return""+this.code?this:void 0}optimizeNames(e,t){return this.code=i(this.code,e,t),this}get names(){return this.code instanceof c._CodeOrName?this.code.names:{}}}class b extends f{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){var e=this.nodes;let t=e.length;for(;t--;){var r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return 0<e.length?this:void 0}optimizeNames(e,t){var r=this.nodes;let n=r.length;for(;n--;){var s=r[n];if(!s.optimizeNames(e,t)){i=o=void 0;var i,o=e,a=s.names;for(i in a)o[i]=(o[i]||0)-(a[i]||0);r.splice(n,1)}}return 0<r.length?this:void 0}get names(){return this.nodes.reduce((e,t)=>n(e,t.names),{})}}class w extends b{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class k extends b{}class _ extends w{}_.kind="else";class $ extends w{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();var e,t=this.condition;if(!0===t)return this.nodes;let r=this.else;return r&&(e=r.optimizeNodes(),r=this.else=Array.isArray(e)?new _(e):e),r?!1===t?r instanceof $?r:r.nodes:this.nodes.length?this:new $(o(t),r instanceof $?[r]:r.nodes):!1!==t&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null==(r=this.else)?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=i(this.condition,e,t),this}get names(){var e=super.names;return s(e,this.condition),this.else&&n(e,this.else.names),e}}$.kind="if";class E extends w{}E.kind="for";class S extends E{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=i(this.iteration,e,t),this}get names(){return n(super.names,this.iteration.names)}}class O extends E{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){var{name:t,from:r,to:n}=this;return`for(${e.es5?u.varKinds.var:this.varKind} ${t}=${r}; ${t}<${n}; ${t}++)`+super.render(e)}get names(){var e=s(super.names,this.from);return s(e,this.to)}}class N extends E{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=i(this.iterable,e,t),this}get names(){return n(super.names,this.iterable.names)}}class A extends w{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return(this.async?"async ":"")+`function ${this.name}(${this.args})`+super.render(e)}}A.kind="func";class P extends b{render(e){return"return "+super.render(e)}}P.kind="return";class x extends w{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e;return super.optimizeNodes(),null!=(e=this.catch)&&e.optimizeNodes(),null!=(e=this.finally)&&e.optimizeNodes(),this}optimizeNames(e,t){var r;return super.optimizeNames(e,t),null!=(r=this.catch)&&r.optimizeNames(e,t),null!=(r=this.finally)&&r.optimizeNames(e,t),this}get names(){var e=super.names;return this.catch&&n(e,this.catch.names),this.finally&&n(e,this.finally.names),e}}class j extends w{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}j.kind="catch";class I extends w{render(e){return"finally"+super.render(e)}}function n(e,t){for(var r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function s(e,t){return t instanceof c._CodeOrName?n(e,t.names):e}function i(e,t,r){var n;return e instanceof c.Name?s(e):(n=e)instanceof c._Code&&n._items.some(e=>e instanceof c.Name&&1===t[e.str]&&void 0!==r[e.str])?new c._Code(e._items.reduce((e,t)=>((t=t instanceof c.Name?s(t):t)instanceof c._Code?e.push(...t._items):e.push(t),e),[])):e;function s(e){var n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function o(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:c._`!${l(e)}`}I.kind="finally",e.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new u.Scope({parent:e}),this._nodes=[new k]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){return e=this._extScope.value(e,t),(this._values[e.prefix]||(this._values[e.prefix]=new Set)).add(e),e}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){return t=this._scope.toName(t),void 0!==r&&n&&(this._constants[t.str]=r),this._leafNode(new p(e,t,r)),t}const(e,t,r){return this._def(u.varKinds.const,e,t,r)}let(e,t,r){return this._def(u.varKinds.let,e,t,r)}var(e,t,r){return this._def(u.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new h(e,t,r))}add(t,r){return this._leafNode(new d(t,e.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==c.nil&&this._leafNode(new v(e)),this}object(...e){var t,r,n=["{"];for([t,r]of e)1<n.length&&n.push(","),n.push(t),t===r&&!this.opts.es5||(n.push(":"),(0,c.addCodeArg)(n,r));return n.push("}"),new c._Code(n)}if(e,t,r){if(this._blockNode(new $(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new $(e))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode($,_)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new S(e),t)}forRange(e,t,r,n,s=(this.opts.es5?u.varKinds.var:u.varKinds.let)){let i=this._scope.toName(e);return this._for(new O(s,i,t,r),()=>n(i))}forOf(e,t,r,n=u.varKinds.const){let s=this._scope.toName(e);if(this.opts.es5){let e=t instanceof c.Name?t:this.var("_arr",t);return this.forRange("_i",0,c._`${e}.length`,t=>{this.var(s,c._`${e}[${t}]`),r(s)})}return this._for(new N("of",n,s,t),()=>r(s))}forIn(e,t,r,n=(this.opts.es5?u.varKinds.var:u.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,c._`Object.keys(${t})`,r);let s=this._scope.toName(e);return this._for(new N("in",n,s,t),()=>r(s))}endFor(){return this._endBlockNode(E)}label(e){return this._leafNode(new m(e))}break(e){return this._leafNode(new y(e))}return(e){var t=new P;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(P)}try(e,t,r){var n;if(t||r)return n=new x,this._blockNode(n),this.code(e),t&&(e=this.name("e"),this._currNode=n.catch=new j(e),t(e)),r&&(this._currNode=n.finally=new I,this.code(r)),this._endBlockNode(j,I);throw new Error('CodeGen: "try" without "catch" and "finally"')}throw(e){return this._leafNode(new g(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){var t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");var r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=c.nil,r,n){return this._blockNode(new A(e,t,r)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(A)}optimize(e=1){for(;0<e--;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){var r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?e.kind+"/"+t.kind:e.kind}"`)}_elseNode(e){var t=this._currNode;if(t instanceof $)return this._currNode=t.else=e,this;throw new Error('CodeGen: "else" without "if"')}get _root(){return this._nodes[0]}get _currNode(){var e=this._nodes;return e[e.length-1]}set _currNode(e){var t=this._nodes;t[t.length-1]=e}},e.not=o;let T=a(e.operators.AND),C=(e.and=function(...e){return e.reduce(T)},a(e.operators.OR));function a(e){return(t,r)=>t===c.nil?r:r===c.nil?t:c._`${l(t)} ${e} ${l(r)}`}function l(e){return e instanceof c.Name?e:c._`(${e})`}e.or=function(...e){return e.reduce(C)}}}return Jn}var es,ts={};function rs(){if(!es){es=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.checkStrictMode=ts.getErrorPath=ts.Type=ts.useFunc=ts.setEvaluated=ts.evaluatedPropsToName=ts.mergeEvaluated=ts.eachItem=ts.unescapeJsonPointer=ts.escapeJsonPointer=ts.escapeFragment=ts.unescapeFragment=ts.schemaRefOrVal=ts.schemaHasRulesButRef=ts.schemaHasRules=ts.checkUnknownRules=ts.alwaysValidSchema=ts.toHash=void 0;let u=Zn(),f=Hn(),p=(ts.toHash=function(e){var t,r={};for(t of e)r[t]=!0;return r},ts.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(r(e,t),!n(t,e.self.RULES.all))},ts.checkUnknownRules=r,ts.schemaHasRules=n,ts.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if("$ref"!==r&&t.all[r])return!0;return!1},ts.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return u._`${r}`}return u._`${e}${t}${(0,u.getProperty)(n)}`},ts.unescapeFragment=function(e){return i(decodeURIComponent(e))},ts.escapeFragment=function(e){return encodeURIComponent(s(e))},ts.escapeJsonPointer=s,ts.unescapeJsonPointer=i,ts.eachItem=function(e,t){if(Array.isArray(e))for(var r of e)t(r);else t(e)},ts.mergeEvaluated={props:o({mergeNames:(e,t,r)=>e.if(u._`${r} !== true && ${t} !== undefined`,()=>{e.if(u._`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,u._`${r} || {}`).code(u._`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if(u._`${r} !== true`,()=>{!0===t?e.assign(r,!0):(e.assign(r,u._`${r} || {}`),l(e,r,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:a}),items:o({mergeNames:(e,t,r)=>e.if(u._`${r} !== true && ${t} !== undefined`,()=>e.assign(r,u._`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if(u._`${r} !== true`,()=>e.assign(r,!0===t||u._`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},ts.evaluatedPropsToName=a,ts.setEvaluated=l,{});var e,t;function r(e,t=e.schema){var{opts:r,self:n}=e;if(r.strictSchema&&"boolean"!=typeof t){var s,i=n.RULES.keywords;for(s in t)i[s]||c(e,`unknown keyword: "${s}"`)}}function n(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0;return!1}function s(e){return"number"==typeof e?""+e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function i(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function o({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,i,o,a)=>(i=void 0===o?i:o instanceof u.Name?((i instanceof u.Name?e:t)(s,i,o),o):i instanceof u.Name?(t(s,o,i),i):r(i,o),a!==u.Name||i instanceof u.Name?i:n(s,i))}function a(e,t){var r;return!0===t?e.var("props",!0):(r=e.var("props",u._`{}`),void 0!==t&&l(e,r,t),r)}function l(e,t,r){Object.keys(r).forEach(r=>e.assign(u._`${t}${(0,u.getProperty)(r)}`,!0))}function c(e,t,r=e.opts.strictSchema){if(r){if(t="strict mode: "+t,!0===r)throw new Error(t);e.self.logger.warn(t)}}ts.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:p[t.code]||(p[t.code]=new f._Code(t.code))})},(t=e||(ts.Type=e={}))[t.Num=0]="Num",t[t.Str=1]="Str",ts.getErrorPath=function(t,r,n){return t instanceof u.Name?(r=r===e.Num,n?r?u._`"[" + ${t} + "]"`:u._`"['" + ${t} + "']"`:r?u._`"/" + ${t}`:u._`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`):n?(0,u.getProperty)(t).toString():"/"+s(t)},ts.checkStrictMode=c}return ts}var ns,ss,is,os={};function as(){var e;return ns||(ns=1,Object.defineProperty(os,"__esModule",{value:!0}),e={data:new((e=Zn()).Name)("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")},os.default=e),os}function ls(){if(!ss){ss=1;{var e=zn;Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;let s=Zn(),i=rs(),o=as();function t(e,t){let r=e.const("err",t);e.if(s._`${o.default.vErrors} === null`,()=>e.assign(o.default.vErrors,s._`[${r}]`),s._`${o.default.vErrors}.push(${r})`),e.code(s._`${o.default.errors}++`)}function r(e,t){var{gen:r,validateName:n,schemaEnv:i}=e;i.$async?r.throw(s._`new ${e.ValidationError}(${t})`):(r.assign(s._`${n}.errors`,t),r.return(!1))}e.keywordError={message:({keyword:e})=>s.str`must pass "${e}" keyword validation`},e.keyword$DataError={message:({keyword:e,schemaType:t})=>t?s.str`"${e}" keyword must be ${t} ($data)`:s.str`"${e}" keyword is invalid ($data)`},e.reportError=function(i,o=e.keywordError,a,l){var c=i.it,{gen:u,compositeRule:f,allErrors:p}=c;i=n(i,o,a),(null!=l?l:f||p)?t(u,i):r(c,s._`[${i}]`)},e.reportExtraError=function(s,i=e.keywordError,a){var l=s.it,{gen:c,compositeRule:u,allErrors:f}=l;t(c,n(s,i,a)),u||f||r(l,o.default.vErrors)},e.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(s._`${o.default.vErrors} !== null`,()=>e.if(t,()=>e.assign(s._`${o.default.vErrors}.length`,t),()=>e.assign(o.default.vErrors,null)))},e.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:n,errsCount:i,it:a}){if(void 0===i)throw new Error("ajv implementation error");let l=e.name("err");e.forRange("i",i,o.default.errors,i=>{e.const(l,s._`${o.default.vErrors}[${i}]`),e.if(s._`${l}.instancePath === undefined`,()=>e.assign(s._`${l}.instancePath`,(0,s.strConcat)(o.default.instancePath,a.errorPath))),e.assign(s._`${l}.schemaPath`,s.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(s._`${l}.schema`,r),e.assign(s._`${l}.data`,n))})};let a={keyword:new s.Name("keyword"),schemaPath:new s.Name("schemaPath"),params:new s.Name("params"),propertyName:new s.Name("propertyName"),message:new s.Name("message"),schema:new s.Name("schema"),parentSchema:new s.Name("parentSchema")};function n(e,t,r){var n,l,c,u,f,p,h,d,m,y=e.it.createErrors;return!1===y?s._`{}`:([y,e,t={}]=[e,t,r],({gen:r,it:n}=y),n=[(({errorPath:e},{instancePath:t})=>(t=t?s.str`${e}${(0,i.getErrorPath)(t,i.Type.Str)}`:e,[o.default.instancePath,(0,s.strConcat)(o.default.instancePath,t)]))(n,t),(({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n})=>{let o=n?t:s.str`${t}/${e}`;return r&&(o=s.str`${o}${(0,i.getErrorPath)(r,i.Type.Str)}`),[a.schemaPath,o]})(y,t)],[t,{params:y,message:e},l]=[y,e,n],({keyword:c,data:u,schemaValue:f,it:p}=t),({opts:p,propertyName:h,topSchemaRef:d,schemaPath:m}=p),l.push([a.keyword,c],[a.params,"function"==typeof y?y(t):y||s._`{}`]),p.messages&&l.push([a.message,"function"==typeof e?e(t):e]),p.verbose&&l.push([a.schema,f],[a.parentSchema,s._`${d}${m}`],[o.default.data,u]),h&&l.push([a.propertyName,h]),r.object(...n))}}}return zn}var cs,us={},fs={};function ps(){if(!cs){cs=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.getRules=fs.isJSONType=void 0;let e=new Set(["string","number","integer","boolean","null","object","array"]);fs.isJSONType=function(t){return"string"==typeof t&&e.has(t)},fs.getRules=function(){var e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}}return fs}var hs,ds,ms={};function ys(){return hs||(hs=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.shouldUseRule=ms.shouldUseGroup=ms.schemaHasRulesForType=void 0,ms.schemaHasRulesForType=function({schema:t,self:r},n){return(r=r.RULES.types[n])&&!0!==r&&e(t,r)},ms.shouldUseGroup=e,ms.shouldUseRule=t),ms;function e(e,r){return r.rules.some(r=>t(e,r))}function t(e,t){return void 0!==e[t.keyword]||(null==(t=t.definition.implements)?void 0:t.some(t=>void 0!==e[t]))}}function gs(){if(!ds){ds=1,Object.defineProperty(us,"__esModule",{value:!0}),us.reportTypeError=us.checkDataTypes=us.checkDataType=us.coerceAndCheckDataType=us.getJSONTypes=us.getSchemaTypes=us.DataType=void 0;let o=ps(),a=ys(),l=ls(),c=Zn(),u=rs();var e,t;(t=e||(us.DataType=e={}))[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong",us.getSchemaTypes=function(e){var t=r(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},us.getJSONTypes=r,us.coerceAndCheckDataType=function(t,r){var n,{gen:o,data:l,opts:u}=t;h=r;let p=(n=u.coerceTypes)?h.filter(e=>f.has(e)||"array"===n&&"array"===e):[];var h=0<r.length&&!(0===p.length&&1===r.length&&(0,a.schemaHasRulesForType)(t,r[0]));return h&&(l=s(r,l,u.strictNumbers,e.Wrong),o.if(l,()=>{if(p.length){var e,n=t,o=r,a=p;let{gen:l,data:u,opts:h}=n,d=l.let("dataType",c._`typeof ${u}`),m=l.let("coerced",c._`undefined`);for(e of("array"===h.coerceTypes&&l.if(c._`${d} == 'object' && Array.isArray(${u}) && ${u}.length == 1`,()=>l.assign(u,c._`${u}[0]`).assign(d,c._`typeof ${u}`).if(s(o,u,h.strictNumbers),()=>l.assign(m,u))),l.if(c._`${m} !== undefined`),a))(f.has(e)||"array"===e&&"array"===h.coerceTypes)&&(e=>{switch(e){case"string":return l.elseIf(c._`${d} == "number" || ${d} == "boolean"`).assign(m,c._`"" + ${u}`).elseIf(c._`${u} === null`).assign(m,c._`""`);case"number":return l.elseIf(c._`${d} == "boolean" || ${u} === null
              || (${d} == "string" && ${u} && ${u} == +${u})`).assign(m,c._`+${u}`);case"integer":return l.elseIf(c._`${d} === "boolean" || ${u} === null
              || (${d} === "string" && ${u} && ${u} == +${u} && !(${u} % 1))`).assign(m,c._`+${u}`);case"boolean":return l.elseIf(c._`${u} === "false" || ${u} === 0 || ${u} === null`).assign(m,!1).elseIf(c._`${u} === "true" || ${u} === 1`).assign(m,!0);case"null":return l.elseIf(c._`${u} === "" || ${u} === 0 || ${u} === false`),l.assign(m,null);case"array":l.elseIf(c._`${d} === "string" || ${d} === "number"
              || ${d} === "boolean" || ${u} === null`).assign(m,c._`[${u}]`)}})(e);l.else(),i(n),l.endIf(),l.if(c._`${m} !== undefined`,()=>{var e,t,r,s;l.assign(u,m),[{gen:e,parentData:t,parentDataProperty:r},s]=[n,m],e.if(c._`${t} !== undefined`,()=>e.assign(c._`${t}[${r}]`,s))})}else i(t)})),h};let f=new Set(["string","number","integer","boolean","null"]),p=(us.checkDataType=n,us.checkDataTypes=s,{message:({schema:e})=>"must be "+e,params:({schema:e,schemaValue:t})=>"string"==typeof e?c._`{type: ${e}}`:c._`{type: ${t}}`});function r(e){if((e=Array.isArray(e)?e:e?[e]:[]).every(o.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}function n(t,r,n,s=e.Correct){var i=s===e.Correct?c.operators.EQ:c.operators.NEQ;let o;switch(t){case"null":return c._`${r} ${i} null`;case"array":o=c._`Array.isArray(${r})`;break;case"object":o=c._`${r} && typeof ${r} == "object" && !Array.isArray(${r})`;break;case"integer":o=a(c._`!(${r} % 1) && !isNaN(${r})`);break;case"number":o=a();break;default:return c._`typeof ${r} ${i} ${t}`}return s===e.Correct?o:(0,c.not)(o);function a(e=c.nil){return(0,c.and)(c._`typeof ${r} == "number"`,e,n?c._`isFinite(${r})`:c.nil)}}function s(e,t,r,s){if(1===e.length)return n(e[0],t,r,s);let i;var o,a;for(a in(e=(0,u.toHash)(e)).array&&e.object?(o=c._`typeof ${t} != "object"`,i=e.null?o:c._`!${t} || ${o}`,delete e.null,delete e.array,delete e.object):i=c.nil,e.number&&delete e.integer,e)i=(0,c.and)(i,n(a,t,r,s));return i}function i(e){e=(e=>{var{gen:t,data:r,schema:n}=e,s=(0,u.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}})(e),(0,l.reportError)(e,p)}us.reportTypeError=i}return us}var vs,bs={};var ws,ks,_s={},$s={};function Es(){if(!ws){ws=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.validateUnion=$s.validateArray=$s.usePattern=$s.callValidateCode=$s.schemaProperties=$s.allSchemaProperties=$s.noPropertyInData=$s.propertyInData=$s.isOwnProperty=$s.hasPropFunc=$s.reportMissingProp=$s.checkMissingProp=$s.checkReportMissingProp=void 0;let s=Zn(),i=rs(),o=as(),a=rs(),l=($s.checkReportMissingProp=function(e,t){var{gen:n,data:i,it:o}=e;n.if(r(n,i,t,o.opts.ownProperties),()=>{e.setParams({missingProperty:s._`${t}`},!0),e.error()})},$s.checkMissingProp=function({gen:e,data:t,it:{opts:n}},i,o){return(0,s.or)(...i.map(i=>(0,s.and)(r(e,t,i,n.ownProperties),s._`${o} = ${i}`)))},$s.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},$s.hasPropFunc=e,$s.isOwnProperty=t,$s.propertyInData=function(e,r,n,i){var o=s._`${r}${(0,s.getProperty)(n)} !== undefined`;return i?s._`${o} && ${t(e,r,n)}`:o},$s.noPropertyInData=r,$s.allSchemaProperties=n,$s.schemaProperties=function(e,t){return n(t).filter(r=>!(0,i.alwaysValidSchema)(e,t[r]))},$s.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:a},it:l},c,u,f){return f=f?s._`${e}, ${t}, ${n}${i}`:t,e=[[o.default.instancePath,(0,s.strConcat)(o.default.instancePath,a)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]],l.opts.dynamicRef&&e.push([o.default.dynamicAnchors,o.default.dynamicAnchors]),n=s._`${f}, ${r.object(...e)}`,u!==s.nil?s._`${c}.call(${u}, ${n})`:s._`${c}(${n})`},s._`new RegExp`);function e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:s._`Object.prototype.hasOwnProperty`})}function t(t,r,n){return s._`${e(t)}.call(${r}, ${n})`}function r(e,r,n,i){var o=s._`${r}${(0,s.getProperty)(n)} === undefined`;return i?(0,s.or)(o,(0,s.not)(t(e,r,n))):o}function n(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}$s.usePattern=function({gen:e,it:{opts:t}},r){var n=t.unicodeRegExp?"u":"",i=(t=t.code.regExp)(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:s._`${"new RegExp"===t.code?l:(0,a.useFunc)(e,t)}(${r}, ${n})`})},$s.validateArray=function(e){let{gen:t,data:r,keyword:n,it:o}=e,a=t.name("valid");if(o.allErrors){let e=t.let("valid",!0);return l(()=>t.assign(e,!1)),e}return t.var(a,!0),l(()=>t.break()),a;function l(o){var l=t.const("len",s._`${r}.length`);t.forRange("i",0,l,r=>{e.subschema({keyword:n,dataProp:r,dataPropType:i.Type.Num},a),t.if((0,s.not)(a),o)})}},$s.validateUnion=function(e){let{gen:t,schema:r,keyword:n,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(!r.some(e=>(0,i.alwaysValidSchema)(o,e))||o.opts.unevaluated){let i=t.let("valid",!1),o=t.name("_valid");t.block(()=>r.forEach((r,a)=>{a=e.subschema({keyword:n,schemaProp:a,compositeRule:!0},o),t.assign(i,s._`${i} || ${o}`),(a=e.mergeValidEvaluated(a,o))||t.if((0,s.not)(i))})),e.result(i,()=>e.reset(),()=>e.error(!0))}}}return $s}function Ss(){if(!ks){ks=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.validateKeywordUsage=_s.validSchemaType=_s.funcKeywordCode=_s.macroKeywordCode=void 0;let r=Zn(),n=as(),s=Es(),i=ls();function e(e){let{gen:t,data:n,it:s}=e;t.if(s.parentData,()=>t.assign(n,r._`${s.parentData}[${s.parentDataProperty}]`))}function t(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,r.stringify)(n)})}_s.macroKeywordCode=function(e,n){var{gen:s,keyword:i,schema:o,parentSchema:a,it:l}=e,o=t(s,i,n=n.macro.call(l.self,o,a,l)),a=(!1!==l.opts.validateSchema&&l.self.validateSchema(n,!0),s.name("valid"));e.subschema({schema:n,schemaPath:r.nil,errSchemaPath:l.errSchemaPath+"/"+i,topSchemaRef:o,compositeRule:!0},a),e.pass(a,()=>e.error(!0))},_s.funcKeywordCode=function(o,a){let l,{gen:c,keyword:u,schema:f,parentSchema:p,$data:h,it:d}=o;var[m,y]=[d.schemaEnv,a];if(y.async&&!m.$async)throw new Error("async keyword in sync schema");y=!h&&a.compile?a.compile.call(d.self,f,p,d):a.validate;let g=t(c,u,y),v=c.let("valid");function b(e=(a.async?r._`await `:r.nil)){var t=d.opts.passContext?n.default.this:n.default.self,i=!("compile"in a&&!h||!1===a.schema);c.assign(v,r._`${e}${(0,s.callValidateCode)(o,g,t,i)}`,a.modifying)}function w(e){var t;c.if((0,r.not)(null!=(t=a.valid)?t:v),e)}o.block$data(v,function(){if(!1===a.errors)b(),a.modifying&&e(o),w(()=>o.error());else{let t=(a.async?()=>{let e=c.let("ruleErrs",null);return c.try(()=>b(r._`await `),t=>c.assign(v,!1).if(r._`${t} instanceof ${d.ValidationError}`,()=>c.assign(e,r._`${t}.errors`),()=>c.throw(t))),e}:()=>{var e=r._`${g}.errors`;return c.assign(e,null),b(r.nil),e})();a.modifying&&e(o),w(()=>{{var e=o,s=t;let a=e.gen;a.if(r._`Array.isArray(${s})`,()=>{a.assign(n.default.vErrors,r._`${n.default.vErrors} === null ? ${s} : ${n.default.vErrors}.concat(${s})`).assign(n.default.errors,r._`${n.default.vErrors}.length`),(0,i.extendErrors)(e)},()=>e.error())}})}}),o.ok(null!=(l=a.valid)?l:v)},_s.validSchemaType=function(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e)},_s.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");var o=s.dependencies;if(null!=o&&o.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${i}: `+o.join(","));if(s.validateSchema&&!s.validateSchema(e[i])){if(o=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors),"log"!==t.validateSchema)throw new Error(o);r.logger.error(o)}}}return _s}var Os,Ns={};var As,Ps,xs={};function js(){return Ps||(Ps=1,As=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(s=n;0!=s--;)if(!e(t[s],r[s]))return!1}else{if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;0!=s--;){var o=i[s];if(!e(t[o],r[o]))return!1}}return!0}return t!=t&&r!=r}),As}var Is,Ts,Cs,Ls={exports:{}};function Ms(){if(!Ts){Ts=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.getSchemaRefs=xs.resolveUrl=xs.normalizeId=xs._getFullPath=xs.getFullPath=xs.inlineRef=void 0;let s=rs(),i=js(),o=function(){var e;return Is||(Is=1,(e=Ls.exports=function(r,n,s){"function"==typeof n&&(s=n,n={}),function r(n,s,i,o,a,l,c,u,f,p){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var h in s(o,a,l,c,u,f,p),o){var d=o[h];if(Array.isArray(d)){if(h in e.arrayKeywords)for(var m=0;m<d.length;m++)r(n,s,i,d[m],a+"/"+h+"/"+m,l,a,h,o,m)}else if(h in e.propsKeywords){if(d&&"object"==typeof d)for(var y in d)r(n,s,i,d[y],a+"/"+h+"/"+t(y),l,a,h,o,y)}else(h in e.keywords||n.allKeys&&!(h in e.skipKeywords))&&r(n,s,i,d,a+"/"+h,l,a,h,o)}i(o,a,l,c,u,f,p)}}(n,"function"==typeof(s=n.cb||s)?s:s.pre||function(){},s.post||function(){},r,"",r)}).keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}),Ls.exports;function t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}}(),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]),l=(xs.inlineRef=function(t,r=!0){return"boolean"==typeof t||(!0===r?!e(t):!!r&&function e(t){let r=0;for(var n in t){if("$ref"===n)return 1/0;if(r++,!a.has(n)&&("object"==typeof t[n]&&(0,s.eachItem)(t[n],t=>r+=e(t)),r===1/0))return 1/0}return r}(t)<=r)},new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"])),c=(xs.getFullPath=t,xs._getFullPath=r,/#\/?$/),u=(xs.normalizeId=n,xs.resolveUrl=function(e,t,r){return r=n(r),e.resolve(t,r)},/^[a-z_][-a-z0-9._]*$/i);function e(t){for(var r in t){if(l.has(r))return!0;if(r=t[r],Array.isArray(r)&&r.some(e))return!0;if("object"==typeof r&&e(r))return!0}return!1}function t(e,t="",s){return!1!==s&&(t=n(t)),s=e.parse(t),r(e,s)}function r(e,t){return e.serialize(t).split("#")[0]+"#"}function n(e){return e?e.replace(c,""):""}xs.getSchemaRefs=function(e,r){if("boolean"==typeof e)return{};let{schemaId:s,uriResolver:a}=this.opts,l={"":r=n(e[s]||r)},c=t(a,r,!1),f={},p=new Set;return o(e,{allKeys:!0},(e,t,r,i)=>{if(void 0!==i){let m=c+t,y=l[i];function o(t){var r=this.opts.uriResolver.resolve;if(t=n(y?r(y,t):t),p.has(t))throw d(t);p.add(t);let s=this.refs[t];return"object"==typeof(s="string"==typeof s?this.refs[s]:s)?h(e,s.schema,t):t!==n(m)&&("#"===t[0]?(h(e,f[t],t),f[t]=e):this.refs[t]=m),t}function a(e){if("string"==typeof e){if(!u.test(e))throw new Error(`invalid anchor "${e}"`);o.call(this,"#"+e)}}"string"==typeof e[s]&&(y=o.call(this,e[s])),a.call(this,e.$anchor),a.call(this,e.$dynamicAnchor),l[t]=y}}),f;function h(e,t,r){if(void 0!==t&&!i(e,t))throw d(r)}function d(e){return new Error(`reference "${e}" resolves to more than one schema`)}}}return xs}function Ds(){if(!Cs){Cs=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.getData=Vn.KeywordCxt=Vn.validateFunctionCode=void 0;let h=function(){if(!is){is=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.boolOrEmptySchema=Fn.topBoolOrEmptySchema=void 0;let t=ls(),r=Zn(),n=as(),s={message:"boolean schema is false"};function e(e,r){var{gen:n,data:i}=e,n={gen:n,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,t.reportError)(n,s,void 0,r)}Fn.topBoolOrEmptySchema=function(t){var{gen:s,schema:i,validateName:o}=t;!1===i?e(t,!1):"object"==typeof i&&!0===i.$async?s.return(n.default.data):(s.assign(r._`${o}.errors`,null),s.return(!0))},Fn.boolOrEmptySchema=function(t,r){var{gen:n,schema:s}=t;!1===s?(n.var(r,!1),e(t)):n.var(r,!0)}}return Fn}(),d=gs(),m=ys(),y=gs(),g=function(){if(!vs){vs=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.assignDefaults=void 0;let t=Zn(),r=rs();function e(e,n,s){var{gen:i,compositeRule:o,data:a,opts:l}=e;if(void 0!==s)if(a=t._`${a}${(0,t.getProperty)(n)}`,o)(0,r.checkStrictMode)(e,"default is ignored for: "+a);else{let e=t._`${a} === undefined`;"empty"===l.useDefaults&&(e=t._`${e} || ${a} === null || ${a} === ""`),i.if(e,t._`${a} = ${(0,t.stringify)(s)}`)}}bs.assignDefaults=function(t,r){var{properties:n,items:s}=t.schema;if("object"===r&&n)for(var i in n)e(t,i,n[i].default);else"array"===r&&Array.isArray(s)&&s.forEach((r,n)=>e(t,n,r.default))}}return bs}(),v=Ss(),b=function(){if(!Os){Os=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.extendSubschemaMode=Ns.extendSubschemaData=Ns.getSubschema=void 0;let e=Zn(),t=rs();Ns.getSubschema=function(r,{keyword:n,schemaProp:s,schema:i,schemaPath:o,errSchemaPath:a,topSchemaRef:l}){if(void 0!==n&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');var c;if(void 0!==n)return c=r.schema[n],void 0===s?{schema:c,schemaPath:e._`${r.schemaPath}${(0,e.getProperty)(n)}`,errSchemaPath:r.errSchemaPath+"/"+n}:{schema:c[s],schemaPath:e._`${r.schemaPath}${(0,e.getProperty)(n)}${(0,e.getProperty)(s)}`,errSchemaPath:r.errSchemaPath+`/${n}/`+(0,t.escapeFragment)(s)};if(void 0===i)throw new Error('either "keyword" or "schema" must be passed');if(void 0===o||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:o,topSchemaRef:l,errSchemaPath:a}},Ns.extendSubschemaData=function(r,n,{dataProp:s,dataPropType:i,data:o,dataTypes:a,propertyName:l}){if(void 0!==o&&void 0!==s)throw new Error('both "data" and "dataProp" passed, only one allowed');var c,u,f,p=n.gen;function h(e){r.data=e,r.dataLevel=n.dataLevel+1,r.dataTypes=[],n.definedProperties=new Set,r.parentData=n.data,r.dataNames=[...n.dataNames,e]}void 0!==s&&(({errorPath:c,dataPathArr:u,opts:f}=n),h(p.let("data",e._`${n.data}${(0,e.getProperty)(s)}`,!0)),r.errorPath=e.str`${c}${(0,t.getErrorPath)(s,i,f.jsPropertySyntax)}`,r.parentDataProperty=e._`${s}`,r.dataPathArr=[...u,r.parentDataProperty]),void 0!==o&&(h(o instanceof e.Name?o:p.let("data",o,!0)),void 0!==l)&&(r.propertyName=l),a&&(r.dataTypes=a)},Ns.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){void 0!==n&&(e.compositeRule=n),void 0!==s&&(e.createErrors=s),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}}return Ns}(),w=Zn(),k=as(),_=Ms(),$=rs(),E=ls();Vn.validateFunctionCode=function(t){if(n(t)&&(s(t),r(t))){var a=t;let{schema:r,opts:n,gen:s}=a;e(a,()=>{n.$comment&&r.$comment&&o(a);var e,t=a,{schema:l,opts:c}=t;if(void 0!==l.default&&c.useDefaults&&c.strictSchema&&(0,$.checkStrictMode)(t,"default is ignored in the schema root"),s.let(k.default.vErrors,null),s.let(k.default.errors,0),n.unevaluated){var u=a;let{gen:e,validateName:t}=u;u.evaluated=e.const("evaluated",w._`${t}.evaluated`),e.if(w._`${u.evaluated}.dynamicProps`,()=>e.assign(w._`${u.evaluated}.props`,w._`undefined`)),e.if(w._`${u.evaluated}.dynamicItems`,()=>e.assign(w._`${u.evaluated}.items`,w._`undefined`))}i(a);{let{gen:r,schemaEnv:n,validateName:s,ValidationError:i,opts:o}=l=a;n.$async?r.if(w._`${k.default.errors} === 0`,()=>r.return(k.default.data),()=>r.throw(w._`new ${i}(${k.default.vErrors})`)):(r.assign(w._`${s}.errors`,k.default.vErrors),o.unevaluated&&(({gen:l,evaluated:c,props:t,items:e}=[l][0]),t instanceof w.Name&&l.assign(w._`${c}.props`,t),e instanceof w.Name)&&l.assign(w._`${c}.items`,e),r.return(w._`${k.default.errors} === 0`))}})}else e(t,()=>(0,h.topBoolOrEmptySchema)(t))};class S{constructor(e,t,r){if((0,v.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,$.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",p(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,v.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(r+" value must be "+JSON.stringify(t.schemaType));("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",k.default.errors))}result(e,t,r){this.failResult((0,w.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,w.not)(e),void 0,t)}fail(e){void 0===e?(this.error(),this.allErrors||this.gen.if(!1)):(this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else())}fail$data(e){if(!this.$data)return this.fail(e);var t=this.schemaCode;this.fail(w._`${t} !== undefined && (${(0,w.or)(this.invalid$data(),e)})`)}error(e,t,r){t?(this.setParams(t),this._error(e,r),this.setParams({})):this._error(e,r)}_error(e,t){(e?E.reportExtraError:E.reportError)(this,this.def.error,t)}$dataError(){(0,E.reportError)(this,this.def.$dataError||E.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,E.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=w.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=w.nil,t=w.nil){var r,n,s,i;this.$data&&(({gen:r,schemaCode:n,schemaType:s,def:i}=this),r.if((0,w.or)(w._`${n} === undefined`,t)),e!==w.nil&&r.assign(e,!0),(s.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==w.nil)&&r.assign(e,!1),r.else())}invalid$data(){let{gen:e,schemaCode:t,schemaType:r,def:n,it:s}=this;return(0,w.or)((()=>{if(r.length){var e;if(t instanceof w.Name)return e=Array.isArray(r)?r:[r],w._`${(0,y.checkDataTypes)(e,t,s.opts.strictNumbers,y.DataType.Wrong)}`;throw new Error("ajv implementation error")}return w.nil})(),(()=>{var r;return n.validateSchema?(r=e.scopeValue("validate$data",{ref:n.validateSchema}),w._`!${r}(${t})`):w.nil})())}subschema(e,t){var a=(0,b.getSubschema)(this.it,e);return function(e,t){if(n(e)&&(s(e),r(e))){var a=e,l=t,{schema:c,gen:u,opts:f}=a;f.$comment&&c.$comment&&o(a);var p=(c=a).schema[c.opts.schemaId];if(p&&(c.baseId=(0,_.resolveUrl)(c.opts.uriResolver,c.baseId,p)),(c=a).schema.$async&&!c.schemaEnv.$async)throw new Error("async schema in sync schema");i(a,f=u.const("_errs",k.default.errors)),u.var(l,w._`${f} === ${k.default.errors}`)}else(0,h.boolOrEmptySchema)(e,t)}(((0,b.extendSubschemaData)(a,this.it,e),(0,b.extendSubschemaMode)(a,e),e={...this.it,...a,items:void 0,props:void 0}),t),e}mergeEvaluated(e,t){var{it:r,gen:n}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=$.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items)&&void 0!==e.items&&(r.items=$.mergeEvaluated.items(n,e.items,r.items,t))}mergeValidEvaluated(e,t){var{it:r,gen:n}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return n.if(t,()=>this.mergeEvaluated(e,w.Name)),!0}}Vn.KeywordCxt=S;let O=/^\/(?:[^~]|~0|~1)*$/,N=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function e({gen:e,validateName:r,schema:n,schemaEnv:s,opts:i},o){i.code.es5?e.func(r,w._`${k.default.data}, ${k.default.valCxt}`,s.$async,()=>{var r,s;e.code(w._`"use strict"; ${t(n,i)}`),s=i,(r=e).if(k.default.valCxt,()=>{r.var(k.default.instancePath,w._`${k.default.valCxt}.${k.default.instancePath}`),r.var(k.default.parentData,w._`${k.default.valCxt}.${k.default.parentData}`),r.var(k.default.parentDataProperty,w._`${k.default.valCxt}.${k.default.parentDataProperty}`),r.var(k.default.rootData,w._`${k.default.valCxt}.${k.default.rootData}`),s.dynamicRef&&r.var(k.default.dynamicAnchors,w._`${k.default.valCxt}.${k.default.dynamicAnchors}`)},()=>{r.var(k.default.instancePath,w._`""`),r.var(k.default.parentData,w._`undefined`),r.var(k.default.parentDataProperty,w._`undefined`),r.var(k.default.rootData,k.default.data),s.dynamicRef&&r.var(k.default.dynamicAnchors,w._`{}`)}),e.code(o)}):e.func(r,w._`${k.default.data}, ${r=i,w._`{${k.default.instancePath}="", ${k.default.parentData}, ${k.default.parentDataProperty}, ${k.default.rootData}=${k.default.data}${r.dynamicRef?w._`, ${k.default.dynamicAnchors}={}`:w.nil}}={}`}`,s.$async,()=>e.code(t(n,i)).code(o))}function t(e,t){return(e="object"==typeof e&&e[t.schemaId])&&(t.code.source||t.code.process)?w._`/*# sourceURL=${e} */`:w.nil}function r({schema:e,self:t}){if("boolean"==typeof e)return!e;for(var r in e)if(t.RULES.all[r])return 1}function n(e){return"boolean"!=typeof e.schema}function s(e){(0,$.checkUnknownRules)(e);var{schema:e,errSchemaPath:t,opts:r,self:n}=e;e.$ref&&r.ignoreKeywordsWithRef&&(0,$.schemaHasRulesButRef)(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${t}"`)}function i(e,t){if(e.opts.jtd)return a(e,[],!1,t);var r=(0,d.getSchemaTypes)(e.schema);a(e,r,!(0,d.coerceAndCheckDataType)(e,r),t)}function o({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){r=r.$comment,!0===s.$comment?e.code(w._`${k.default.self}.logger.log(${r})`):"function"==typeof s.$comment&&(s=w.str`${n}/$comment`,n=e.scopeValue("root",{ref:t.root}),e.code(w._`${k.default.self}.opts.$comment(${r}, ${s}, ${n}.schema)`))}function a(e,t,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:p,self:h}=e,d=h.RULES;if(!i.$ref||!p.ignoreKeywordsWithRef&&(0,$.schemaHasRulesButRef)(i,d)){if(!p.jtd){var g=e,v=t;if(!g.schemaEnv.meta&&g.opts.strictTypes){var b=g,_=v;if(_.length)if(b.dataTypes.length){_.forEach(e=>{c(b.dataTypes,e)||u(b,`type "${e}" not allowed by context "${b.dataTypes.join(",")}"`)});var E,S=b,O=_,N=[];for(E of S.dataTypes)c(O,E)?N.push(E):O.includes("integer")&&"number"===E&&N.push("integer");S.dataTypes=N}else b.dataTypes=_;g.opts.allowUnionTypes||(S=g,1<(_=v).length&&(2!==_.length||!_.includes("null"))&&u(S,"use allowUnionTypes to allow union type keyword"));var A,P=g,x=g.dataTypes,j=P.self.RULES.all;for(A in j){var I=j[A];"object"==typeof I&&(0,m.shouldUseRule)(P.schema,I)&&(I=I.definition.type).length&&!I.some(e=>{return(t=x).includes(e)||"number"===e&&t.includes("integer");var t})&&u(P,`missing type "${I.join(",")}" for keyword "${A}"`)}}}s.block(()=>{for(var e of d.rules)T(e);T(d.post)})}else s.block(()=>f(e,"$ref",d.all.$ref.definition));function T(c){(0,m.shouldUseGroup)(i,c)&&(c.type?(s.if((0,y.checkDataType)(c.type,o,p.strictNumbers)),l(e,c),1===t.length&&t[0]===c.type&&r&&(s.else(),(0,y.reportTypeError)(e)),s.endIf()):l(e,c),a||s.if(w._`${k.default.errors} === ${n||0}`))}}function l(e,t){let{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,g.assignDefaults)(e,t.type),r.block(()=>{for(var r of t.rules)(0,m.shouldUseRule)(n,r)&&f(e,r.keyword,r.definition,t.type)})}function c(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function u(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,$.checkStrictMode)(e,t,e.opts.strictTypes)}function f(e,t,r,n){e=new S(e,r,t),"code"in r?r.code(e,n):e.$data&&r.validate?(0,v.funcKeywordCode)(e,r):"macro"in r?(0,v.macroKeywordCode)(e,r):(r.compile||r.validate)&&(0,v.funcKeywordCode)(e,r)}function p(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(""===e)return k.default.rootData;if("/"===e[0]){if(!O.test(e))throw new Error("Invalid JSON-pointer: "+e);s=e,i=k.default.rootData}else{var o=N.exec(e);if(!o)throw new Error("Invalid JSON-pointer: "+e);if(e=+o[1],"#"===(s=o[2])){if(t<=e)throw new Error(c("property/index",e));return n[t-e]}if(t<e)throw new Error(c("data",e));if(i=r[t-e],!s)return i}let a=i;var l;for(l of s.split("/"))l&&(i=w._`${i}${(0,w.getProperty)((0,$.unescapeJsonPointer)(l))}`,a=w._`${a} && ${i}`);return a;function c(e,r){return`Cannot access ${e} ${r} levels up, current level is `+t}}Vn.getData=p}return Vn}var Rs,Bs={};function Ks(){if(!Rs){Rs=1,Object.defineProperty(Bs,"__esModule",{value:!0});class e extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Bs.default=e}return Bs}var Us,qs={};function Vs(){if(!Us){Us=1,Object.defineProperty(qs,"__esModule",{value:!0});let e=Ms();class t extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id `+r),this.missingRef=(0,e.resolveUrl)(t,r,n),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(t,this.missingRef))}}qs.default=t}return qs}var Fs,zs={};function Js(){if(!Fs){Fs=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.resolveSchema=zs.getCompilingSchema=zs.resolveRef=zs.compileSchema=zs.SchemaEnv=void 0;let s=Zn(),i=Ks(),o=as(),a=Ms(),l=rs(),c=Ds();class u{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!=(t=e.baseId)?t:(0,a.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}zs.SchemaEnv=u,zs.compileSchema=e,zs.resolveRef=function(t,n,s){s=(0,a.resolveUrl)(this.opts.uriResolver,n,s);var i,o=t.refs[s];if(o)return o;let l=function(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||r.call(this,e,t)}.call(this,t,s);return void 0!==(l=void 0===l&&(o=null==(o=t.localRefs)?void 0:o[s],i=this.opts.schemaId,o)?new u({schema:o,schemaId:i,root:t,baseId:n}):l)?t.refs[s]=function(t){return(0,a.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:e.call(this,t)}.call(this,l):void 0},zs.getCompilingSchema=t,zs.resolveSchema=r;let f=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function e(e){if(r=t.call(this,e))return r;var r=(0,a.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:l}=this.opts.code,u=this.opts.ownProperties,n=new s.CodeGen(this.scope,{es5:n,lines:l,ownProperties:u});let f,p;e.$async&&(f=n.scopeValue("Error",{ref:i.default,code:s._`require("ajv/dist/runtime/validation_error").default`})),l=n.scopeName("validate"),e.validateName=l,u={gen:n,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[s.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:n.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,s.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:f,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:s.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:s._`""`,opts:this.opts,self:this};try{this._compilations.add(e),(0,c.validateFunctionCode)(u),n.optimize(this.opts.code.optimize);var h=n.toString();p=n.scopeRefs(o.default.scope)+"return "+h,this.opts.code.process&&(p=this.opts.code.process(p,e));var d,m,y=new Function(""+o.default.self,""+o.default.scope,p)(this,this.scope.get());return this.scope.value(l,{ref:y}),y.errors=null,y.schema=e.schema,(y.schemaEnv=e).$async&&(y.$async=!0),!0===this.opts.code.source&&(y.source={validateName:l,validateCode:h,scopeValues:n._values}),this.opts.unevaluated&&(({props:d,items:m}=u),y.evaluated={props:d instanceof s.Name?void 0:d,items:m instanceof s.Name?void 0:m,dynamicProps:d instanceof s.Name,dynamicItems:m instanceof s.Name},y.source)&&(y.source.evaluated=(0,s.stringify)(y.evaluated)),e.validate=y,e}catch(r){throw delete e.validate,delete e.validateName,p&&this.logger.error("Error compiling schema, function code:",p),r}finally{this._compilations.delete(e)}}function t(e){for(var t of this._compilations)if(n=e,(r=t).schema===n.schema&&r.root===n.root&&r.baseId===n.baseId)return t;var r,n}function r(t,s){var i,o,l=this.opts.uriResolver.parse(s),c=(0,a._getFullPath)(this.opts.uriResolver,l);let f=(0,a.getFullPath)(this.opts.uriResolver,t.baseId,void 0);return 0<Object.keys(t.schema).length&&c===f?n.call(this,l,t):(c=(0,a.normalizeId)(c),"string"==typeof(i=this.refs[c]||this.schemas[c])?"object"!=typeof(null==(o=r.call(this,t,i))?void 0:o.schema)?void 0:n.call(this,l,o):"object"==typeof(null==i?void 0:i.schema)?(i.validate||e.call(this,i),c===(0,a.normalizeId)(s)?((s=(o=i.schema)[c=this.opts.schemaId])&&(f=(0,a.resolveUrl)(this.opts.uriResolver,f,s)),new u({schema:o,schemaId:c,root:t,baseId:f})):n.call(this,l,i)):void 0)}function n(e,{baseId:t,schema:n,root:s}){if("/"===(null==(c=e.fragment)?void 0:c[0])){for(var i of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;var o=n[(0,l.unescapeFragment)(i)];if(void 0===o)return;o="object"==typeof(n=o)&&n[this.opts.schemaId],!f.has(i)&&o&&(t=(0,a.resolveUrl)(this.opts.uriResolver,t,o))}let p;var c;return e=("boolean"!=typeof n&&n.$ref&&!(0,l.schemaHasRulesButRef)(n,this.RULES)&&(c=(0,a.resolveUrl)(this.opts.uriResolver,t,n.$ref),p=r.call(this,s,c)),this.opts).schemaId,(p=p||new u({schema:n,schemaId:e,root:s,baseId:t})).schema!==p.root.schema?p:void 0}}}return zs}var Gs,Hs,Ws,Ys,Qs,Xs,Zs,ei,ti,ri={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},ni={},si={exports:{}};function ii(){if(!Zs){Zs=1;let{normalizeIPv6:s,normalizeIPv4:i,removeDotSegments:o,recomposeAuthority:a,normalizeComponentEncoding:l}=function(){if(!Ys){Ys=1;let s=(Gs=Hs?Gs:{HEX:{0:0,1:Hs=1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}).HEX,i=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u,o=/^\.\.?\//u,a=/^\/\.(?:\/|$)/u,l=/^\/\.\.(?:\/|$)/u,c=/^\/?(?:.|\n)*?(?=\/|$)/u;function e(e){var t;return n(e,".")<3||([t]=e.match(i)||[],!t)?{host:e,isIPV4:!1}:{host:(e=>{let t="",r=!0,n=e.length;for(let i=0;i<n;i++){var s=e[i];"0"===s&&r?(i+1<=n&&"."===e[i+1]||i+1===n)&&(t+=s,r=!1):(r="."===s,t+=s)}return t})(t),isIPV4:!0}}function t(e,t=!1){let r="",n=!0;for(var i of e){if(void 0===s[i])return;(n=("0"===i||!0!==n)&&n)||(r+=i)}return t&&0===r.length?"0":r}function r(e){if(n(e,":")<2)return{host:e,isIPV6:!1};var r=(e=>{let r=0,n={error:!1,address:"",zone:""},s=[],i=[],o=!1,a=!1,l=!1;function c(){if(i.length){if(!1===o){var e=t(i);if(void 0===e)return void(n.error=!0);s.push(e)}i.length=0}return 1}for(let t=0;t<e.length;t++){var u=e[t];if("["!==u&&"]"!==u)if(":"===u){if(!0===a&&(l=!0),!c())break;if(r++,s.push(":"),7<r){n.error=!0;break}0<=t-1&&":"===e[t-1]&&(a=!0)}else if("%"!==u)i.push(u);else{if(!c())break;o=!0}}return i.length&&(o?n.zone=i.join(""):l?s.push(i.join("")):s.push(t(i))),n.address=s.join(""),n})(e);if(r.error)return{host:e,isIPV6:!1};{let e=r.address,t=r.address;return r.zone&&(e+="%"+r.zone,t+="%25"+r.zone),{host:e,escapedHost:t,isIPV6:!0}}}function n(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}Ws={recomposeAuthority:function(t){var n=[];if(void 0!==t.userinfo&&(n.push(t.userinfo),n.push("@")),void 0!==t.host){let i=unescape(t.host);var s=e(i);i=s.isIPV4?s.host:!0===(s=r(s.host)).isIPV6?`[${s.escapedHost}]`:t.host,n.push(i)}return"number"!=typeof t.port&&"string"!=typeof t.port||(n.push(":"),n.push(String(t.port))),n.length?n.join(""):void 0},normalizeComponentEncoding:function(e,t){return t=!0!==t?escape:unescape,void 0!==e.scheme&&(e.scheme=t(e.scheme)),void 0!==e.userinfo&&(e.userinfo=t(e.userinfo)),void 0!==e.host&&(e.host=t(e.host)),void 0!==e.path&&(e.path=t(e.path)),void 0!==e.query&&(e.query=t(e.query)),void 0!==e.fragment&&(e.fragment=t(e.fragment)),e},removeDotSegments:function(e){for(var t=[];e.length;)if(e.match(o))e=e.replace(o,"");else if(e.match(a))e=e.replace(a,"/");else if(e.match(l))e=e.replace(l,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(c);if(!r)throw new Error("Unexpected dot segment condition");r=r[0],e=e.slice(r.length),t.push(r)}return t.join("")},normalizeIPv4:e,normalizeIPv6:r,stringArrayToHexStripped:t}}return Ws}(),c=function(){if(Xs)return Qs;Xs=1;let e=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function r(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}function n(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function s(e){var t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}var i={scheme:"http",domainHost:!0,parse:n,serialize:s},o={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=r(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){var t,n;return e.port!==(r(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName&&([t,n]=e.resourceName.split("?"),e.path=t&&"/"!==t?t:void 0,e.query=n,e.resourceName=void 0),e.fragment=void 0,e}};let a={http:i,https:{scheme:"https",domainHost:i.domainHost,parse:n,serialize:s},ws:o,wss:{scheme:"wss",domainHost:o.domainHost,parse:o.parse,serialize:o.serialize},urn:{scheme:"urn",parse:function(e,r){var n,s;return e.path?(n=e.path.match(t))?(s=r.scheme||e.scheme||"urn",e.nid=n[1].toLowerCase(),e.nss=n[2],n=s+":"+(r.nid||e.nid),s=a[n],e.path=void 0,s&&(e=s.parse(e,r))):e.error=e.error||"URN can not be parsed.":e.error="URN can not be parsed",e},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase();return r=r+":"+(t.nid||n),r=e=(r=a[r])?r.serialize(e,t):e,e=e.nss,r.path=`${n||t.nid}:`+e,t.skipEscape=!0,r},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(t,r){return t.uuid=t.nss,t.nss=void 0,r.tolerant||t.uuid&&e.test(t.uuid)||(t.error=t.error||"UUID is not valid."),t},serialize:function(e){var t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};return Qs=a}(),u=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t))),f=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;var e={SCHEMES:c,normalize:function(e,t){return"string"==typeof e?e=r(n(e,t),t):"object"==typeof e&&(e=n(r(e,t),t)),e},resolve:function(e,s,i){return r(t(n(e,i=Object.assign({scheme:"null"},i)),n(s,i),i,!0),{...i,skipEscape:!0})},resolveComponents:t,equal:function(e,t,s){return"string"==typeof e?(e=unescape(e),e=r(l(n(e,s),!0),{...s,skipEscape:!0})):"object"==typeof e&&(e=r(l(e,!0),{...s,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=r(l(n(t,s),!0),{...s,skipEscape:!0})):"object"==typeof t&&(t=r(l(t,!0),{...s,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:r,parse:n};function t(e,t,s,i){var a={};return i||(e=n(r(e,s),s),t=n(r(t,s),s)),!(s=s||{}).tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=o(t.path||""),a.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=o(t.path||""),a.query=t.query):(t.path?("/"===t.path.charAt(0)?a.path=o(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path:a.path="/"+t.path,a.path=o(a.path)),a.query=t.query):(a.path=e.path,void 0!==t.query?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function r(e,t){e={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},t=Object.assign({},t);var r=[],n=c[(t.scheme||e.scheme||"").toLowerCase()],s=(n&&n.serialize&&n.serialize(e,t),void 0!==e.path&&(t.skipEscape?e.path=unescape(e.path):(e.path=escape(e.path),void 0!==e.scheme&&(e.path=e.path.split("%3A").join(":")))),"suffix"!==t.reference&&e.scheme&&r.push(e.scheme,":"),a(e));if(void 0!==s&&("suffix"!==t.reference&&r.push("//"),r.push(s),e.path)&&"/"!==e.path.charAt(0)&&r.push("/"),void 0!==e.path){let i=e.path;t.absolutePath||n&&n.absolutePath||(i=o(i)),void 0===s&&(i=i.replace(/^\/\//u,"/%2F")),r.push(i)}return void 0!==e.query&&r.push("?",e.query),void 0!==e.fragment&&r.push("#",e.fragment),r.join("")}function n(e,t){t=Object.assign({},t);var r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},n=-1!==e.indexOf("%");let o=!1;if(e=(e="suffix"===t.reference?(t.scheme?t.scheme+":":"")+"//"+e:e).match(f)){r.scheme=e[1],r.userinfo=e[3],r.host=e[4],r.port=parseInt(e[5],10),r.path=e[6]||"",r.query=e[7],r.fragment=e[8],isNaN(r.port)&&(r.port=e[5]),r.host&&(o=!1===(e=i(r.host)).isIPV4?(a=s(e.host),r.host=a.host.toLowerCase(),a.isIPV6):(r.host=e.host,!0)),r.reference=void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||void 0!==r.query||r.path?void 0===r.scheme?"relative":void 0===r.fragment?"absolute":"uri":"same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var a=c[(t.scheme||r.scheme||"").toLowerCase()];if(!(t.unicodeSupport||a&&a.unicodeSupport)&&r.host&&(t.domainHost||a&&a.domainHost)&&!1===o&&(e=>{var t;for(let r=0,n=e.length;r<n;++r)if(126<(t=e.charCodeAt(r))||u[t])return 1})(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII: "+e}a&&a.skipNormalize||(n&&void 0!==r.scheme&&(r.scheme=unescape(r.scheme)),n&&void 0!==r.host&&(r.host=unescape(r.host)),r.path&&(r.path=escape(unescape(r.path))),r.fragment&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),a&&a.parse&&a.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}si.exports=e,si.exports.default=e,si.exports.fastUri=e}return si.exports}function oi(){if(!ti){ti=1;{var e=qn;Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t,r=Ds(),n=(Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return r.KeywordCxt}}),Zn()),s=(Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}}),Ks());let c=Vs(),u=ps(),f=Js(),p=Zn(),h=Ms(),d=gs(),m=rs(),y=ri,g=(ei||(ei=1,Object.defineProperty(ni,"__esModule",{value:!0}),(t=ii()).code='require("ajv/dist/runtime/uri").default',ni.default=t),ni),v=(e,t)=>new RegExp(e,t),b=(v.code="new RegExp",["removeAdditional","useDefaults","coerceTypes"]),w=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),k={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},_={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},$=200;class E{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...(t=e,o=t.strict,r=!0===(r=null==(r=t.code)?void 0:r.optimize)||void 0===r?1:r||0,s=null!=(s=null==(s=t.code)?void 0:s.regExp)?s:v,n=null!=(n=t.uriResolver)?n:g.default,{strictSchema:null==(a=null!=(a=t.strictSchema)?a:o)||a,strictNumbers:null==(a=null!=(a=t.strictNumbers)?a:o)||a,strictTypes:null!=(a=null!=(a=t.strictTypes)?a:o)?a:"log",strictTuples:null!=(a=null!=(a=t.strictTuples)?a:o)?a:"log",strictRequired:null!=(a=null!=(a=t.strictRequired)?a:o)&&a,code:t.code?{...t.code,optimize:r,regExp:s}:{optimize:r,regExp:s},loopRequired:null!=(o=t.loopRequired)?o:$,loopEnum:null!=(a=t.loopEnum)?a:$,meta:null==(r=t.meta)||r,messages:null==(s=t.messages)||s,inlineRefs:null==(o=t.inlineRefs)||o,schemaId:null!=(a=t.schemaId)?a:"$id",addUsedSchema:null==(r=t.addUsedSchema)||r,validateSchema:null==(s=t.validateSchema)||s,validateFormats:null==(o=t.validateFormats)||o,unicodeRegExp:null==(a=t.unicodeRegExp)||a,int32range:null==(r=t.int32range)||r,uriResolver:n})};var t,r,n,{es5:s,lines:o}=this.opts.code,a=(this.scope=new p.ValueScope({scope:{},prefixes:w,es5:s,lines:o}),this.logger=(e=>{if(!1===e)return S;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")})(e.logger),e.validateFormats);e.validateFormats=!1,this.RULES=(0,u.getRules)(),i.call(this,k,e,"NOT SUPPORTED"),i.call(this,_,e,"DEPRECATED","warn"),this._metaOpts=function(){var e={...this.opts};for(var t of b)delete e[t];return e}.call(this),e.formats&&function(){for(var e in this.opts.formats){var t=this.opts.formats[e];t&&this.addFormat(e,t)}}.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&function(e){if(Array.isArray(e))this.addVocabulary(e);else for(var t in this.logger.warn("keywords option as map is deprecated, pass array"),e){var r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),function(){var e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(var t in e)this.addSchema(e[t],t)}.call(this),e.validateFormats=a}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){var{$data:e,meta:t,schemaId:r}=this.opts;let n=y;"id"===r&&((n={...y}).id=n.$id,delete n.$id),t&&e&&this.addMetaSchema(n,n[r],!1)}defaultMeta(){var{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);return e=r(t),"$async"in r||(this.errors=r.errors),e}compile(e,t){return(e=this._addSchema(e,t)).validate||this._compileSchemaEnv(e)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");let r=this.opts.loadSchema;return n.call(this,e,t);async function n(e,t){return await s.call(this,e.$schema),(e=this._addSchema(e,t)).validate||i.call(this,e)}async function s(e){e&&!this.getSchema(e)&&await n.call(this,{$ref:e},!0)}async function i(e){try{return this._compileSchemaEnv(e)}catch(n){if(n instanceof c.default)return function({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}.call(this,n),await async function(e){var n=await async function(e){var t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}.call(this,e);this.refs[e]||await s.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}.call(this,n.missingSchema),i.call(this,e);throw n}}}addSchema(e,t,r,n=this.opts.validateSchema){if(Array.isArray(e))for(var s of e)this.addSchema(s,void 0,r,n);else{let s;if("object"==typeof e){var i=this.opts.schemaId;if(void 0!==(s=e[i])&&"string"!=typeof s)throw new Error(`schema ${i} must be string`)}t=(0,h.normalizeId)(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,n,!0)}return this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),!(this.errors=null);if(!(r=this.validate(r,e))&&t){if(e="schema is invalid: "+this.errorsText(),"log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=o.call(this,e));)e=t;if(void 0===t){var r=this.opts.schemaId;if(r=new f.SchemaEnv({schema:{},schemaId:r}),!(t=f.resolveSchema.call(this,r,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":var t=o.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this;case"object":return this._cache.delete(e),(t=e[this.opts.schemaId])&&(t=(0,h.normalizeId)(t),delete this.schemas[t],delete this.refs[t]),this;default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(var t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(function(e,t){let r=this.RULES;if((0,m.eachItem)(e,e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!O.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}.call(this,r,t),t){(function(e){let t=e.metaSchema;void 0!==t&&(e.$data&&this.opts.$data&&(t=l(t)),e.validateSchema=this.compile(t,!0))}).call(this,t);let e={...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)};(0,m.eachItem)(r,0===e.type.length?t=>a.call(this,t,e):t=>e.type.forEach(r=>a.call(this,t,e,r)))}else(0,m.eachItem)(r,e=>a.call(this,e));return this}getKeyword(e){return"object"==typeof(e=this.RULES.all[e])?e.definition:!!e}removeKeyword(e){var t,r=this.RULES;for(t of(delete r.keywords[e],delete r.all[e],r.rules)){var n=t.rules.findIndex(t=>t.keyword===e);0<=n&&t.rules.splice(n,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>""+r+e.instancePath+" "+e.message).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){var r,n,s,i=this.RULES.all;for(r of(e=JSON.parse(JSON.stringify(e)),t)){let t=e;for(n of r.split("/").slice(1))t=t[n];for(s in i){var o,a=i[s];"object"==typeof a&&(a=a.definition.$data,o=t[s],a&&o)&&(t[s]=l(o))}}return e}_removeAllSchemas(e,t){for(var r in e){var n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}_addSchema(e,t,r,n=this.opts.validateSchema,s=this.opts.addUsedSchema){let i;var o=this.opts.schemaId;if("object"==typeof e)i=e[o];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}var a,l=this._cache.get(e);return void 0===l&&(r=(0,h.normalizeId)(i||r),a=h.getSchemaRefs.call(this,e,r),l=new f.SchemaEnv({schema:e,schemaId:o,meta:t,baseId:r,localRefs:a}),this._cache.set(l.schema,l),s&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=l),n)&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):f.compileSchema.call(this,e),e.validate)return e.validate;throw new Error("ajv implementation error")}_compileMetaSchema(e){var t=this.opts;this.opts=this._metaOpts;try{f.compileSchema.call(this,e)}finally{this.opts=t}}}function i(e,t,r,n="error"){for(var s in e){var i=s;i in t&&this.logger[n](`${r}: option ${s}. `+e[i])}}function o(e){return e=(0,h.normalizeId)(e),this.schemas[e]||this.refs[e]}E.ValidationError=s.default,E.MissingRefError=c.default,e.default=E;let S={log(){},warn(){},error(){}},O=/^[a-z_$][a-z0-9_$:-]*$/i;function a(e,t,r){var n=null==t?void 0:t.post;if(r&&n)throw new Error('keyword with "post" flag cannot have "type"');var s=this.RULES;let i=n?s.post:s.rules.find(({type:e})=>e===r);i||(i={type:r,rules:[]},s.rules.push(i)),s.keywords[e]=!0,t&&(n={keyword:e,definition:{...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)}},t.before?function(e,t,r){var n=e.rules.findIndex(e=>e.keyword===r);0<=n?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}.call(this,i,n,t.before):i.rules.push(n),s.all[e]=n,null!=(s=t.implements))&&s.forEach(e=>this.addKeyword(e))}let N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function l(e){return{anyOf:[e,N]}}}}return qn}var ai,li,ci,ui={},fi={},pi={},hi={};function di(){var e,t;return ci||(ci=1,Object.defineProperty(fi,"__esModule",{value:!0}),ai||(ai=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.default={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}),t=pi,e=function(){if(!li){li=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.callRef=hi.getValidate=void 0;let n=Vs(),s=Es(),i=Zn(),o=as(),a=Js(),l=rs();var e={keyword:"$ref",schemaType:"string",code(e){let{gen:s,schema:o,it:l}=e,{baseId:c,schemaEnv:u,validateName:f,opts:p,self:h}=l,d=u.root;if(("#"===o||"#/"===o)&&c===d.baseId)return u===d?r(e,f,u,u.$async):(v=s.scopeValue("root",{ref:d}),r(e,i._`${v}.validate`,d,d.$async));var m,y,g,v=a.resolveRef.call(h,d,c,o);if(void 0===v)throw new n.default(l.opts.uriResolver,c,o);if(!(v instanceof a.SchemaEnv))return m=v,y=s.scopeValue("schema",!0===p.code.source?{ref:m,code:(0,i.stringify)(m)}:{ref:m}),g=s.name("valid"),m=e.subschema({schema:m,dataTypes:[],schemaPath:i.nil,topSchemaRef:y,errSchemaPath:o},g),e.mergeEvaluated(m),void e.ok(g);r(e,m=t(e,y=v),y,y.$async)}};function t(e,t){return e=e.gen,t.validate?e.scopeValue("validate",{ref:t.validate}):i._`${e.scopeValue("wrapper",{ref:t})}.validate`}function r(e,t,r,n){let{gen:a,it:c}=e,{allErrors:u,schemaEnv:f,opts:p}=c,h=p.passContext?o.default.this:i.nil;if(n){if(!f.$async)throw new Error("async schema referenced by sync schema");let r=a.let("valid");a.try(()=>{a.code(i._`await ${(0,s.callValidateCode)(e,t,h)}`),m(t),u||a.assign(r,!0)},e=>{a.if(i._`!(${e} instanceof ${c.ValidationError})`,()=>a.throw(e)),d(e),u||a.assign(r,!1)}),e.ok(r)}else e.result((0,s.callValidateCode)(e,t,h),()=>m(t),()=>d(t));function d(e){e=i._`${e}.errors`,a.assign(o.default.vErrors,i._`${o.default.vErrors} === null ? ${e} : ${o.default.vErrors}.concat(${e})`),a.assign(o.default.errors,i._`${o.default.vErrors}.length`)}function m(e){var t,n;c.opts.unevaluated&&(t=null==(t=null==r?void 0:r.validate)?void 0:t.evaluated,!0!==c.props&&(t&&!t.dynamicProps?void 0!==t.props&&(c.props=l.mergeEvaluated.props(a,t.props,c.props)):(n=a.var("props",i._`${e}.evaluated.props`),c.props=l.mergeEvaluated.props(a,n,c.props,i.Name))),!0!==c.items)&&(t&&!t.dynamicItems?void 0!==t.items&&(c.items=l.mergeEvaluated.items(a,t.items,c.items)):(n=a.var("items",i._`${e}.evaluated.items`),c.items=l.mergeEvaluated.items(a,n,c.items,i.Name)))}}hi.getValidate=t,hi.callRef=r,hi.default=e}return hi}(),t=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,e.default],fi.default=t),fi}var mi,yi,gi,vi,bi={},wi={},ki={},_i={},$i={};var Ei,Si,Oi,Ni={},Ai={},Pi={};var xi,ji,Ii,Ti={},Ci={},Li={};function Mi(){var e;return ji||(ji=1,Object.defineProperty(Li,"__esModule",{value:!0}),(e=js()).code='require("ajv/dist/runtime/equal").default',Li.default=e),Li}var Di,Ri,Bi,Ki={},Ui={};function qi(){var e,t,r,n,s,i,o,a,l,c;return Bi||(Bi=1,Object.defineProperty(bi,"__esModule",{value:!0}),c=(()=>{if(!mi){mi=1,Object.defineProperty(wi,"__esModule",{value:!0});let t=Zn();var e=t.operators;let r={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}};e={message:({keyword:e,schemaCode:n})=>t.str`must be ${r[e].okStr} ${n}`,params:({keyword:e,schemaCode:n})=>t._`{comparison: ${r[e].okStr}, limit: ${n}}`},e={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:e,code(e){var{keyword:n,data:s,schemaCode:i}=e;e.fail$data(t._`${s} ${r[n].fail} ${i} || isNaN(${s})`)}},wi.default=e}return wi})(),e=(()=>{if(!yi){yi=1,Object.defineProperty(ki,"__esModule",{value:!0});let e=Zn();ki.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:t})=>e.str`must be multiple of ${t}`,params:({schemaCode:t})=>e._`{multipleOf: ${t}}`},code(t){var{gen:r,data:n,schemaCode:s,it:i}=t,r=(i=i.opts.multipleOfPrecision,r.let("res")),i=i?e._`Math.abs(Math.round(${r}) - ${r}) > 1e-${i}`:e._`${r} !== parseInt(${r})`;t.fail$data(e._`(${s} === 0 || (${r} = ${n}/${s}, ${i}))`)}}}return ki})(),t=function(){if(!vi){vi=1,Object.defineProperty(_i,"__esModule",{value:!0});let e=Zn(),t=rs(),r=(gi||(gi=1,Object.defineProperty($i,"__esModule",{value:!0}),($i.default=function(e){var t,r=e.length;let n=0,s=0;for(;s<r;)n++,55296<=(t=e.charCodeAt(s++))&&t<=56319&&s<r&&56320==(64512&e.charCodeAt(s))&&s++;return n}).code='require("ajv/dist/runtime/ucs2length").default'),$i);_i.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:t,schemaCode:r})=>(t="maxLength"===t?"more":"fewer",e.str`must NOT have ${t} than ${r} characters`),params:({schemaCode:t})=>e._`{limit: ${t}}`},code(n){var{keyword:s,data:i,schemaCode:o,it:a}=n,s="maxLength"===s?e.operators.GT:e.operators.LT,a=!1===a.opts.unicode?e._`${i}.length`:e._`${(0,t.useFunc)(n.gen,r.default)}(${i})`;n.fail$data(e._`${a} ${s} ${o}`)}}}return _i}(),r=(()=>{if(!Ei){Ei=1,Object.defineProperty(Ni,"__esModule",{value:!0});let e=Es(),t=Zn();Ni.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>t.str`must match pattern "${e}"`,params:({schemaCode:e})=>t._`{pattern: ${e}}`},code(r){var{data:n,$data:s,schema:i,schemaCode:o,it:a}=r,a=a.opts.unicodeRegExp?"u":"",s=s?t._`(new RegExp(${o}, ${a}))`:(0,e.usePattern)(r,i);r.fail$data(t._`!${s}.test(${n})`)}}}return Ni})(),n=(()=>{if(!Si){Si=1,Object.defineProperty(Ai,"__esModule",{value:!0});let e=Zn();Ai.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:t,schemaCode:r})=>(t="maxProperties"===t?"more":"fewer",e.str`must NOT have ${t} than ${r} properties`),params:({schemaCode:t})=>e._`{limit: ${t}}`},code(t){var{keyword:r,data:n,schemaCode:s}=t,r="maxProperties"===r?e.operators.GT:e.operators.LT;t.fail$data(e._`Object.keys(${n}).length ${r} ${s}`)}}}return Ai})(),s=function(){if(!Oi){Oi=1,Object.defineProperty(Pi,"__esModule",{value:!0});let e=Es(),t=Zn(),r=rs();Pi.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>t.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>t._`{missingProperty: ${e}}`},code(n){let{gen:s,schema:i,schemaCode:o,data:a,$data:l,it:c}=n,u=c.opts;if(l||0!==i.length){let y=i.length>=u.loopRequired;if(c.allErrors)if(y||l)n.block$data(t.nil,function(){s.forOf("prop",o,t=>{n.setParams({missingProperty:t}),s.if((0,e.noPropertyInData)(s,a,t,u.ownProperties),()=>n.error())})});else for(var f of i)(0,e.checkReportMissingProp)(n,f);else{let r=s.let("missing");if(y||l){let i=s.let("valid",!0);n.block$data(i,()=>{return l=r,c=i,n.setParams({missingProperty:l}),void s.forOf(l,o,()=>{s.assign(c,(0,e.propertyInData)(s,a,l,u.ownProperties)),s.if((0,t.not)(c),()=>{n.error(),s.break()})},t.nil);var l,c}),n.ok(i)}else s.if((0,e.checkMissingProp)(n,i,r)),(0,e.reportMissingProp)(n,r),s.else()}if(u.strictRequired){var p,h,d=n.parentSchema.properties,m=n.it.definedProperties;for(p of i)void 0!==(null==d?void 0:d[p])||m.has(p)||(h=`required property "${p}" is not defined at "${h=c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`,(0,r.checkStrictMode)(c,h,c.opts.strictRequired))}}}}}return Pi}(),i=(()=>{if(!xi){xi=1,Object.defineProperty(Ti,"__esModule",{value:!0});let e=Zn();Ti.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:t,schemaCode:r})=>(t="maxItems"===t?"more":"fewer",e.str`must NOT have ${t} than ${r} items`),params:({schemaCode:t})=>e._`{limit: ${t}}`},code(t){var{keyword:r,data:n,schemaCode:s}=t,r="maxItems"===r?e.operators.GT:e.operators.LT;t.fail$data(e._`${n}.length ${r} ${s}`)}}}return Ti})(),o=function(){if(!Ii){Ii=1,Object.defineProperty(Ci,"__esModule",{value:!0});let e=gs(),t=Zn(),r=rs(),n=Mi();Ci.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:r}})=>t.str`must NOT have duplicate items (items ## ${r} and ${e} are identical)`,params:({params:{i:e,j:r}})=>t._`{i: ${e}, j: ${r}}`},code(s){let{gen:i,data:o,$data:a,schema:l,parentSchema:c,schemaCode:u,it:f}=s;if(a||l){let a=i.let("valid"),l=c.items?(0,e.getSchemaTypes)(c.items):[];s.block$data(a,function(){let c=i.let("i",t._`${o}.length`),u=i.let("j");s.setParams({i:c,j:u}),i.assign(a,!0),i.if(t._`${c} > 1`,()=>(0<l.length&&!l.some(e=>"object"===e||"array"===e)?function(r,n){let c=i.name("item"),u=(0,e.checkDataTypes)(l,c,f.opts.strictNumbers,e.DataType.Wrong),p=i.const("indices",t._`{}`);i.for(t._`;${r}--;`,()=>{i.let(c,t._`${o}[${r}]`),i.if(u,t._`continue`),1<l.length&&i.if(t._`typeof ${c} == "string"`,t._`${c} += "_"`),i.if(t._`typeof ${p}[${c}] == "number"`,()=>{i.assign(n,t._`${p}[${c}]`),s.error(),i.assign(a,!1).break()}).code(t._`${p}[${c}] = ${r}`)})}:function(e,l){let c=(0,r.useFunc)(i,n.default),u=i.name("outer");i.label(u).for(t._`;${e}--;`,()=>i.for(t._`${l} = ${e}; ${l}--;`,()=>i.if(t._`${c}(${o}[${e}], ${o}[${l}])`,()=>{s.error(),i.assign(a,!1).break(u)})))})(c,u))},t._`${u} === false`),s.ok(a)}}}}return Ci}(),a=(()=>{if(!Di){Di=1,Object.defineProperty(Ki,"__esModule",{value:!0});let e=Zn(),t=rs(),r=Mi();Ki.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:t})=>e._`{allowedValue: ${t}}`},code(n){var{gen:s,data:i,$data:o,schemaCode:a,schema:l}=n;o||l&&"object"==typeof l?n.fail$data(e._`!${(0,t.useFunc)(s,r.default)}(${i}, ${a})`):n.fail(e._`${l} !== ${i}`)}}}return Ki})(),l=function(){if(!Ri){Ri=1,Object.defineProperty(Ui,"__esModule",{value:!0});let e=Zn(),t=rs(),r=Mi();Ui.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:t})=>e._`{allowedValues: ${t}}`},code(n){let{gen:s,data:i,$data:o,schema:a,schemaCode:l,it:c}=n;if(!o&&0===a.length)throw new Error("enum must have non-empty array");var u=a.length>=c.opts.loopEnum;let f,p,h=()=>null!=f?f:f=(0,t.useFunc)(s,r.default);if(u||o)p=s.let("valid"),n.block$data(p,function(){s.assign(p,!1),s.forOf("v",l,t=>s.if(e._`${h()}(${i}, ${t})`,()=>s.assign(p,!0).break()))});else{if(!Array.isArray(a))throw new Error("ajv implementation error");let t=s.const("vSchema",l);p=(0,e.or)(...a.map((r,n)=>{return s=t,"object"==typeof(o=a[n])&&null!==o?e._`${h()}(${i}, ${s}[${n}])`:e._`${i} === ${o}`;var s,o}))}n.pass(p)}}}return Ui}(),c=[c.default,e.default,t.default,r.default,n.default,s.default,i.default,o.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},a.default,l.default],bi.default=c),bi}var Vi,Fi={},zi={};function Ji(){if(!Vi){Vi=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.validateAdditionalItems=void 0;let r=Zn(),n=rs();var e={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){var{parentSchema:r,it:s}=e,r=r.items;Array.isArray(r)?t(e,r):(0,n.checkStrictMode)(s,'"additionalItems" is ignored when "items" is not an array of schemas')}};function t(e,t){let{gen:s,schema:i,data:o,keyword:a,it:l}=e,c=(l.items=!0,s.const("len",r._`${o}.length`));if(!1===i)e.setParams({len:t.length}),e.pass(r._`${c} <= ${t.length}`);else if("object"==typeof i&&!(0,n.alwaysValidSchema)(l,i)){let i=s.var("valid",r._`${c} <= ${t.length}`);s.if((0,r.not)(i),()=>{var o;o=i,s.forRange("i",t.length,c,t=>{e.subschema({keyword:a,dataProp:t,dataPropType:n.Type.Num},o),l.allErrors||s.if((0,r.not)(o),()=>s.break())})}),e.ok(i)}}zi.validateAdditionalItems=t,zi.default=e}return zi}var Gi,Hi,Wi={},Yi={};function Qi(){if(!Gi){Gi=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.validateTuple=void 0;let r=Zn(),n=rs(),s=Es();var e={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){var{schema:r,it:i}=e;if(Array.isArray(r))return t(e,"additionalItems",r);i.items=!0,(0,n.alwaysValidSchema)(i,r)||e.ok((0,s.validateArray)(e))}};function t(e,t,s=e.schema){let{gen:i,parentSchema:o,data:a,keyword:l,it:c}=e;var u=o,{opts:f,errSchemaPath:p}=c,h=s.length;u=h===u.minItems&&(h===u.maxItems||!1===u[t]),f.strictTuples&&!u&&(u=`"${l}" is ${h}-tuple, but minItems or maxItems/${t} are not specified or different at path "${p}"`,(0,n.checkStrictMode)(c,u,f.strictTuples)),c.opts.unevaluated&&s.length&&!0!==c.items&&(c.items=n.mergeEvaluated.items(i,s.length,c.items));let d=i.name("valid"),m=i.const("len",r._`${a}.length`);s.forEach((t,s)=>{(0,n.alwaysValidSchema)(c,t)||(i.if(r._`${m} > ${s}`,()=>e.subschema({keyword:l,schemaProp:s,dataProp:s},d)),e.ok(d))})}Yi.validateTuple=t,Yi.default=e}return Yi}var Xi,Zi,eo={},to={};var ro,no={};var so,io,oo={},ao={};function lo(){if(!io){io=1,Object.defineProperty(ao,"__esModule",{value:!0});let e=Es(),t=Zn(),r=as(),n=rs();ao.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>t._`{additionalProperty: ${e.additionalProperty}}`},code(s){let{gen:i,schema:o,parentSchema:a,data:l,errsCount:c,it:u}=s;if(!c)throw new Error("ajv implementation error");let{allErrors:f,opts:p}=u;if(u.props=!0,"all"===p.removeAdditional||!(0,n.alwaysValidSchema)(u,o)){let y=(0,e.allSchemaProperties)(a.properties),g=(0,e.allSchemaProperties)(a.patternProperties);function h(e){i.code(t._`delete ${l}[${e}]`)}function d(e){var r;"all"===p.removeAdditional||p.removeAdditional&&!1===o?h(e):!1===o?(s.setParams({additionalProperty:e}),s.error(),f||i.break()):"object"!=typeof o||(0,n.alwaysValidSchema)(u,o)||(r=i.name("valid"),"failing"===p.removeAdditional?(m(e,r,!1),i.if((0,t.not)(r),()=>{s.reset(),h(e)})):(m(e,r),f||i.if((0,t.not)(r),()=>i.break())))}function m(e,t,r){e={keyword:"additionalProperties",dataProp:e,dataPropType:n.Type.Str},!1===r&&Object.assign(e,{compositeRule:!0,createErrors:!1,allErrors:!1}),s.subschema(e,t)}i.forIn("key",l,r=>{y.length||g.length?i.if((r=>{let o;var l;return o=8<y.length?(l=(0,n.schemaRefOrVal)(u,a.properties,"properties"),(0,e.isOwnProperty)(i,l,r)):y.length?(0,t.or)(...y.map(e=>t._`${r} === ${e}`)):t.nil,g.length&&(o=(0,t.or)(o,...g.map(n=>t._`${(0,e.usePattern)(s,n)}.test(${r})`))),(0,t.not)(o)})(r),()=>d(r)):d(r)}),s.ok(t._`${c} === ${r.default.errors}`)}}}}return ao}var co,uo={};var fo,po={};var ho,mo,yo,go,vo,bo={},wo={},ko={},_o={},$o={};var Eo,So,Oo={};function No(){if(!So){So=1,Object.defineProperty(Fi,"__esModule",{value:!0});let t=Ji(),r=(()=>{if(!Hi){Hi=1,Object.defineProperty(Wi,"__esModule",{value:!0});let e=Qi();Wi.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,e.validateTuple)(t,"items")}}return Wi})(),n=Qi(),s=(()=>{if(!Xi){Xi=1,Object.defineProperty(eo,"__esModule",{value:!0});let e=Zn(),t=rs(),r=Es(),n=Ji();eo.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:t}})=>e.str`must NOT have more than ${t} items`,params:({params:{len:t}})=>e._`{limit: ${t}}`},code(e){var{schema:s,parentSchema:i,it:o}=e,i=i.prefixItems;o.items=!0,(0,t.alwaysValidSchema)(o,s)||(i?(0,n.validateAdditionalItems)(e,i):e.ok((0,r.validateArray)(e)))}}}return eo})(),i=function(){if(!Zi){Zi=1,Object.defineProperty(to,"__esModule",{value:!0});let e=Zn(),t=rs();to.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:t,max:r}})=>void 0===r?e.str`must contain at least ${t} valid item(s)`:e.str`must contain at least ${t} and no more than ${r} valid item(s)`,params:({params:{min:t,max:r}})=>void 0===r?e._`{minContains: ${t}}`:e._`{minContains: ${t}, maxContains: ${r}}`},code(r){let n,s,{gen:i,schema:o,parentSchema:a,data:l,it:c}=r;var{minContains:u,maxContains:f}=a;c.opts.next?(n=void 0===u?1:u,s=f):n=1;let p=i.const("len",e._`${l}.length`);if(r.setParams({min:n,max:s}),void 0===s&&0===n)(0,t.checkStrictMode)(c,'"minContains" == 0 without "maxContains": "contains" keyword ignored');else if(void 0!==s&&n>s)(0,t.checkStrictMode)(c,'"minContains" > "maxContains" is always invalid'),r.fail();else if((0,t.alwaysValidSchema)(c,o)){let m=e._`${p} >= ${n}`;void 0!==s&&(m=e._`${m} && ${p} <= ${s}`),r.pass(m)}else{c.items=!0;let y=i.name("valid");function h(){let t=i.name("_valid"),r=i.let("count",0);d(t,()=>i.if(t,()=>{return t=r,i.code(e._`${t}++`),void(void 0===s?i.if(e._`${t} >= ${n}`,()=>i.assign(y,!0).break()):(i.if(e._`${t} > ${s}`,()=>i.assign(y,!1).break()),1===n?i.assign(y,!0):i.if(e._`${t} >= ${n}`,()=>i.assign(y,!0))));var t}))}function d(e,n){i.forRange("i",0,p,s=>{r.subschema({keyword:"contains",dataProp:s,dataPropType:t.Type.Num,compositeRule:!0},e),n()})}void 0===s&&1===n?d(y,()=>i.if(y,()=>i.break())):0===n?(i.let(y,!0),void 0!==s&&i.if(e._`${l}.length > 0`,h)):(i.let(y,!1),h()),r.result(y,()=>r.reset())}}}}return to}(),o=function(){if(!ro){ro=1;{var e=no;Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;let s=Zn(),i=rs(),o=Es();e.error={message:({params:{property:e,depsCount:t,deps:r}})=>(t=1===t?"property":"properties",s.str`must have ${t} ${r} when property ${e} is present`),params:({params:{property:e,depsCount:t,deps:r,missingProperty:n}})=>s._`{property: ${e},
    missingProperty: ${n},
    depsCount: ${t},
    deps: ${r}}`};var t={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(e){var[t,s]=(({schema:e})=>{var t,r={},n={};for(t in e)"__proto__"!==t&&((Array.isArray(e[t])?r:n)[t]=e[t]);return[r,n]})(e);r(e,t),n(e,s)}};function r(e,t=e.schema){var{gen:r,data:n,it:i}=e;if(0!==Object.keys(t).length){var a,l,c=r.let("missing");for(a in t){let u=t[a];0!==u.length&&(l=(0,o.propertyInData)(r,n,a,i.opts.ownProperties),e.setParams({property:a,depsCount:u.length,deps:u.join(", ")}),i.allErrors?r.if(l,()=>{for(var t of u)(0,o.checkReportMissingProp)(e,t)}):(r.if(s._`${l} && (${(0,o.checkMissingProp)(e,u,c)})`),(0,o.reportMissingProp)(e,c),r.else()))}}}function n(e,t=e.schema){let{gen:r,data:n,keyword:s,it:a}=e,l=r.name("valid");for(let c in t)(0,i.alwaysValidSchema)(a,t[c])||(r.if((0,o.propertyInData)(r,n,c,a.opts.ownProperties),()=>{var t=e.subschema({keyword:s,schemaProp:c},l);e.mergeValidEvaluated(t,l)},()=>r.var(l,!0)),e.ok(l))}e.validatePropertyDeps=r,e.validateSchemaDeps=n,e.default=t}}return no}(),a=(()=>{if(!so){so=1,Object.defineProperty(oo,"__esModule",{value:!0});let e=Zn(),t=rs();oo.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:t})=>e._`{propertyName: ${t.propertyName}}`},code(r){let{gen:n,schema:s,data:i,it:o}=r;if(!(0,t.alwaysValidSchema)(o,s)){let t=n.name("valid");n.forIn("key",i,s=>{r.setParams({propertyName:s}),r.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},t),n.if((0,e.not)(t),()=>{r.error(!0),o.allErrors||n.break()})}),r.ok(t)}}}}return oo})(),l=lo(),c=function(){if(!co){co=1,Object.defineProperty(uo,"__esModule",{value:!0});let e=Ds(),t=Es(),r=rs(),n=lo();uo.default={keyword:"properties",type:"object",schemaType:"object",code(s){let{gen:i,schema:o,parentSchema:a,data:l,it:c}=s;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&n.default.code(new e.KeywordCxt(c,n.default,"additionalProperties"));var u,f,p=(0,t.allSchemaProperties)(o);for(u of p)c.definedProperties.add(u);if(c.opts.unevaluated&&p.length&&!0!==c.props&&(c.props=r.mergeEvaluated.props(i,(0,r.toHash)(p),c.props)),p=p.filter(e=>!(0,r.alwaysValidSchema)(c,o[e])),0!==p.length){let m=i.name("valid");for(var h of p)f=h,c.opts.useDefaults&&!c.compositeRule&&void 0!==o[f].default?d(h):(i.if((0,t.propertyInData)(i,l,h,c.opts.ownProperties)),d(h),c.allErrors||i.else().var(m,!0),i.endIf()),s.it.definedProperties.add(h),s.ok(m);function d(e){s.subschema({keyword:"properties",schemaProp:e,dataProp:e},m)}}}}}return uo}(),u=function(){if(!fo){fo=1,Object.defineProperty(po,"__esModule",{value:!0});let e=Es(),t=Zn(),r=rs(),n=rs();po.default={keyword:"patternProperties",type:"object",schemaType:"object",code(s){let{gen:i,schema:o,data:a,parentSchema:l,it:c}=s;var u=c.opts;let f=(0,e.allSchemaProperties)(o),p=f.filter(e=>(0,r.alwaysValidSchema)(c,o[e]));if(0!==f.length&&(p.length!==f.length||c.opts.unevaluated&&!0!==c.props)){let g=u.strictSchema&&!u.allowMatchingProperties&&l.properties,v=i.name("valid"),b=(!0===c.props||c.props instanceof t.Name||(c.props=(0,n.evaluatedPropsToName)(i,c.props)),c).props;for(var h of f){if(g){m=void 0;var d=h;for(var m in g)new RegExp(d).test(m)&&(0,r.checkStrictMode)(c,`property ${m} matches pattern ${d} (use allowMatchingProperties)`)}c.allErrors?y(h):(i.var(v,!0),y(h),i.if(v))}function y(r){i.forIn("key",a,o=>{i.if(t._`${(0,e.usePattern)(s,r)}.test(${o})`,()=>{var e=p.includes(r);e||s.subschema({keyword:"patternProperties",schemaProp:r,dataProp:o,dataPropType:n.Type.Str},v),c.opts.unevaluated&&!0!==b?i.assign(t._`${b}[${o}]`,!0):e||c.allErrors||i.if((0,t.not)(v),()=>i.break())})})}}}}}return po}(),f=(()=>{if(!ho){ho=1,Object.defineProperty(bo,"__esModule",{value:!0});let e=rs();bo.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){var{gen:r,schema:n,it:s}=t;(0,e.alwaysValidSchema)(s,n)?t.fail():(s=r.name("valid"),t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error()))},error:{message:"must NOT be valid"}}}return bo})(),p=(mo||(mo=1,Object.defineProperty(wo,"__esModule",{value:!0}),e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Es().validateUnion,error:{message:"must match a schema in anyOf"}},wo.default=e),wo);var e;let h=(()=>{if(!yo){yo=1,Object.defineProperty(ko,"__esModule",{value:!0});let e=Zn(),t=rs();ko.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:t})=>e._`{passingSchemas: ${t.passing}}`},code(r){let{gen:n,schema:s,parentSchema:i,it:o}=r;if(!Array.isArray(s))throw new Error("ajv implementation error");if(!o.opts.discriminator||!i.discriminator){let i=s,a=n.let("valid",!1),l=n.let("passing",null),c=n.name("_valid");r.setParams({passing:l}),n.block(function(){i.forEach((s,i)=>{let u;(0,t.alwaysValidSchema)(o,s)?n.var(c,!0):u=r.subschema({keyword:"oneOf",schemaProp:i,compositeRule:!0},c),0<i&&n.if(e._`${c} && ${a}`).assign(a,!1).assign(l,e._`[${l}, ${i}]`).else(),n.if(c,()=>{n.assign(a,!0),n.assign(l,i),u&&r.mergeEvaluated(u,e.Name)})})}),r.result(a,()=>r.reset(),()=>r.error(!0))}}}}return ko})(),d=(()=>{if(!go){go=1,Object.defineProperty(_o,"__esModule",{value:!0});let e=rs();_o.default={keyword:"allOf",schemaType:"array",code(t){let{gen:r,schema:n,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");let i=r.name("valid");n.forEach((r,n)=>{(0,e.alwaysValidSchema)(s,r)||(r=t.subschema({keyword:"allOf",schemaProp:n},i),t.ok(i),t.mergeEvaluated(r))})}}}return _o})(),m=function(){if(!vo){vo=1,Object.defineProperty($o,"__esModule",{value:!0});let t=Zn(),r=rs();function e(e,t){return void 0!==(t=e.schema[t])&&!(0,r.alwaysValidSchema)(e,t)}$o.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>t.str`must match "${e.ifClause}" schema`,params:({params:e})=>t._`{failingKeyword: ${e.ifClause}}`},code(n){let{gen:s,parentSchema:i,it:o}=n;void 0===i.then&&void 0===i.else&&(0,r.checkStrictMode)(o,'"if" without "then" and "else" is ignored');var a,l=e(o,"then"),c=e(o,"else");if(l||c){let f=s.let("valid",!0),p=s.name("_valid");function u(e,r){return()=>{var i=n.subschema({keyword:e},p);s.assign(f,p),n.mergeValidEvaluated(i,f),r?s.assign(r,t._`${e}`):n.setParams({ifClause:e})}}a=n.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},p),n.mergeEvaluated(a),n.reset(),l&&c?(a=s.let("ifClause"),n.setParams({ifClause:a}),s.if(p,u("then",a),u("else",a))):l?s.if(p,u("then")):s.if((0,t.not)(p),u("else")),n.pass(f,()=>n.error(!0))}}}}return $o}(),y=(()=>{if(!Eo){Eo=1,Object.defineProperty(Oo,"__esModule",{value:!0});let e=rs();Oo.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:r,it:n}){void 0===r.if&&(0,e.checkStrictMode)(n,`"${t}" without "if" is ignored`)}}}return Oo})();Fi.default=function(e=!1){var g=[f.default,p.default,h.default,d.default,m.default,y.default,a.default,l.default,o.default,c.default,u.default];return e?g.push(r.default,s.default):g.push(t.default,n.default),g.push(i.default),g}}return Fi}var Ao,Po,xo={},jo={};function Io(){if(!Ao){Ao=1,Object.defineProperty(jo,"__esModule",{value:!0});let e=Zn();jo.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:t})=>e.str`must match format "${t}"`,params:({schemaCode:t})=>e._`{format: ${t}}`},code(t,r){let{gen:n,data:s,$data:i,schema:o,schemaCode:a,it:l}=t,{opts:c,errSchemaPath:u,schemaEnv:f,self:p}=l;if(c.validateFormats)if(i){let d=n.scopeValue("formats",{ref:p.formats,code:c.code.formats}),m=n.const("fDef",e._`${d}[${a}]`),y=n.let("fType"),g=n.let("format");n.if(e._`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(y,e._`${m}.type || "string"`).assign(g,e._`${m}.validate`),()=>n.assign(y,e._`"string"`).assign(g,m)),t.fail$data((0,e.or)(!1===c.strictSchema?e.nil:e._`${a} && !${g}`,(()=>{var t=f.$async?e._`(${m}.async ? await ${g}(${s}) : ${g}(${s}))`:e._`${g}(${s})`;return t=e._`(typeof ${g} == "function" ? ${t} : ${g}.test(${s}))`,e._`${g} && ${g} !== true && ${y} === ${r} && !${t}`})()))}else{let v=p.formats[o];if(v){if(!0!==v){let[b,w,k]=(t=>{var r=t instanceof RegExp?(0,e.regexpCode)(t):c.code.formats?e._`${c.code.formats}${(0,e.getProperty)(o)}`:void 0;return r=n.scopeValue("formats",{key:o,ref:t,code:r}),"object"!=typeof t||t instanceof RegExp?["string",t,r]:[t.type||"string",t.validate,e._`${r}.validate`]})(v);b===r&&t.pass((()=>{if("object"!=typeof v||v instanceof RegExp||!v.async)return"function"==typeof w?e._`${k}(${s})`:e._`${k}.test(${s})`;if(f.$async)return e._`await ${k}(${s})`;throw new Error("async format in sync schema")})())}}else{if(!1!==c.strictSchema)throw new Error(h());function h(){return`unknown format "${o}" ignored in schema at path "${u}"`}p.logger.warn(h())}}}}}return jo}var To,Co,Lo={};var Mo,Do,Ro={},Bo={};var Ko,Uo={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};function qo(){if(!Ko){Ko=1;{var e=Un,t=Un.exports;Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;var r=oi();let a=function(){var e,t,r,n,s;return Co||(Co=1,Object.defineProperty(ui,"__esModule",{value:!0}),s=di(),e=qi(),t=No(),Po||(Po=1,Object.defineProperty(xo,"__esModule",{value:!0}),r=[Io().default],xo.default=r),r=xo,To||(To=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.contentVocabulary=Lo.metadataVocabulary=void 0,Lo.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Lo.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),n=Lo,s=[s.default,e.default,(0,t.default)(),r.default,n.metadataVocabulary,n.contentVocabulary],ui.default=s),ui}(),l=function(){if(!Do){Do=1,Object.defineProperty(Ro,"__esModule",{value:!0});let e=Zn(),t=(Mo||(Mo=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.DiscrError=void 0,Bo.DiscrError={Tag:"tag",Mapping:"mapping"}),Bo),r=Js(),n=Vs(),s=rs();Ro.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:r}})=>e===t.DiscrError.Tag?`tag "${r}" must be string`:`value of tag "${r}" must be in oneOf`,params:({params:{discrError:t,tag:r,tagName:n}})=>e._`{error: ${t}, tag: ${n}, tagValue: ${r}}`},code(i){let{gen:o,data:a,schema:l,parentSchema:c,it:u}=i,f=c.oneOf;if(!u.opts.discriminator)throw new Error("discriminator: requires discriminator option");let p=l.propertyName;if("string"!=typeof p)throw new Error("discriminator: requires propertyName");if(l.mapping)throw new Error("discriminator: mapping is not supported");if(!f)throw new Error("discriminator: requires oneOf keyword");let h=o.let("valid",!1),d=o.const("tag",e._`${a}${(0,e.getProperty)(p)}`);o.if(e._`typeof ${d} == "string"`,()=>{var a,l=(()=>{let e,t={},i=l(c),o=!0;for(let t=0;t<f.length;t++){let c=f[t];if(null!=c&&c.$ref&&!(0,s.schemaHasRulesButRef)(c,u.self.RULES)){var a=c.$ref;if(void 0===(c=(c=r.resolveRef.call(u.self,u.schemaEnv.root,u.baseId,a))instanceof r.SchemaEnv?c.schema:c))throw new n.default(u.opts.uriResolver,u.baseId,a)}if("object"!=typeof(a=null==(e=null==c?void 0:c.properties)?void 0:e[p]))throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);o=o&&(i||l(c)),((e,t)=>{if(e.const)h(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`);for(var r of e.enum)h(r,t)}})(a,t)}if(o)return t;throw new Error(`discriminator: "${p}" must be required`);function l({required:e}){return Array.isArray(e)&&e.includes(p)}function h(e,r){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${p}" values must be unique strings`);t[e]=r}})();for(a in o.if(!1),l)o.elseIf(e._`${d} === ${a}`),o.assign(h,(t=>{var r=o.name("valid");return t=i.subschema({keyword:"oneOf",schemaProp:t},r),i.mergeEvaluated(t,e.Name),r})(l[a]));o.else(),i.error(!1,{discrError:t.DiscrError.Mapping,tag:d,tagName:p}),o.endIf()},()=>i.error(!1,{discrError:t.DiscrError.Tag,tag:d,tagName:p})),i.ok(h)}}}return Ro}(),c=Uo,u=["/properties"],f="http://json-schema.org/draft-07/schema";class p extends r.default{_addVocabularies(){super._addVocabularies(),a.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(l.default)}_addDefaultMetaSchema(){var e;super._addDefaultMetaSchema(),this.opts.meta&&(e=this.opts.$data?this.$dataMetaSchema(c,u):c,this.addMetaSchema(e,f,!1),this.refs["http://json-schema.org/schema"]=f)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(f)?f:void 0)}}t.Ajv=p,e.exports=t=p,e.exports.Ajv=p,Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var n=Ds(),s=(Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}}),Zn()),i=(Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}}),Ks()),o=(Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return i.default}}),Vs());Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return o.default}})}}return Un.exports}var Vo,Fo,zo={exports:{}};var Jo,Go,Ho=i((()=>{if(!Fo){Fo=1;var e=$e;{function t(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function n(){n=function(e,t){return new s(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function s(e,n,i){return n=RegExp(e,n),t.set(n,i||t.get(e)),r(n,s.prototype)}function i(e,r){var n=t.get(r);return Object.keys(n).reduce(function(t,r){var s=n[r];if("number"==typeof s)t[r]=e[s];else{for(var i=0;void 0===e[s[i]]&&i+1<s.length;)i++;t[r]=e[s[i]]}return t},Object.create(null))}var o=s,a=RegExp;if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");return o.prototype=Object.create(a&&a.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),a&&r(o,a),s.prototype.exec=function(t){var r;return(t=e.exec.call(this,t))&&(t.groups=i(t,this),r=t.indices)&&(r.groups=i(r,this)),t},s.prototype[Symbol.replace]=function(r,n){var s,o;return"string"==typeof n?(s=t.get(this),e[Symbol.replace].call(this,r,n.replace(/\$<([^>]+)(>|$)/g,function(e,t,r){return""===r?e:(r=s[t],Array.isArray(r)?"$"+r.join("$"):"number"==typeof r?"$"+r:"")}))):"function"==typeof n?(o=this,e[Symbol.replace].call(this,r,function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(i(e,o)),n.apply(this,e)})):e[Symbol.replace].call(this,r,n)},n.apply(this,arguments)}let o=(e,t,r)=>{let n=e,s=t.split("/"),i=s.length;for(let e=0;e<i-1;e+=1){var o=s[e];n[o]||(n[o]={}),n=n[o]}n[s[i-1]]=r};function s(e,t){Object.keys(e[t]||[]).forEach(r=>{(r=e[t][r])&&r.external&&r.external.name&&(r.name=r.external.name,r.external=!0)})}let a=n(/^(([A-Za-z]:\/|[A-Za-z]:\\)?.*?):(([A-Za-z]:\/|[A-Za-z]:[\\])?.*?)(?::((rw|ro|z|Z)(,(rw|ro|z|Z))*))?$/,{volume:1,container_path:3,flags:5}),l=e=>null===(e=e.match(a))?"":e.groups.volume,c=e=>e&&!e.includes("/")&&!e.includes("\\")&&!e.includes("~")&&!e.includes(".")&&!e.includes("$"),u=e=>{var t=e.match(a);return null!==t&&(e={type:c(t.groups.volume)?"volume":"bind",source:t.groups.volume,target:t.groups.container_path},(t=(t.groups.flags||"").replace(/\s+/,"").split(",")).includes("ro")&&(e.volume={nocopy:!0}),t.includes("z")?e.bind={selinux:"z"}:t.includes("Z")&&(e.bind={selinux:"Z"})),e},f=Kn;class p extends Error{constructor(e,t,r){super(e),this.lines=t,this.details=r,this.name="YamlSyntaxError"}}let h=e=>{e=f.parseDocument(e,{prettyErrors:!0});let t=[],r=[];if(e.errors.forEach((e,n)=>{var s=e.message.split(":\n")[0];r.push({line:e.linePos[0].line,message:s,pos:e.linePos}),Array.from({length:e.linePos?e.linePos[1].line-e.linePos[0].line:1},(t,r)=>e.linePos[0].line+r).forEach(e=>t.push(e))}),0<r.length)throw new p(r.map(e=>e.message).join("\n"),t,r)},d=e=>(h(e),f.parse(e,{intAsBigInt:!0})),m=n(/^((\[?([a-fA-F\d.:]+)\]?:)?([\d]*(-[\d]+)?):)?([\d]+(-[\d]+)?)(\/((udp|tcp|sctp)))?$/,{ip_part:2,ip:3,host:4,container:6,proto_part:8,proto:9}),y=e=>{let t=e.match(m);if(null===t)return[e];if((e=t.groups.container)&&e.includes("-")){var r=e.split("-");let s=parseInt(r[0],10);r=parseInt(r[1],10);var n=((n=t.groups.host)||e).split("-");let i=parseInt(n[0],10),o=[];return Array.from({length:r-s+1},(e,t)=>t).forEach(e=>{o=[...o,...y(`${t.groups.ip_part||""}${i+e}:`+(s+e)+(t.groups.proto_part||""))]}),o}return n={target:parseInt(e,10)},t.groups.ip&&(n.host_ip=t.groups.ip),t.groups.host&&(n.published=t.groups.host),t.groups.proto&&(n.protocol=t.groups.proto),n.mode="ingress",[n]},g=Kn,v=(e,t)=>(b(e,t),g.stringify(e,{indent:(t||{}).indent||4,simpleKeys:!0,nullStr:""}).trim()),b=(e,t)=>(t&&t.expandVolumes&&Object.values(e.services).forEach(e=>{if(e.volumes)for(let t=0;t<e.volumes.length;t+=1)"string"==typeof e.volumes[t]&&(e.volumes[t]=u(e.volumes[t]))}),t&&t.expandPorts&&Object.values(e.services).forEach(e=>{if(e.ports){let t=[];for(let r=0;r<e.ports.length;r+=1)t="string"==typeof e.ports[r]?[...t,...y(e.ports[r])]:[...t,e.ports[r]];e.ports=t}}),e),w={$id:"compose_spec.json",type:"object",title:"Compose Specification",description:"The Compose file is a YAML file defining a multi-containers based application.",properties:{version:{type:"string",description:"declared for backward compatibility, ignored."},name:{type:"string",pattern:"^[a-z0-9][a-z0-9_-]*$",description:"define the Compose project name, until user defines one explicitly."},include:{type:"array",items:{type:"object",$ref:"#/definitions/include"},description:"compose sub-projects to be included."},services:{$id:"#/properties/services",type:"object",patternProperties:{"^[a-zA-Z0-9._-]+$":{$ref:"#/definitions/service"}},additionalProperties:!1},networks:{$id:"#/properties/networks",type:"object",patternProperties:{"^[a-zA-Z0-9._-]+$":{$ref:"#/definitions/network"}}},volumes:{$id:"#/properties/volumes",type:"object",patternProperties:{"^[a-zA-Z0-9._-]+$":{$ref:"#/definitions/volume"}},additionalProperties:!1},secrets:{$id:"#/properties/secrets",type:"object",patternProperties:{"^[a-zA-Z0-9._-]+$":{$ref:"#/definitions/secret"}},additionalProperties:!1},configs:{$id:"#/properties/configs",type:"object",patternProperties:{"^[a-zA-Z0-9._-]+$":{$ref:"#/definitions/config"}},additionalProperties:!1}},patternProperties:{"^x-":{}},additionalProperties:!1,definitions:{service:{$id:"#/definitions/service",type:"object",properties:{develop:{$ref:"#/definitions/development"},deploy:{$ref:"#/definitions/deployment"},annotations:{$ref:"#/definitions/list_or_dict"},attach:{type:"boolean"},build:{oneOf:[{type:"string"},{type:"object",properties:{context:{type:"string"},dockerfile:{type:"string"},dockerfile_inline:{type:"string"},args:{$ref:"#/definitions/list_or_dict"},ssh:{$ref:"#/definitions/list_or_dict"},labels:{$ref:"#/definitions/list_or_dict"},cache_from:{type:"array",items:{type:"string"}},cache_to:{type:"array",items:{type:"string"}},no_cache:{type:"boolean"},additional_contexts:{$ref:"#/definitions/list_or_dict"},network:{type:"string"},pull:{type:"boolean"},target:{type:"string"},shm_size:{type:["integer","string"]},extra_hosts:{$ref:"#/definitions/list_or_dict"},isolation:{type:"string"},privileged:{type:"boolean"},secrets:{$ref:"#/definitions/service_config_or_secret"},tags:{type:"array",items:{type:"string"}},ulimits:{$ref:"#/definitions/ulimits"},platforms:{type:"array",items:{type:"string"}}},additionalProperties:!1,patternProperties:{"^x-":{}}}]},blkio_config:{type:"object",properties:{device_read_bps:{type:"array",items:{$ref:"#/definitions/blkio_limit"}},device_read_iops:{type:"array",items:{$ref:"#/definitions/blkio_limit"}},device_write_bps:{type:"array",items:{$ref:"#/definitions/blkio_limit"}},device_write_iops:{type:"array",items:{$ref:"#/definitions/blkio_limit"}},weight:{type:"integer"},weight_device:{type:"array",items:{$ref:"#/definitions/blkio_weight"}}},additionalProperties:!1},cap_add:{type:"array",items:{type:"string"},uniqueItems:!0},cap_drop:{type:"array",items:{type:"string"},uniqueItems:!0},cgroup:{type:"string",enum:["host","private"]},cgroup_parent:{type:"string"},command:{$ref:"#/definitions/command"},configs:{$ref:"#/definitions/service_config_or_secret"},container_name:{type:"string"},cpu_count:{type:"integer",minimum:0},cpu_percent:{type:"integer",minimum:0,maximum:100},cpu_shares:{type:["number","string"]},cpu_quota:{type:["number","string"]},cpu_period:{type:["number","string"]},cpu_rt_period:{type:["number","string"]},cpu_rt_runtime:{type:["number","string"]},cpus:{type:["number","string"]},cpuset:{type:"string"},credential_spec:{type:"object",properties:{config:{type:"string"},file:{type:"string"},registry:{type:"string"}},additionalProperties:!1,patternProperties:{"^x-":{}}},depends_on:{oneOf:[{$ref:"#/definitions/list_of_strings"},{type:"object",additionalProperties:!1,patternProperties:{"^[a-zA-Z0-9._-]+$":{type:"object",additionalProperties:!1,properties:{restart:{type:"boolean"},required:{type:"boolean",default:!0},condition:{type:"string",enum:["service_started","service_healthy","service_completed_successfully"]}},required:["condition"]}}}]},device_cgroup_rules:{$ref:"#/definitions/list_of_strings"},devices:{type:"array",items:{type:"string"},uniqueItems:!0},dns:{$ref:"#/definitions/string_or_list"},dns_opt:{type:"array",items:{type:"string"},uniqueItems:!0},dns_search:{$ref:"#/definitions/string_or_list"},domainname:{type:"string"},entrypoint:{$ref:"#/definitions/command"},env_file:{$ref:"#/definitions/string_or_list"},environment:{$ref:"#/definitions/list_or_dict"},expose:{type:"array",items:{type:["string","number"],format:"expose"},uniqueItems:!0},extends:{oneOf:[{type:"string"},{type:"object",properties:{service:{type:"string"},file:{type:"string"}},required:["service"],additionalProperties:!1}]},external_links:{type:"array",items:{type:"string"},uniqueItems:!0},extra_hosts:{$ref:"#/definitions/list_or_dict"},group_add:{type:"array",items:{type:["string","number"]},uniqueItems:!0},healthcheck:{$ref:"#/definitions/healthcheck"},hostname:{type:"string"},image:{type:"string"},init:{type:"boolean"},ipc:{type:"string"},isolation:{type:"string"},labels:{$ref:"#/definitions/list_or_dict"},links:{type:"array",items:{type:"string"},uniqueItems:!0},logging:{type:"object",properties:{driver:{type:"string"},options:{type:"object",patternProperties:{"^.+$":{type:["string","number","null"]}}}},additionalProperties:!1,patternProperties:{"^x-":{}}},mac_address:{type:"string"},mem_limit:{type:["number","string"]},mem_reservation:{type:["string","integer"]},mem_swappiness:{type:"integer"},memswap_limit:{type:["number","string"]},network_mode:{type:"string"},networks:{oneOf:[{$ref:"#/definitions/list_of_strings"},{type:"object",patternProperties:{"^[a-zA-Z0-9._-]+$":{oneOf:[{type:"object",properties:{aliases:{$ref:"#/definitions/list_of_strings"},ipv4_address:{type:"string"},ipv6_address:{type:"string"},link_local_ips:{$ref:"#/definitions/list_of_strings"},mac_address:{type:"string"},priority:{type:"number"}},additionalProperties:!1,patternProperties:{"^x-":{}}},{type:"null"}]}},additionalProperties:!1}]},oom_kill_disable:{type:"boolean"},oom_score_adj:{type:"integer",minimum:-1e3,maximum:1e3},pid:{type:["string","null"]},pids_limit:{type:["number","string"]},platform:{type:"string"},ports:{type:"array",items:{oneOf:[{type:"number",format:"ports"},{type:"string",format:"ports"},{type:"object",properties:{mode:{type:"string"},host_ip:{type:"string"},target:{type:"integer"},published:{type:["string","integer"]},protocol:{type:"string"}},additionalProperties:!1,patternProperties:{"^x-":{}}}]},uniqueItems:!0},privileged:{type:"boolean"},profiles:{$ref:"#/definitions/list_of_strings"},pull_policy:{type:"string",enum:["always","never","if_not_present","build","missing"]},read_only:{type:"boolean"},restart:{type:"string"},runtime:{type:"string"},scale:{type:"integer"},security_opt:{type:"array",items:{type:"string"},uniqueItems:!0},shm_size:{type:["number","string"]},secrets:{$ref:"#/definitions/service_config_or_secret"},sysctls:{$ref:"#/definitions/list_or_dict"},stdin_open:{type:"boolean"},stop_grace_period:{type:"string",format:"duration"},stop_signal:{type:"string"},storage_opt:{type:"object"},tmpfs:{$ref:"#/definitions/string_or_list"},tty:{type:"boolean"},ulimits:{$ref:"#/definitions/ulimits"},user:{type:"string"},uts:{type:"string"},userns_mode:{type:"string"},volumes:{type:"array",items:{oneOf:[{type:"string",format:"volumes"},{type:"object",required:["type"],properties:{type:{type:"string"},source:{type:"string"},target:{type:"string"},read_only:{type:"boolean"},consistency:{type:"string"},bind:{type:"object",properties:{propagation:{type:"string"},create_host_path:{type:"boolean"},selinux:{type:"string",enum:["z","Z"]}},additionalProperties:!1,patternProperties:{"^x-":{}}},volume:{type:"object",properties:{nocopy:{type:"boolean"}},additionalProperties:!1,patternProperties:{"^x-":{}}},tmpfs:{type:"object",properties:{size:{oneOf:[{type:"integer",minimum:0},{type:"string"}]},mode:{type:"number"}},additionalProperties:!1,patternProperties:{"^x-":{}}}},additionalProperties:!1,patternProperties:{"^x-":{}}}]},uniqueItems:!0},volumes_from:{type:"array",items:{type:"string"},uniqueItems:!0},working_dir:{type:"string"}},patternProperties:{"^x-":{}},additionalProperties:!1},healthcheck:{$id:"#/definitions/healthcheck",type:"object",properties:{disable:{type:"boolean"},interval:{type:"string",format:"duration"},retries:{type:"number"},test:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},timeout:{type:"string",format:"duration"},start_period:{type:"string",format:"duration"},start_interval:{type:"string",format:"duration"}},additionalProperties:!1,patternProperties:{"^x-":{}}},development:{$id:"#/definitions/development",type:["object","null"],properties:{watch:{type:"array",items:{type:"object",properties:{ignore:{type:"array",items:{type:"string"}},path:{type:"string"},action:{type:"string",enum:["rebuild","sync","sync+restart"]},target:{type:"string"}}},required:["path","action"],additionalProperties:!1,patternProperties:{"^x-":{}}}}},deployment:{$id:"#/definitions/deployment",type:["object","null"],properties:{mode:{type:"string"},endpoint_mode:{type:"string"},replicas:{type:"integer"},labels:{$ref:"#/definitions/list_or_dict"},rollback_config:{type:"object",properties:{parallelism:{type:"integer"},delay:{type:"string",format:"duration"},failure_action:{type:"string"},monitor:{type:"string",format:"duration"},max_failure_ratio:{type:"number"},order:{type:"string",enum:["start-first","stop-first"]}},additionalProperties:!1,patternProperties:{"^x-":{}}},update_config:{type:"object",properties:{parallelism:{type:"integer"},delay:{type:"string",format:"duration"},failure_action:{type:"string"},monitor:{type:"string",format:"duration"},max_failure_ratio:{type:"number"},order:{type:"string",enum:["start-first","stop-first"]}},additionalProperties:!1,patternProperties:{"^x-":{}}},resources:{type:"object",properties:{limits:{type:"object",properties:{cpus:{type:["number","string"]},memory:{type:"string"},pids:{type:"integer"}},additionalProperties:!1,patternProperties:{"^x-":{}}},reservations:{type:"object",properties:{cpus:{type:["number","string"]},memory:{type:"string"},generic_resources:{$ref:"#/definitions/generic_resources"},devices:{$ref:"#/definitions/devices"}},additionalProperties:!1,patternProperties:{"^x-":{}}}},additionalProperties:!1,patternProperties:{"^x-":{}}},restart_policy:{type:"object",properties:{condition:{type:"string"},delay:{type:"string",format:"duration"},max_attempts:{type:"integer"},window:{type:"string",format:"duration"}},additionalProperties:!1,patternProperties:{"^x-":{}}},placement:{type:"object",properties:{constraints:{type:"array",items:{type:"string"}},preferences:{type:"array",items:{type:"object",properties:{spread:{type:"string"}},additionalProperties:!1,patternProperties:{"^x-":{}}}},max_replicas_per_node:{type:"integer"}},additionalProperties:!1,patternProperties:{"^x-":{}}}},additionalProperties:!1,patternProperties:{"^x-":{}}},generic_resources:{$id:"#/definitions/generic_resources",type:"array",items:{type:"object",properties:{discrete_resource_spec:{type:"object",properties:{kind:{type:"string"},value:{type:"number"}},additionalProperties:!1,patternProperties:{"^x-":{}}}},additionalProperties:!1,patternProperties:{"^x-":{}}}},devices:{$id:"#/definitions/devices",type:"array",items:{type:"object",properties:{capabilities:{$ref:"#/definitions/list_of_strings"},count:{type:["string","integer"]},device_ids:{$ref:"#/definitions/list_of_strings"},driver:{type:"string"},options:{$ref:"#/definitions/list_or_dict"}},additionalProperties:!1,patternProperties:{"^x-":{}}}},include:{$id:"#/definitions/include",oneOf:[{type:"string"},{type:"object",properties:{path:{$ref:"#/definitions/string_or_list"},env_file:{$ref:"#/definitions/string_or_list"},project_directory:{type:"string"}},additionalProperties:!1}]},network:{$id:"#/definitions/network",type:["object","null"],properties:{name:{type:"string"},driver:{type:"string"},driver_opts:{type:"object",patternProperties:{"^.+$":{type:["string","number"]}}},ipam:{type:"object",properties:{driver:{type:"string"},config:{type:"array",items:{type:"object",properties:{subnet:{type:"string",format:"subnet_ip_address"},ip_range:{type:"string"},gateway:{type:"string"},aux_addresses:{type:"object",additionalProperties:!1,patternProperties:{"^.+$":{type:"string"}}}},additionalProperties:!1,patternProperties:{"^x-":{}}}},options:{type:"object",additionalProperties:!1,patternProperties:{"^.+$":{type:"string"}}}},additionalProperties:!1,patternProperties:{"^x-":{}}},external:{type:["boolean","object"],properties:{name:{deprecated:!0,type:"string"}},additionalProperties:!1,patternProperties:{"^x-":{}}},internal:{type:"boolean"},enable_ipv6:{type:"boolean"},attachable:{type:"boolean"},labels:{$ref:"#/definitions/list_or_dict"}},additionalProperties:!1,patternProperties:{"^x-":{}}},volume:{$id:"#/definitions/volume",type:["object","null"],properties:{name:{type:"string"},driver:{type:"string"},driver_opts:{type:"object",patternProperties:{"^.+$":{type:["string","number"]}}},external:{type:["boolean","object"],properties:{name:{deprecated:!0,type:"string"}},additionalProperties:!1,patternProperties:{"^x-":{}}},labels:{$ref:"#/definitions/list_or_dict"}},additionalProperties:!1,patternProperties:{"^x-":{}}},secret:{$id:"#/definitions/secret",type:"object",properties:{name:{type:"string"},environment:{type:"string"},file:{type:"string"},external:{type:["boolean","object"],properties:{name:{type:"string"}}},labels:{$ref:"#/definitions/list_or_dict"},driver:{type:"string"},driver_opts:{type:"object",patternProperties:{"^.+$":{type:["string","number"]}}},template_driver:{type:"string"}},additionalProperties:!1,patternProperties:{"^x-":{}}},config:{$id:"#/definitions/config",type:"object",properties:{name:{type:"string"},content:{type:"string"},environment:{type:"string"},file:{type:"string"},external:{type:["boolean","object"],properties:{name:{deprecated:!0,type:"string"}}},labels:{$ref:"#/definitions/list_or_dict"},template_driver:{type:"string"}},additionalProperties:!1,patternProperties:{"^x-":{}}},command:{oneOf:[{type:"null"},{type:"string"},{type:"array",items:{type:"string"}}]},string_or_list:{oneOf:[{type:"string"},{$ref:"#/definitions/list_of_strings"}]},list_of_strings:{type:"array",items:{type:"string"},uniqueItems:!0},list_or_dict:{oneOf:[{type:"object",patternProperties:{".+":{type:["string","number","boolean","null"]}},additionalProperties:!1},{type:"array",items:{type:"string"},uniqueItems:!0}]},blkio_limit:{type:"object",properties:{path:{type:"string"},rate:{type:["integer","string"]}},additionalProperties:!1},blkio_weight:{type:"object",properties:{path:{type:"string"},weight:{type:"integer"}},additionalProperties:!1},service_config_or_secret:{type:"array",items:{oneOf:[{type:"string"},{type:"object",properties:{source:{type:"string"},target:{type:"string"},uid:{type:"string"},gid:{type:"string"},mode:{type:"number"}},additionalProperties:!1,patternProperties:{"^x-":{}}}]}},ulimits:{type:"object",patternProperties:{"^[a-z]+$":{oneOf:[{type:"integer"},{type:"object",properties:{hard:{type:"integer"},soft:{type:"integer"}},required:["soft","hard"],additionalProperties:!1,patternProperties:{"^x-":{}}}]}}},constraints:{service:{$id:"#/definitions/constraints/service",anyOf:[{required:["build"]},{required:["image"]}],properties:{build:{required:["context"]}}}}}},k=Kn,_=qo(),$=function(){if(!Vo){Vo=1;{var e=zo,t=zo.exports;Object.defineProperty(t,"__esModule",{value:!0});let s=qo(),i=Zn(),o=Hn(),a=Ds(),l=ls(),c=as(),u="errorMessage",f=new s.Name("emUsed"),p={required:"missingProperty",dependencies:"property",dependentRequired:"property"},h=/\$\{[^}]+\}/,d=/\$\{([^}]+)\}/g,m=/^""\s*\+\s*|\s*\+\s*""$/g;function r(e){return{keyword:u,schemaType:["string","object"],post:!0,code(t){let{gen:r,data:n,schema:y,schemaValue:g,it:v}=t;if(!1!==v.createErrors){let _=y,$=i.strConcat(c.default.instancePath,v.errorPath);function b(e,t){return i.and(s._`${e}.keyword !== ${u}`,s._`!${e}.${f}`,s._`${e}.instancePath === ${$}`,s._`${e}.keyword in ${t}`,s._`${e}.schemaPath.indexOf(${v.errSchemaPath}) === 0`,s._`/^\\/[^\\/]*$/.test(${e}.schemaPath.slice(${v.errSchemaPath.length}))`)}function w(e,t){var n,i=[];for(n in e){var o=t[n];h.test(o)&&i.push([n,s._`function(){return ${k(o)}}`])}return r.object(...i)}function k(e){return h.test(e)?new o._Code(o.safeStringify(e).replace(d,(e,t)=>`" + JSON.stringify(${a.getData(t,v)}) + "`).replace(m,"")):s.stringify(e)}r.if(s._`${c.default.errors} > 0`,()=>{if("object"==typeof _){var[o,a]=(e=>{let t,r;for(var n in e)if("properties"!==n&&"items"!==n){var s=e[n];if("object"==typeof s){var i,o=(t=t||{})[n]={};for(i in s)o[i]=[]}else(r=r||{})[n]=[]}return[t,r]})(_);if(a){let N=r.const("emErrors",s.stringify(a)),A=r.const("templates",w(a,y)),P=(r.forOf("err",c.default.vErrors,e=>r.if(b(e,N),()=>r.code(s._`${N}[${e}.keyword].push(${e})`).assign(s._`${e}.${f}`,!0))),e).singleError;if(P){let x=r.let("message",s._`""`),j=r.let("paramsErrors",s._`[]`);h(e=>{r.if(x,()=>r.code(s._`${x} += ${"string"==typeof P?P:";"}`)),r.code(s._`${x} += ${d(e)}`),r.assign(j,s._`${j}.concat(${N}[${e}])`)}),l.reportError(t,{message:x,params:s._`{errors: ${j}}`})}else h(e=>l.reportError(t,{message:d(e),params:s._`{errors: ${N}[${e}]}`}));function h(e){r.forIn("key",N,t=>r.if(s._`${N}[${t}].length`,()=>e(t)))}function d(e){return s._`${e} in ${A} ? ${A}[${e}]() : ${g}[${e}]`}}if(o){var m,E=o;let I=r.const("emErrors",s.stringify(E)),T=[];for(m in E)T.push([m,w(E[m],y[m])]);let C=r.const("templates",r.object(...T)),L=r.scopeValue("obj",{ref:p,code:s.stringify(p)}),M=r.let("emPropParams"),D=r.let("emParamsErrors");r.forOf("err",c.default.vErrors,e=>r.if(b(e,I),()=>{r.assign(M,s._`${L}[${e}.keyword]`),r.assign(D,s._`${I}[${e}.keyword][${e}.params[${M}]]`),r.if(D,()=>r.code(s._`${D}.push(${e})`).assign(s._`${e}.${f}`,!0))})),r.forIn("key",I,e=>r.forIn("keyProp",s._`${I}[${e}]`,n=>{r.assign(D,s._`${I}[${e}][${n}]`),r.if(s._`${D}.length`,()=>{var i=r.const("tmpl",s._`${C}[${e}] && ${C}[${e}][${n}]`);l.reportError(t,{message:s._`${i} ? ${i}() : ${g}[${e}][${n}]`,params:s._`{errors: ${D}}`})})}))}{a=(({properties:e,items:t})=>{var r={};if(e)for(var n in r.props={},e)r.props[n]=[];if(t){r.items={};for(let e=0;e<t.length;e++)r.items[e]=[]}return r})(_);let{props:R,items:B}=a;if(R||B){a=s._`typeof ${n} == "object"`,o=s._`Array.isArray(${n})`;let K,U,q=r.let("emErrors"),V=r.let("templates");function S(e,t){r.assign(q,s.stringify(e)),r.assign(V,w(e,t))}R&&B?(K=r.let("emChildKwd"),r.if(a),r.if(o,()=>{S(B,y.items),r.assign(K,s.str`items`)},()=>{S(R,y.properties),r.assign(K,s.str`properties`)}),U=s._`[${K}]`):B?(r.if(o),S(B,y.items),U=s._`.items`):R&&(r.if(i.and(a,i.not(o))),S(R,y.properties),U=s._`.properties`),r.forOf("err",c.default.vErrors,e=>{var t,n,o;t=e,n=q,o=t=>r.code(s._`${q}[${t}].push(${e})`).assign(s._`${e}.${f}`,!0),r.if(i.and(s._`${t}.keyword !== ${u}`,s._`!${t}.${f}`,s._`${t}.instancePath.indexOf(${$}) === 0`),()=>{var e=r.scopeValue("pattern",{ref:/^\/([^/]*)(?:\/|$)/,code:s._`new RegExp("^\\\/([^/]*)(?:\\\/|$)")`});e=r.const("emMatches",s._`${e}.exec(${t}.instancePath.slice(${$}.length))`);let i=r.const("emChild",s._`${e} && ${e}[1].replace(/~1/g, "/").replace(/~0/g, "~")`);r.if(s._`${i} !== undefined && ${i} in ${n}`,()=>o(i))})}),r.forIn("key",q,e=>r.if(s._`${q}[${e}].length`,()=>{l.reportError(t,{message:s._`${e} in ${V} ? ${V}[${e}]() : ${g}${U}[${e}]`,params:s._`{errors: ${q}[${e}]}`}),r.assign(s._`${c.default.vErrors}[${c.default.errors}-1].instancePath`,s._`${$} + "/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`)})),r.endIf()}}}if(a="string"==typeof _?_:_._){var O=a;let F=r.const("emErrs",s._`[]`);r.forOf("err",c.default.vErrors,e=>{return r.if((t=e,i.and(s._`${t}.keyword !== ${u}`,s._`!${t}.${f}`,i.or(s._`${t}.instancePath === ${$}`,i.and(s._`${t}.instancePath.indexOf(${$}) === 0`,s._`${t}.instancePath[${$}.length] === "/"`)),s._`${t}.schemaPath.indexOf(${v.errSchemaPath}) === 0`,s._`${t}.schemaPath[${v.errSchemaPath}.length] === "/"`)),()=>r.code(s._`${F}.push(${e})`).assign(s._`${e}.${f}`,!0));var t}),r.if(s._`${F}.length`,()=>l.reportError(t,{message:k(O),params:s._`{errors: ${F}}`}))}if(!e.keepErrors){let z=r.const("emErrs",s._`[]`);r.forOf("err",c.default.vErrors,e=>r.if(s._`!${e}.${f}`,()=>r.code(s._`${z}.push(${e})`))),r.assign(c.default.vErrors,z).assign(c.default.errors,s._`${z}.length`)}})}},metaSchema:{anyOf:[{type:"string"},{type:"object",properties:{properties:{$ref:"#/$defs/stringMap"},items:{$ref:"#/$defs/stringList"},required:{$ref:"#/$defs/stringOrMap"},dependencies:{$ref:"#/$defs/stringOrMap"}},additionalProperties:{type:"string"}}],$defs:{stringMap:{type:"object",additionalProperties:{type:"string"}},stringOrMap:{anyOf:[{type:"string"},{$ref:"#/$defs/stringMap"}]},stringList:{type:"array",items:{type:"string"}}}}}}var n=(e,t={})=>{if(!e.opts.allErrors)throw new Error("ajv-errors: Ajv option allErrors must be true");if(e.opts.jsPropertySyntax)throw new Error("ajv-errors: ajv option jsPropertySyntax is not supported");return e.addKeyword(r(t))};t.default=n,e.exports=n,e.exports.default=n}}return zo.exports}(),E={expose:/^\d+(-\d+)?(\/[a-zA-Z]+)?$/,ports:m,volumes:a,duration:/^(\d+(us|ms|s|m|h))+$/,byte:/^\d+(b|kb?|mb?|gb?)$/,subnet_ip_address:/^((\d{1,2}|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d{2}|2[0-4]\d|25[0-5])\/(\d|[1-2]\d|3[0-2])$|^((([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4})|(([0-9a-fA-F]{1,4}:){1,7}:)|(([0-9a-fA-F]{1,4}:){1,6}(:[0-9a-fA-F]{1,4}){1,1})|(([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2})|(([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3})|(([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4})|(([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5})|(([0-9a-fA-F]{1,4}:){1,1}(:[0-9a-fA-F]{1,4}){1,6})|(:((:[0-9a-fA-F]{1,4}){1,7}|:))|(fe80:(:[0-9a-fA-F]{1,4}){0,4}%[0-9a-zA-Z]{1,})|(::(ffff(:0{1,4}){0,1}:){0,1}((\d{1,2}|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d{2}|2[0-4]\d|25[0-5]))|(([0-9a-fA-F]{1,4}:){1,4}:((\d{1,2}|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d{2}|2[0-4]\d|25[0-5])))\/(\d|[1-9]\d|1[0-1]\d|12[0-8])$/},S=e=>{if(Array.isArray(e))for(let t=0;t<e.length;t+=1)S(e[t]);else"object"==typeof e&&(e.type&&e.format&&(e.pattern=E[e.format].toString(),delete e.format),Object.keys(e).forEach(t=>{S(e[t])}));return e};function i(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=d(e);if(!r)return e;if("string"==typeof r)return e;if(Object.prototype.hasOwnProperty.call(r,"services"))return e;let n=Object.keys(r),i=[],o=e=>i.push(e),a=(Object.keys(r).forEach(e=>{i=e,t=r[e],s=o,(t=t.links)&&s(`Service ${i} has links, which no longer create environment variables such as ${(s=t[0].split(":")[0]).toUpperCase()}_PORT. If you are using those in your application code, you should instead connect directly to the hostname, e.g. '${s}'.`),i=e,t=r[e],s=o,(t=t.external_links)&&s(`Service ${i} has external_links: ${t}, which now work slightly differently. In particular, two containers must be connected to at least one network in common to communicate, even if explicitly linked together.\n\nEither connect the external container to your app's default network, or connect both the external container and your service's containers to a pre-existing network. See https://docs.docker.com/compose/networking/ for more on how to do this.`);var t,s=r[e],i=n;if(s.net){let e=s.net;e.startsWith("container:")&&(t=e.split(":")[1],i.includes(t))&&(e="service:"+t),s.network_mode=e,delete s.net}(i=r[e]).dockerfile&&(i.build={context:i.build,dockerfile:i.dockerfile},delete i.dockerfile),(t=r[e]).log_driver&&(t.logging={driver:t.log_driver},t.log_opt&&(t.logging.options=t.log_opt,delete t.log_opt),delete t.log_driver);var a=r[e],l=n;if(a.volumes_from)for(let e=0;e<a.volumes_from.length;e+=1){var c=a.volumes_from[e];l.includes(c.split(":")[0])||(a.volumes_from[e]="container:"+c)}}),{});return Object.keys(r).forEach(e=>{a[e]=r[e],delete r[e]}),r.version="2.4",r.services=a,u=o,0<(f=(e=>{let t=[];return Object.values(e).forEach(e=>(e.volumes||[]).forEach(e=>t.push(e))),e=new Set(t.map(e=>(e=l(e),c(e)?e:void 0))),Array.from(e).filter(e=>e).map(e=>({[e]:{external:!0,name:e}}))})((e=r).services)).length&&(u(`Named volumes (${f.map(e=>JSON.stringify(e)).join(",")}) must be explicitly declared. Creating a 'volumes' section with declarations.\n\nFor backwards-compatibility, they've been declared as external. If you don't mind the volume names being prefixed with the project name, you can remove the 'external' option from each one.`),e.volumes=f),s(r,"networks"),s(r,"volumes"),i.map(e=>"# "+e.replace(/\n/g,"\n#")).join("\n")+(0<i.length?"\n":"")+v(r,t);var u,f}e.getDockerComposeSchemaWithoutFormats=()=>S(w),e.getVolumeNameFromVolumeSpec=l,e.isNamedVolume=c,e.migrateFromV1ToV2x=i,e.migrateFromV2xToV3x=function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=d(e);if(!r)return e;if("string"==typeof r)return e;if(!r.version||r.version.startsWith("3"))return e;let n=[],i=e=>n.push(e);return Object.keys(r.services).forEach(e=>{let t=r.services[e];t.cpus&&o(t,"deploy/resources/limits/cpus",t.cpus),t.mem_limit&&o(t,"deploy/resources/limits/memory",t.mem_limit),t.pids_limit&&o(t,"deploy/resources/limits/pids",t.pids_limit),t.mem_reservation&&o(t,"deploy/resources/reservations/memory",t.mem_reservation),t.volume_driver&&(i(`Service ${e} has volume_driver:${t.volume_driver}: Instead of setting the volume driver on the service, define a volume using the top-level volumes option (https://docs.docker.com/compose/compose-file/compose-file-v3/#volume-configuration-reference) and specify the driver there.`),delete t.volume_driver),t.volumes_from&&(i(`Service ${e} has volumes_from:${t.volumes_from} To share a volume between services, define it using the top-level volumes option (https://docs.docker.com/compose/compose-file/compose-file-v3/#volume-configuration-reference) and reference it from each service that shares it using the service-level volumes option (https://docs.docker.com/compose/compose-file/compose-file-v3/#driver).`),delete t.volumes_from),["cpu_shares","cpu_quota","cpuset","memswap_limit"].forEach(r=>{Object.prototype.hasOwnProperty.call(t,r)&&i(`Service ${e} has ${r}:${t.k} These have been replaced by the resources key under deploy (https://docs.docker.com/compose/compose-file/compose-file-v3/#resources). deploy configuration only takes effect when using docker stack deploy, and is ignored by docker-compose.`),delete t[r]}),t.extends&&(i(`Service ${e} has extends:${t.extends} This option has been removed for version: "3.x" Compose files. For more information on extends, see https://docs.docker.com/compose/multiple-compose-files/extends/.`),delete t.extends),t.group_add&&(i(`Service ${e} has group_add:${t.group_add} This option has been removed for version: "3.x" Compose files.`),delete t.group_add),delete t.cpus,delete t.mem_limit,delete t.pids_limit,delete t.mem_reservation}),r.version="3",s(r,"networks"),s(r,"volumes"),n.map(e=>"# "+e.replace(/\n/g,"\n#")).join("\n")+(0<n.length?"\n":"")+v(r,t)},e.migrateFromV3xToV2x=function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=d(e);return r&&"string"!=typeof r&&r.version&&!r.version.startsWith("2")&&r.services?(Object.keys(r.services).forEach(e=>{var t;(e=r.services[e]).deploy&&e.deploy.resources&&((t=e.deploy.resources).limits&&(t.limits.cpus&&(e.cpus=t.limits.cpus),t.limits.memory&&(e.mem_limit=t.limits.memory),t.limits.pids)&&(e.pids_limit=t.limits.pids),t.reservations)&&t.reservations.memory&&(e.mem_reservation=t.reservations.memory),e.deploy&&e.deploy.restart_policy&&e.deploy.restart_policy.condition&&!e.restart&&(e.restart=e.deploy.restart_policy.condition),delete e.deploy}),r.version="2.4",s(r,"networks"),s(r,"volumes"),v(r,t)):e},e.migrateToCommonSpec=function(e){var r,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a=i(e,n);let l=d(a);return l&&"string"!=typeof l?(a=a.match(/^\s*#[^\r\n]*/gm)||[],Object.keys(l.services||[]).forEach(e=>{(e=l.services[e]).cpus&&o(e,"deploy/resources/limits/cpus",e.cpus),e.mem_limit&&o(e,"deploy/resources/limits/memory",e.mem_limit),e.pids_limit&&o(e,"deploy/resources/limits/pids",e.pids_limit),e.mem_reservation&&o(e,"deploy/resources/reservations/memory",e.mem_reservation),delete e.cpus,delete e.mem_limit,delete e.pids_limit,delete e.mem_reservation}),delete(r=function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach(function(t){var r,s,i;r=e,s=n[t],(t="symbol"==typeof(i=(e=>{if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=typeof(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")})(t))?i:i+"")in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({name:"<your project name>"},l)).version,s(r,"networks"),s(r,"volumes"),a.map(e=>"# "+e.replace(/^\s*#\s+/g,"")).join("\n")+(0<a.length?"\n":"")+v(r,n)):e},e.validateDockerComposeToCommonSpec=e=>{let t=d(e),r=new _({allErrors:!0,strict:!1});$(r),Object.keys(E).forEach(e=>r.addFormat(e,E[e]));var n=r.compile(w);if(n(t))return[];let s=k.parseDocument(e,{prettyErrors:!0});return n.errors.map(t=>{let r=t.instancePath;"additionalProperties"===t.keyword&&(r+="/"+t.params.additionalProperty);var n=r.split("/").slice(1),i=(i=null===(i=s.getIn(n,!0))?s.getIn(n.slice(0,-1),!0):i)?i.range[0]+1:0,o="https://docs.docker.com/compose/compose-file/";return{line:i=(e.substring(0,i).match(/\n/g)||[]).length+1,message:"additionalProperties"===t.keyword?`Line ${i}(${r}): '${t.params.additionalProperty}' is unknown for '${r}'`:"format"===t.keyword?`Line ${i}(${r}): must have a valid syntax for '${t.params.format}'`:"oneOf"===t.keyword?`Line ${i}(${r}): must be either a Short Syntax (string(s)) or a Long Syntax (object(s))`:`Line ${i}(${r}): ${t.message} (${t.keyword}: ${JSON.stringify(t.params)})`,helpLink:t=("services"===(t=n[0])?o+"05-services/":"networks"===t?o+"06-networks/":"volumes"===t?o+"07-volumes/":"configs"===t?o+"08-configs/":"secrets"===t?o+"09-secrets/":o)+(n[2]?"#"+n[2]:"")}})},e.yamlCheck=h,e.yamlParse=d,e.yamlStringify=v}}return $e})());Go||(Go=1,Jo=function(e,t,r,n,s,i,o,a){var l,c,u;if(!e)throw void 0===t?u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(l=[r,n,s,i,o,a],c=0,(u=new Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"),u.framesToPop=1,u});var Wo=i(Jo);dr=(e,t)=>({type:e,path:t});let Yo={"add-host":dr("Array","extra_hosts"),"blkio-weight":dr("IntValue","blkio_config/weight"),"blkio-weight-device":dr("DeviceBlockIOConfigWeight","blkio_config/weight_device"),"cap-add":dr("Array","cap_add"),"cap-drop":dr("Array","cap_drop"),"cgroup-parent":dr("Value","cgroup_parent"),cgroupns:dr("Value","cgroup"),"cpu-period":dr("Value","cpu_period"),"cpu-quota":dr("Value","cpu_quota"),"cpu-rt-period":dr("Value","cpu_rt_period"),"cpu-rt-runtime":dr("Value","cpu_rt_runtime"),"cpu-shares":dr("IntValue","cpu_shares"),cpus:dr("FloatValue","deploy/resources/limits/cpus"),detached:dr("Switch",""),"device-cgroup-rule":dr("Array","device_cgroup_rules"),"device-read-bps":dr("DeviceBlockIOConfigRate","blkio_config/device_read_bps"),"device-read-iops":dr("DeviceBlockIOConfigRate","blkio_config/device_read_iops"),"device-write-bps":dr("DeviceBlockIOConfigRate","blkio_config/device_write_bps"),"device-write-iops":dr("DeviceBlockIOConfigRate","blkio_config/device_write_iops"),device:dr("Array","devices"),"dns-opt":dr("Array","dns_opt"),"dns-search":dr("Array","dns_search"),dns:dr("Array","dns"),domainname:dr("Value","domainname"),entrypoint:dr("Array","entrypoint"),"env-file":dr("Array","env_file"),env:dr("Envs","environment"),expose:dr("Array","expose"),gpus:dr("Gpus","deploy"),"group-add":dr("Array","group_add"),"health-cmd":dr("Value","healthcheck/test"),"health-interval":dr("Value","healthcheck/interval"),"health-retries":dr("Value","healthcheck/retries"),"health-start-period":dr("Value","healthcheck/start_period"),"health-timeout":dr("Value","healthcheck/timeout"),hostname:dr("Value","hostname"),init:dr("Switch","init"),interactive:dr("Switch","stdin_open"),ip6:dr("Value","networks/¤network¤/ipv6_address"),ip:dr("Value","networks/¤network¤/ipv4_address"),ipc:dr("Value","ipc"),isolation:dr("Value","isolation"),label:dr("Array","labels"),"link-local-ip":dr("Array","networks/¤network¤/link_local_ips"),link:dr("Array","links"),"log-driver":dr("Value","logging/driver"),"log-opt":dr("Map","logging/options"),"mac-address":dr("Value","mac_address"),"memory-reservation":dr("Value","deploy/resources/reservations/memory"),"memory-swap":dr("Value","memswap_limit"),"memory-swappiness":dr("Value","mem_swappiness"),memory:dr("Value","deploy/resources/limits/memory"),mount:dr("MapArray","volumes"),name:dr("Value","container_name"),net:dr("Networks","network_mode"),"network-alias":dr("Array","networks/¤network¤/aliases"),network:dr("Networks","network_mode"),"no-healthcheck":dr("Switch","healthcheck/disable"),"oom-kill-disable":dr("Switch","oom_kill_disable"),"oom-score-adj":dr("Value","oom_score_adj"),pid:dr("Value","pid"),"pids-limit":dr("IntValue","deploy/resources/limits/pids"),platform:dr("Value","platform"),privileged:dr("Switch","privileged"),publish:dr("Array","ports"),pull:dr("Value","pull_policy"),"read-only":dr("Switch","read_only"),restart:dr("Value","restart"),rm:dr("Switch",""),runtime:dr("Value","runtime"),"security-opt":dr("Array","security_opt"),"shm-size":dr("Value","shm_size"),"stop-signal":dr("Value","stop_signal"),"stop-timeout":dr("Value","stop_grace_period"),"storage-opt":dr("Map","storage_opt"),sysctl:dr("Array","sysctls"),tmpfs:dr("Value","tmpfs"),tty:dr("Switch","tty"),ulimit:dr("Ulimits","ulimits"),user:dr("Value","user"),userns:dr("Value","userns_mode"),uts:dr("Value","uts"),volume:dr("Array","volumes"),"volumes-from":dr("Array","volume_from"),workdir:dr("Value","working_dir")},Qo=(Yo.v=Yo.volume,Yo.p=Yo.publish,Yo.e=Yo.env,Yo.l=Yo.label,Yo.h=Yo.hostname,Yo.u=Yo.user,Yo.w=Yo.workdir,Yo.c=Yo["cpu-shares"],Yo.l=Yo.label,Yo.t=Yo.tty,Yo.i=Yo.interactive,Yo.m=Yo.memory,Yo.d=Yo.detached,e=>[...e].reduce((e,t)=>{var[t,r]=t;return s(s({},e),{},{[t]:r})},{})),Xo=(e,t,r)=>(e=e.split(t),Qo(e.map(e=>{var[e,t]=e.split(r,2);return[e,/^-?\d+$/.test(String(t))?parseInt(t,10):t]}))),Zo=e=>"string"!=typeof e||"'"!==e[0]&&'"'!==e[0]||e[e.length-1]!==e[0]?e:e.substring(1,e.length-1),ea=(e,t)=>(e=Yo[e])?""===e.path?{}:"Switch"===e.type||t?((e,t)=>{var r;return"Array"===e.type?{path:e.path,value:Array.isArray(t)?t:[String(t)]}:"Networks"===e.type?(r=String(t)).match(/^(host|bridge|none)$|^container:.+/)?{path:"network_mode",value:r}:{path:"networks",value:{[r]:{}}}:"Switch"===e.type?{path:e.path,value:"true"===t||!0===t}:"Gpus"===e.type?{path:"deploy",value:{resources:{reservations:{devices:[{driver:"nvidia",count:"all"===t?"all":parseInt(t,10),capabilities:["gpu"]}]}}}}:"Envs"===e.type?(Array.isArray(t)?t:[t]).map(t=>{var[t,...r]=String(t).split("=");return{path:e.path,value:[r.length?t+"="+Zo(r.join("=")):t]}}):"MapArray"===e.type?(Array.isArray(t)?t:[t]).map(t=>({path:e.path,value:[Xo(String(t),",","=")]})):"Map"===e.type?(r=Array.isArray(t)?t.join(","):t,{path:e.path,value:Xo(String(r),",","=")}):"DeviceBlockIOConfigWeight"===e.type?(Array.isArray(t)?t:[t]).map(t=>{var[t,r]=String(t).split(":");return{path:e.path,value:[{path:t,weight:parseInt(r,10)}]}}):"DeviceBlockIOConfigRate"===e.type?(Array.isArray(t)?t:[t]).map(t=>{var[t,r]=String(t).split(":");return{path:e.path,value:[{path:t,rate:/^-?\d+$/.test(String(r))?parseInt(r,10):r}]}}):"Ulimits"===e.type?(Array.isArray(t)?t:[t]).map(t=>{var r,n,[t,s]=String(t).split("=");return Wo(t&&s,e.type+" must be in the format of: <type>=<soft limit>[:<hard limit>]"),s.includes(":")?([r,n]=s.split(":"),Wo(r&&n,e.type+" must be in the format of: <type>=<soft limit>[:<hard limit>]"),{path:e.path+"/"+t,value:{soft:parseInt(r,10),hard:parseInt(n,10)}}):{path:e.path+"/"+t,value:parseInt(s,10)}}):"IntValue"===e.type?{path:e.path,value:parseInt(t,10)}:"FloatValue"===e.type?{path:e.path,value:parseFloat(t)}:{path:e.path,value:String(t)}})(e,t):null:null,ta=["_"],ra=(e,t)=>{e=e.replace(/\n\s*#[^\n]+/g,"").replace(/\$\([^)]*\)/g,e=>e.replace(/\s/g,"¤")).replace(/\\\n/g,"").replace(/(\s)+/g," ").trim().replace(/\s-p(\d)/g," -p $1").replace(/\s\\\s/g," ").replace(/\s*;$/g,"").replace(/^(?:\s*\$\s+)?(?:docker|podman)\s+(run|create|container\s+run|service\s+create)/,"");var r=(e=ge(e,{configuration:{"halt-at-non-option":!0,"camel-case-expansion":!1,"boolean-negation":!1},boolean:["i","interactive","t","tty","d","detach","rm","init","help","privileged","P","publish-all","no-healthcheck","oom-kill-disable","read-only","sig-proxy"]}))._;e=function(e,t){if(null==e)return{};var r,n=((e,t)=>{if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n})(e,t);if(Object.getOwnPropertySymbols)for(var s=Object.getOwnPropertySymbols(e),i=0;i<s.length;i++)r=s[i],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}(e,ta);let n=e=>Zo(String(e).trim()).replace(/\$\([^)]*\)/g,e=>e.replace(/¤/g," "));e=Object.fromEntries(Object.entries(e).map(e=>{var[e,t]=e;return Array.isArray(t)?[e.trim(),t.map(e=>"string"==typeof e?n(e):e)]:[e.trim(),"string"==typeof t?n(t):t]}));let s={};var{net:i,network:o}=e;let a=i||o||"default",l=[];if(Object.entries(e).forEach(e=>{var[e,t]=e,r=ea(e,t);r?(Array.isArray(r)?r:[r]).forEach(e=>{e=((e,t)=>e.path?e.path.replace("¤network¤",t.toString()).split("/").reduceRight((e,t)=>({[t]:e}),e.value):{})(e,a),s=_e(s,e)}):(r=1===e.length?"-":"--",t=!0===t?"":"="+t.toString(),l.push("# "+r+e+t))}),o=Zo(null==(i=r[0])?void 0:i.trim()),s.image=o,1<r.length){let e=1;for(var c=[];e<r.length;)c.push(r[e]),e+=1;s.command=c.join(" ")}"host"===s.network_mode&&delete s.ports;var u,f=[];if(s.volumes)for(let e=0;e<s.volumes.length;e+=1){let t;t="string"==typeof s.volumes[e]?s.volumes[e].split(":")[0]:s.volumes[e].source,!(u=t)||u.includes("/")||u.includes("\\")||u.includes("$")||u.includes("<")||u.includes(">")||f.push([t,{external:{name:t}}])}s.networks&&(Object.keys(s.networks).forEach(e=>{var t;(t=s.networks[e])&&0===Object.keys(t).length&&t.constructor===Object&&(s.networks[e]=null)}),Object.values(s.networks).every(e=>!e)&&(s.networks=Object.keys(s.networks)));let p=[];if(s.networks)if(Array.isArray(s.networks))for(let e=0;e<s.networks.length;e+=1)p.push([s.networks[e],{external:!0,name:s.networks[e]}]);else Object.keys(s.networks).forEach(e=>{p.push([e,{external:!0,name:e}])});let h,d=(e=>{if(null===e||""===e||void 0===e)return"!!!invalid!!!";let t=e.includes("/")?e.split("/").slice(-1)[0]:e;return t.includes(":")?t.split(":")[0]:t})(o);e={version:"3",services:{[d]:s}},o=null!=(i=Ho.yamlParse(null!=t?t:""))?i:{},h=_e(o,e);let m="";return 0<l.length&&(m=`# ignored options for '${d}'\n${l.join("\n")}\n`),0<p.length&&(t={networks:Qo(p)},h=_e(h,t),p.forEach(e=>{var[e]=e;m+=`# named network '${e}' is marked as "external" (used by service '${d}'), so either remove "external" from network definition or it needs to be created using: docker network create -d bridge ${e}\n`})),0<f.length&&(i={volumes:Qo(f)},h=_e(h,i),f.forEach(e=>{var[e]=e;m+=`# named volume '${e}' is marked as "external" (used by service '${d}'), so either remove "external" from volume definition or it needs to be created using: docker volume create ${e}\n`})),{composeFile:h,composeCreationComments:m}};return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"latest",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:4;let s=[],i={};e=e.split(/^(?:\s*\$)?\s*(?:docker|podman)\s+/gm);let o=t;if(t&&("v2x"===r?o=Ho.migrateFromV3xToV2x(o,{indent:n}):"latest"===r&&(o=Ho.migrateToCommonSpec(o,{indent:n}))),e.forEach(e=>{var t,r;(e=String(e))&&(e.match(/^\s*(run|create|container\s+run|service\s+create)/)?(({composeFile:t,composeCreationComments:r}=ra("docker "+e,o)),r&&s.push(r),i=_e(i,t)):s.push(`# ignored : docker/podman ${e}\n`))}),!i.services)throw new SyntaxError("must have at least a valid docker/podman run/create/service create/container run command");let a=Ho.yamlStringify(i,{indent:n}).trim();if("v2x"===r)a=Ho.migrateFromV3xToV2x(a,{indent:n});else if("latest"===r)a=Ho.migrateToCommonSpec(a,{indent:n});else if("v3x"!==r)throw new Error(`Unknown ComposeVersion '${r}'`);return s.join("\n")+a}}()},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=a(e),o=i[0],l=i[1],c=new s(function(e,t,r){return 3*(t+r)/4-r}(0,o,l)),u=0,f=l>0?o-4:o;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===l&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===l&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,s=n%3,i=[],o=16383,a=0,l=n-s;a<l;a+=o)i.push(c(e,a,a+o>l?l:a+o));return 1===s?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===s&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],n=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=i[o],n[i.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function c(e,t,r){for(var n,s=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),s.push(l(n));return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8287:(e,t,r)=>{"use strict";var n=r(7526),s=r(251),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50;var o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|m(e,t),n=a(r),s=n.write(e,t);return s!==r&&(n=n.slice(0,s)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(U(e,Uint8Array)){var t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(U(e,ArrayBuffer)||e&&U(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(U(e,SharedArrayBuffer)||e&&U(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);var s=function(e){if(l.isBuffer(e)){var t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||q(e.length)?a(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return u(e),a(e<0?0:0|d(e))}function p(e){for(var t=e.length<0?0:0|d(e.length),r=a(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function d(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||U(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(e).length;default:if(s)return n?-1:R(e).length;t=(""+t).toLowerCase(),s=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,s){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),q(r=+r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,s);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,s){var i,o=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,l/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(s){var u=-1;for(i=r;i<a;i++)if(c(e,i)===c(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===l)return u*o}else-1!==u&&(i-=i-u),u=-1}else for(r+l>a&&(r=a-l),i=r;i>=0;i--){for(var f=!0,p=0;p<l;p++)if(c(e,i+p)!==c(t,p)){f=!1;break}if(f)return i}return-1}function w(e,t,r,n){r=Number(r)||0;var s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;var i=t.length;n>i/2&&(n=i/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(q(a))return o;e[r+o]=a}return o}function k(e,t,r,n){return K(R(t,e.length-r),e,r,n)}function _(e,t,r,n){return K(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function $(e,t,r,n){return K(B(t),e,r,n)}function E(e,t,r,n){return K(function(e,t){for(var r,n,s,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,s=r%256,i.push(s),i.push(n);return i}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);for(var n=[],s=t;s<r;){var i,o,a,l,c=e[s],u=null,f=c>239?4:c>223?3:c>191?2:1;if(s+f<=r)switch(f){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[s+1]))&&(l=(31&c)<<6|63&i)>127&&(u=l);break;case 3:i=e[s+1],o=e[s+2],128==(192&i)&&128==(192&o)&&(l=(15&c)<<12|(63&i)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:i=e[s+1],o=e[s+2],a=e[s+3],128==(192&i)&&128==(192&o)&&128==(192&a)&&(l=(15&c)<<18|(63&i)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,f=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),s+=f}return function(e){var t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=N));return r}(n)}t.kMaxLength=o,l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},l.allocUnsafe=function(e){return f(e)},l.allocUnsafeSlow=function(e){return f(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(U(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),U(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,s=0,i=Math.min(r,n);s<i;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var i=e[r];if(U(i,Uint8Array))s+i.length>n.length?l.from(i).copy(n,s):Uint8Array.prototype.set.call(n,i,s);else{if(!l.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,s)}s+=i.length}return n},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):y.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,s){if(U(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(s>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(i,o),c=this.slice(n,s),u=e.slice(t,r),f=0;f<a;++f)if(c[f]!==u[f]){i=c[f],o=u[f];break}return i<o?-1:o<i?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var s=this.length-t;if((void 0===r||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return $(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function A(e,t,r){var n="";r=Math.min(e.length,r);for(var s=t;s<r;++s)n+=String.fromCharCode(127&e[s]);return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var s=t;s<r;++s)n+=String.fromCharCode(e[s]);return n}function x(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var s="",i=t;i<r;++i)s+=V[e[i]];return s}function j(e,t,r){for(var n=e.slice(t,r),s="",i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+256*n[i+1]);return s}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,r,n,s,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n,s,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,n,i){return t=+t,r>>>=0,i||C(e,0,r,4),s.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,i){return t=+t,r>>>=0,i||C(e,0,r,8),s.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=t,s=1,i=this[e+--n];n>0&&(s*=256);)i+=this[e+--n]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),s.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),s.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),s.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),s.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||T(this,e,t,r,Math.pow(2,8*r)-1,0);var s=1,i=0;for(this[t]=255&e;++i<r&&(s*=256);)this[t+i]=e/s&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||T(this,e,t,r,Math.pow(2,8*r)-1,0);var s=r-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var s=Math.pow(2,8*r-1);T(this,e,t,r,s-1,-s)}var i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var s=Math.pow(2,8*r-1);T(this,e,t,r,s-1,-s)}var i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),s},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var s=e.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=l.isBuffer(e)?e:l.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};var D=/[^+/0-9A-Za-z-_]/g;function R(e,t){var r;t=t||1/0;for(var n=e.length,s=null,i=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!s){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function B(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){for(var s=0;s<n&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function U(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}var V=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,s=0;s<16;++s)t[n+s]=e[r]+e[s];return t}()}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return s[e].call(r.exports,r,r.exports,o),r.exports}o.m=s,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var s=Object.create(null);o.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,o.d(s,i),s},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce((t,r)=>(o.f[r](e,t),t),[])),o.u=e=>e+".podletjs.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},n="PodletJS:",o.l=(e,t,s,i)=>{if(r[e])r[e].push(t);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var f=c[u];if(f.getAttribute("src")==e||f.getAttribute("data-webpack")==n+s){a=f;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",n+s),a.src=e),r[e]=[t];var p=(t,n)=>{a.onerror=a.onload=null,clearTimeout(h);var s=r[e];if(delete r[e],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach(e=>e(n)),t)return t(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={792:0};o.f.j=(t,r)=>{var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise((r,s)=>n=e[t]=[r,s]);r.push(n[2]=s);var i=o.p+o.u(t),a=new Error;o.l(i,r=>{if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",a.name="ChunkLoadError",a.type=s,a.request=i,n[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var n,s,[i,a,l]=r,c=0;if(i.some(t=>0!==e[t])){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);l&&l(o)}for(t&&t(r);c<i.length;c++)s=i[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=this.webpackChunkPodletJS=this.webpackChunkPodletJS||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a={};return(()=>{"use strict";o.r(a),o.d(a,{ComposeParser:()=>Fr,Container:()=>r,PodletJS:()=>Jr,QuadletGenerator:()=>n,createPodlet:()=>Gr,default:()=>Hr});var e={};o.r(e),o.d(e,{BOM:()=>mr,DOCUMENT:()=>yr,FLOW_END:()=>gr,SCALAR:()=>vr,createScalarToken:()=>nr,isCollection:()=>br,isScalar:()=>wr,prettyToken:()=>kr,resolveAsScalar:()=>rr,setScalarValue:()=>sr,stringify:()=>ar,tokenType:()=>_r,visit:()=>hr});var t={};o.r(t),o.d(t,{Alias:()=>U,CST:()=>e,Composer:()=>tr,Document:()=>Nt,Lexer:()=>Pr,LineCounter:()=>xr,Pair:()=>we,Parser:()=>Dr,Scalar:()=>F,Schema:()=>Ot,YAMLError:()=>Pt,YAMLMap:()=>Oe,YAMLParseError:()=>xt,YAMLSeq:()=>Ae,YAMLWarning:()=>jt,isAlias:()=>h,isCollection:()=>b,isDocument:()=>d,isMap:()=>m,isNode:()=>w,isPair:()=>y,isScalar:()=>g,isSeq:()=>v,parse:()=>Ur,parseAllDocuments:()=>Br,parseDocument:()=>Kr,stringify:()=>qr,visit:()=>S,visitAsync:()=>N});class r{constructor(){this.image="",this.containerName=null,this.exec=null,this.addCapability=[],this.dropCapability=[],this.addDevice=[],this.mount=[],this.volume=[],this.network=[],this.networkAlias=[],this.publishPort=[],this.exposeHostPort=[],this.ip=null,this.ip6=null,this.dns=[],this.dnsOption=[],this.dnsSearch=[],this.environment=[],this.environmentFile=[],this.environmentHost=!1,this.noNewPrivileges=!1,this.securityLabelDisable=!1,this.securityLabelFileType=null,this.securityLabelLevel=null,this.securityLabelNested=!1,this.securityLabelType=null,this.seccompProfile=null,this.mask=[],this.unmask=null,this.user=null,this.group=null,this.groupAdd=[],this.userNS=null,this.uidMap=[],this.gidMap=[],this.subUidMap=null,this.subGidMap=null,this.readOnly=!1,this.readOnlyTmpfs=!0,this.runInit=!1,this.workingDir=null,this.hostName=null,this.timezone=null,this.shmSize=null,this.tmpfs=[],this.healthCmd=null,this.healthInterval=null,this.healthOnFailure=null,this.healthRetries=null,this.healthStartPeriod=null,this.healthStartupCmd=null,this.healthStartupInterval=null,this.healthStartupRetries=null,this.healthStartupSuccess=null,this.healthStartupTimeout=null,this.healthTimeout=null,this.notify="conmon",this.stopSignal=null,this.stopTimeout=null,this.pod=null,this.logDriver=null,this.logOpt=[],this.label=[],this.annotation=[],this.pidsLimit=null,this.ulimit=[],this.sysctl=[],this.autoUpdate=null,this.pull=null,this.secret=[],this.rootfs=null,this.entrypoint=null,this.podmanArgs=null}setImage(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Image must be a non-empty string");return this.image=e.trim(),this}setContainerName(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Container name must be a non-empty string");const t=e.trim();if(!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(t))throw new Error("Container name must start with alphanumeric character and contain only alphanumeric characters, underscores, periods, and hyphens");return this.containerName=t,this}setExec(e){if(e&&"string"!=typeof e)throw new Error("Exec command must be a string");return this.exec=e,this}addPublishPort(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Port must be a non-empty string");const t=e.trim();if(!/^(\d+:)?\d+(\/(?:tcp|udp|sctp))?$/.test(t))throw new Error('Port must be in format "host:container" or "container", optionally with protocol "/tcp", "/udp", or "/sctp"');const r=t.replace(/\/(?:tcp|udp|sctp)$/,"").split(":");for(const e of r){const t=parseInt(e,10);if(t<1||t>65535)throw new Error(`Port ${t} is out of valid range (1-65535)`)}return this.publishPort.push(t),this}addEnvironment(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Environment variable must be a non-empty string");const t=e.trim();if(!t.includes("="))throw new Error('Environment variable must be in format "KEY=value"');return this.environment.push(t),this}addVolume(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Volume must be a non-empty string");const t=e.trim();if(!t.includes(":")&&!t.startsWith("/"))throw new Error('Volume must be in format "source:destination" or an absolute path');return this.volume.push(t),this}addLabel(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Label must be a non-empty string");const t=e.trim();if(!t.includes("="))throw new Error('Label must be in format "key=value"');return this.label.push(t),this}setPod(e){return this.pod=e,this}getDefaultName(){if(this.containerName)return this.containerName;const e=this.image.split("/");return e[e.length-1].split(":")[0]}validate(){if(!this.image)throw new Error("Image is required");for(const e of this.publishPort)try{const t=e.split(":");for(const r of t){const t=parseInt(r,10);if(isNaN(t)||t<1||t>65535)throw new Error(`Invalid port: ${e}`)}}catch(t){if(t.message.startsWith("Invalid port:"))throw t;throw new Error(`Invalid port format: ${e}`)}}clone(){const e=new r;return e.image=this.image,e.containerName=this.containerName,e.exec=this.exec,e.ip=this.ip,e.ip6=this.ip6,e.environmentHost=this.environmentHost,e.noNewPrivileges=this.noNewPrivileges,e.securityLabelDisable=this.securityLabelDisable,e.securityLabelFileType=this.securityLabelFileType,e.securityLabelLevel=this.securityLabelLevel,e.securityLabelNested=this.securityLabelNested,e.securityLabelType=this.securityLabelType,e.seccompProfile=this.seccompProfile,e.unmask=this.unmask,e.user=this.user,e.group=this.group,e.userNS=this.userNS,e.subUidMap=this.subUidMap,e.subGidMap=this.subGidMap,e.readOnly=this.readOnly,e.readOnlyTmpfs=this.readOnlyTmpfs,e.runInit=this.runInit,e.workingDir=this.workingDir,e.hostName=this.hostName,e.timezone=this.timezone,e.shmSize=this.shmSize,e.healthCmd=this.healthCmd,e.healthInterval=this.healthInterval,e.healthOnFailure=this.healthOnFailure,e.healthRetries=this.healthRetries,e.healthStartPeriod=this.healthStartPeriod,e.healthTimeout=this.healthTimeout,e.healthStartupCmd=this.healthStartupCmd,e.healthStartupInterval=this.healthStartupInterval,e.healthStartupRetries=this.healthStartupRetries,e.healthStartupSuccess=this.healthStartupSuccess,e.healthStartupTimeout=this.healthStartupTimeout,e.notify=this.notify,e.stopSignal=this.stopSignal,e.stopTimeout=this.stopTimeout,e.pod=this.pod,e.logDriver=this.logDriver,e.pidsLimit=this.pidsLimit,e.autoUpdate=this.autoUpdate,e.pull=this.pull,e.rootfs=this.rootfs,e.entrypoint=this.entrypoint,e.podmanArgs=this.podmanArgs,e.addCapability=[...this.addCapability],e.dropCapability=[...this.dropCapability],e.addDevice=[...this.addDevice],e.mount=[...this.mount],e.volume=[...this.volume],e.network=[...this.network],e.networkAlias=[...this.networkAlias],e.publishPort=[...this.publishPort],e.exposeHostPort=[...this.exposeHostPort],e.dns=[...this.dns],e.dnsOption=[...this.dnsOption],e.dnsSearch=[...this.dnsSearch],e.environment=[...this.environment],e.environmentFile=[...this.environmentFile],e.mask=[...this.mask],e.groupAdd=[...this.groupAdd],e.uidMap=[...this.uidMap],e.gidMap=[...this.gidMap],e.tmpfs=[...this.tmpfs],e.label=[...this.label],e.logOpt=[...this.logOpt],e.annotation=[...this.annotation],e.ulimit=[...this.ulimit],e.sysctl=[...this.sysctl],e.secret=[...this.secret],e}}class n{static generateFile(e,t={}){const{name:r=e.getDefaultName(),unit:n=null,service:s=null,install:i=null,globals:o=null}=t;let a="";return n&&(a+=this.generateUnitSection(n)+"\n"),a+=this.generateContainerSection(e),o&&o.podmanArgs&&(a+=`\n[GlobalArgs]\nPodmanArgs=${o.podmanArgs}\n`),s&&(a+="\n"+this.generateServiceSection(s)),i&&(a+="\n"+this.generateInstallSection(i)),a}static generateContainerSection(e){let t="[Container]\n";return t+=`Image=${e.image}\n`,e.containerName&&(t+=`ContainerName=${e.containerName}\n`),e.exec&&(t+=`Exec=${e.exec}\n`),e.publishPort.forEach(e=>{t+=`PublishPort=${e}\n`}),e.volume.forEach(e=>{t+=`Volume=${e}\n`}),e.environment.forEach(e=>{t+=`Environment=${this.escapeValue(e)}\n`}),e.environmentFile.forEach(e=>{t+=`EnvironmentFile=${e}\n`}),e.environmentHost&&(t+="EnvironmentHost=true\n"),e.label.forEach(e=>{t+=`Label=${this.escapeValue(e)}\n`}),e.network.forEach(e=>{t+=`Network=${e}\n`}),e.networkAlias.forEach(e=>{t+=`NetworkAlias=${e}\n`}),e.addCapability.length>0&&(t+=`AddCapability=${e.addCapability.join(" ")}\n`),e.dropCapability.length>0&&(t+=`DropCapability=${e.dropCapability.join(" ")}\n`),e.dns.length>0&&(e.dns.includes("none")?t+="DNS=none\n":e.dns.forEach(e=>{t+=`DNS=${e}\n`})),e.dnsOption.forEach(e=>{t+=`DNSOption=${e}\n`}),e.dnsSearch.forEach(e=>{t+=`DNSSearch=${e}\n`}),e.noNewPrivileges&&(t+="NoNewPrivileges=true\n"),e.securityLabelDisable&&(t+="SecurityLabelDisable=true\n"),e.securityLabelFileType&&(t+=`SecurityLabelFileType=${e.securityLabelFileType}\n`),e.securityLabelLevel&&(t+=`SecurityLabelLevel=${e.securityLabelLevel}\n`),e.securityLabelNested&&(t+="SecurityLabelNested=true\n"),e.securityLabelType&&(t+=`SecurityLabelType=${e.securityLabelType}\n`),e.seccompProfile&&(t+=`SeccompProfile=${e.seccompProfile}\n`),e.mask.length>0&&(t+=`Mask=${e.mask.join(":")}\n`),e.unmask&&(Array.isArray(e.unmask)?t+=`Unmask=${e.unmask.join(":")}\n`:t+=`Unmask=${e.unmask}\n`),e.user&&(t+=`User=${e.user}\n`),e.group&&(t+=`Group=${e.group}\n`),e.groupAdd.forEach(e=>{t+=`GroupAdd=${e}\n`}),e.userNS&&(t+=`UserNS=${e.userNS}\n`),e.uidMap.forEach(e=>{t+=`UIDMap=${e}\n`}),e.gidMap.forEach(e=>{t+=`GIDMap=${e}\n`}),e.subUidMap&&(t+=`SubUIDMap=${e.subUidMap}\n`),e.subGidMap&&(t+=`SubGIDMap=${e.subGidMap}\n`),e.readOnly&&(t+="ReadOnly=true\n"),e.readOnlyTmpfs||(t+="ReadOnlyTmpfs=false\n"),e.runInit&&(t+="RunInit=true\n"),e.workingDir&&(t+=`WorkingDir=${e.workingDir}\n`),e.hostName&&(t+=`HostName=${e.hostName}\n`),e.timezone&&(t+=`Timezone=${e.timezone}\n`),e.shmSize&&(t+=`ShmSize=${e.shmSize}\n`),e.tmpfs.forEach(e=>{t+=`Tmpfs=${e}\n`}),e.healthCmd&&(t+=`HealthCmd=${e.healthCmd}\n`),e.healthInterval&&(t+=`HealthInterval=${e.healthInterval}\n`),e.healthOnFailure&&(t+=`HealthOnFailure=${e.healthOnFailure}\n`),e.healthRetries&&(t+=`HealthRetries=${e.healthRetries}\n`),e.healthStartPeriod&&(t+=`HealthStartPeriod=${e.healthStartPeriod}\n`),e.healthTimeout&&(t+=`HealthTimeout=${e.healthTimeout}\n`),e.healthStartupCmd&&(t+=`HealthStartupCmd=${e.healthStartupCmd}\n`),e.healthStartupInterval&&(t+=`HealthStartupInterval=${e.healthStartupInterval}\n`),e.healthStartupRetries&&(t+=`HealthStartupRetries=${e.healthStartupRetries}\n`),e.healthStartupSuccess&&(t+=`HealthStartupSuccess=${e.healthStartupSuccess}\n`),e.healthStartupTimeout&&(t+=`HealthStartupTimeout=${e.healthStartupTimeout}\n`),e.notify&&"conmon"!==e.notify&&("container"===e.notify?t+="Notify=true\n":"healthy"===e.notify&&(t+="Notify=healthy\n")),e.stopSignal&&(t+=`StopSignal=${e.stopSignal}\n`),e.stopTimeout&&(t+=`StopTimeout=${e.stopTimeout}\n`),e.pod&&(t+=`Pod=${e.pod}\n`),e.logDriver&&(t+=`LogDriver=${e.logDriver}\n`),e.logOpt.forEach(e=>{t+=`LogOpt=${e}\n`}),e.annotation.forEach(e=>{t+=`Annotation=${this.escapeValue(e)}\n`}),e.pidsLimit&&(t+=`PidsLimit=${e.pidsLimit}\n`),e.ulimit.forEach(e=>{t+=`Ulimit=${e}\n`}),e.sysctl.forEach(e=>{t+=`Sysctl=${e}\n`}),e.autoUpdate&&(t+=`AutoUpdate=${e.autoUpdate}\n`),e.pull&&(t+=`Pull=${e.pull}\n`),e.secret.forEach(e=>{t+=`Secret=${e}\n`}),e.rootfs&&(t+=`Rootfs=${e.rootfs}\n`),e.entrypoint&&(t+=`Entrypoint=${e.entrypoint}\n`),e.ip&&(t+=`IP=${e.ip}\n`),e.ip6&&(t+=`IP6=${e.ip6}\n`),e.podmanArgs&&(t+=`PodmanArgs=${e.podmanArgs}\n`),t}static generateUnitSection(e){let t="[Unit]\n";return(e.description||e.Description)&&(t+=`Description=${e.description||e.Description}\n`),e.wants&&e.wants.length>0&&(t+=`Wants=${e.wants.join(" ")}\n`),e.requires&&e.requires.length>0&&(t+=`Requires=${e.requires.join(" ")}\n`),e.after&&e.after.length>0&&(t+=`After=${e.after.join(" ")}\n`),e.before&&e.before.length>0&&(t+=`Before=${e.before.join(" ")}\n`),t}static generateServiceSection(e){let t="[Service]\n";return(e.restart||e.Restart)&&(t+=`Restart=${e.restart||e.Restart}\n`),(e.restartSec||e.RestartSec)&&(t+=`RestartSec=${e.restartSec||e.RestartSec}\n`),(e.timeoutStartSec||e.TimeoutStartSec)&&(t+=`TimeoutStartSec=${e.timeoutStartSec||e.TimeoutStartSec}\n`),t}static generateInstallSection(e){let t="[Install]\n";return e.wantedBy&&e.wantedBy.length>0&&(t+=`WantedBy=${e.wantedBy.join(" ")}\n`),e.requiredBy&&e.requiredBy.length>0&&(t+=`RequiredBy=${e.requiredBy.join(" ")}\n`),t}static escapeValue(e){return"string"==typeof e&&e.includes(" ")?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:e}}const s=Symbol.for("yaml.alias"),i=Symbol.for("yaml.document"),l=Symbol.for("yaml.map"),c=Symbol.for("yaml.pair"),u=Symbol.for("yaml.scalar"),f=Symbol.for("yaml.seq"),p=Symbol.for("yaml.node.type"),h=e=>!!e&&"object"==typeof e&&e[p]===s,d=e=>!!e&&"object"==typeof e&&e[p]===i,m=e=>!!e&&"object"==typeof e&&e[p]===l,y=e=>!!e&&"object"==typeof e&&e[p]===c,g=e=>!!e&&"object"==typeof e&&e[p]===u,v=e=>!!e&&"object"==typeof e&&e[p]===f;function b(e){if(e&&"object"==typeof e)switch(e[p]){case l:case f:return!0}return!1}function w(e){if(e&&"object"==typeof e)switch(e[p]){case s:case l:case u:case f:return!0}return!1}const k=e=>(g(e)||b(e))&&!!e.anchor,_=Symbol("break visit"),$=Symbol("skip children"),E=Symbol("remove node");function S(e,t){const r=P(t);d(e)?O(null,e.contents,r,Object.freeze([e]))===E&&(e.contents=null):O(null,e,r,Object.freeze([]))}function O(e,t,r,n){const s=x(e,t,r,n);if(w(s)||y(s))return j(e,n,s),O(e,s,r,n);if("symbol"!=typeof s)if(b(t)){n=Object.freeze(n.concat(t));for(let e=0;e<t.items.length;++e){const s=O(e,t.items[e],r,n);if("number"==typeof s)e=s-1;else{if(s===_)return _;s===E&&(t.items.splice(e,1),e-=1)}}}else if(y(t)){n=Object.freeze(n.concat(t));const e=O("key",t.key,r,n);if(e===_)return _;e===E&&(t.key=null);const s=O("value",t.value,r,n);if(s===_)return _;s===E&&(t.value=null)}return s}async function N(e,t){const r=P(t);d(e)?await A(null,e.contents,r,Object.freeze([e]))===E&&(e.contents=null):await A(null,e,r,Object.freeze([]))}async function A(e,t,r,n){const s=await x(e,t,r,n);if(w(s)||y(s))return j(e,n,s),A(e,s,r,n);if("symbol"!=typeof s)if(b(t)){n=Object.freeze(n.concat(t));for(let e=0;e<t.items.length;++e){const s=await A(e,t.items[e],r,n);if("number"==typeof s)e=s-1;else{if(s===_)return _;s===E&&(t.items.splice(e,1),e-=1)}}}else if(y(t)){n=Object.freeze(n.concat(t));const e=await A("key",t.key,r,n);if(e===_)return _;e===E&&(t.key=null);const s=await A("value",t.value,r,n);if(s===_)return _;s===E&&(t.value=null)}return s}function P(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function x(e,t,r,n){return"function"==typeof r?r(e,t,n):m(t)?r.Map?.(e,t,n):v(t)?r.Seq?.(e,t,n):y(t)?r.Pair?.(e,t,n):g(t)?r.Scalar?.(e,t,n):h(t)?r.Alias?.(e,t,n):void 0}function j(e,t,r){const n=t[t.length-1];if(b(n))n.items[e]=r;else if(y(n))"key"===e?n.key=r:n.value=r;else{if(!d(n)){const e=h(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}n.contents=r}}S.BREAK=_,S.SKIP=$,S.REMOVE=E,N.BREAK=_,N.SKIP=$,N.REMOVE=E;const I={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},T=e=>e.replace(/[!,[\]{}]/g,e=>I[e]);class C{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},C.defaultYaml,e),this.tags=Object.assign({},C.defaultTags,t)}clone(){const e=new C(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new C(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:C.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},C.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:C.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},C.defaultTags),this.atNextDocument=!1);const r=e.trim().split(/[ \t]+/),n=r.shift();switch(n){case"%TAG":{if(2!==r.length&&(t(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[e,n]=r;return this.tags[e]=n,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==r.length)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=r;return"1.1"===e||"1.2"===e?(this.yaml.version=e,!0):(t(6,`Unsupported YAML version ${e}`,/^\d+\.\d+$/.test(e)),!1)}default:return t(0,`Unknown directive ${n}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const r=e.slice(2,-1);return"!"===r||"!!"===r?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),r)}const[,r,n]=e.match(/^(.*!)([^!]*)$/s);n||t(`The ${e} tag has no suffix`);const s=this.tags[r];if(s)try{return s+decodeURIComponent(n)}catch(e){return t(String(e)),null}return"!"===r?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,r]of Object.entries(this.tags))if(e.startsWith(r))return t+T(e.substring(r.length));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let n;if(e&&r.length>0&&w(e.contents)){const t={};S(e.contents,(e,r)=>{w(r)&&r.tag&&(t[r.tag]=!0)}),n=Object.keys(t)}else n=[];for(const[s,i]of r)"!!"===s&&"tag:yaml.org,2002:"===i||e&&!n.some(e=>e.startsWith(i))||t.push(`%TAG ${s} ${i}`);return t.join("\n")}}function L(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function M(e){const t=new Set;return S(e,{Value(e,r){r.anchor&&t.add(r.anchor)}}),t}function D(e,t){for(let r=1;;++r){const n=`${e}${r}`;if(!t.has(n))return n}}function R(e,t,r,n){if(n&&"object"==typeof n)if(Array.isArray(n))for(let t=0,r=n.length;t<r;++t){const r=n[t],s=R(e,n,String(t),r);void 0===s?delete n[t]:s!==r&&(n[t]=s)}else if(n instanceof Map)for(const t of Array.from(n.keys())){const r=n.get(t),s=R(e,n,t,r);void 0===s?n.delete(t):s!==r&&n.set(t,s)}else if(n instanceof Set)for(const t of Array.from(n)){const r=R(e,n,t,t);void 0===r?n.delete(t):r!==t&&(n.delete(t),n.add(r))}else for(const[t,r]of Object.entries(n)){const s=R(e,n,t,r);void 0===s?delete n[t]:s!==r&&(n[t]=s)}return e.call(t,r,n)}function B(e,t,r){if(Array.isArray(e))return e.map((e,t)=>B(e,String(t),r));if(e&&"function"==typeof e.toJSON){if(!r||!k(e))return e.toJSON(t,r);const n={aliasCount:0,count:1,res:void 0};r.anchors.set(e,n),r.onCreate=e=>{n.res=e,delete r.onCreate};const s=e.toJSON(t,r);return r.onCreate&&r.onCreate(s),s}return"bigint"!=typeof e||r?.keep?e:Number(e)}C.defaultYaml={explicit:!1,version:"1.2"},C.defaultTags={"!!":"tag:yaml.org,2002:"};class K{constructor(e){Object.defineProperty(this,p,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:r,onAnchor:n,reviver:s}={}){if(!d(e))throw new TypeError("A document argument is required");const i={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100},o=B(this,"",i);if("function"==typeof n)for(const{count:e,res:t}of i.anchors.values())n(t,e);return"function"==typeof s?R(s,{"":o},"",o):o}}class U extends K{constructor(e){super(s),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,t){let r,n;t?.aliasResolveCache?r=t.aliasResolveCache:(r=[],S(e,{Node:(e,t)=>{(h(t)||k(t))&&r.push(t)}}),t&&(t.aliasResolveCache=r));for(const e of r){if(e===this)break;e.anchor===this.source&&(n=e)}return n}toJSON(e,t){if(!t)return{source:this.source};const{anchors:r,doc:n,maxAliasCount:s}=t,i=this.resolve(n,t);if(!i){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}let o=r.get(i);if(o||(B(i,null,t),o=r.get(i)),!o||void 0===o.res)throw new ReferenceError("This should not happen: Alias anchor was not resolved?");if(s>=0&&(o.count+=1,0===o.aliasCount&&(o.aliasCount=q(n,i,r)),o.count*o.aliasCount>s))throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack");return o.res}toString(e,t,r){const n=`*${this.source}`;if(e){if(L(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${n} `}return n}}function q(e,t,r){if(h(t)){const n=t.resolve(e),s=r&&n&&r.get(n);return s?s.count*s.aliasCount:0}if(b(t)){let n=0;for(const s of t.items){const t=q(e,s,r);t>n&&(n=t)}return n}if(y(t)){const n=q(e,t.key,r),s=q(e,t.value,r);return Math.max(n,s)}return 1}const V=e=>!e||"function"!=typeof e&&"object"!=typeof e;class F extends K{constructor(e){super(u),this.value=e}toJSON(e,t){return t?.keep?this.value:B(this.value,e,t)}toString(){return String(this.value)}}function z(e,t,r){if(d(e)&&(e=e.contents),w(e))return e;if(y(e)){const t=r.schema[l].createNode?.(r.schema,null,r);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:n,onAnchor:s,onTagObj:i,schema:o,sourceObjects:a}=r;let c;if(n&&e&&"object"==typeof e){if(c=a.get(e),c)return c.anchor??(c.anchor=s(e)),new U(c.anchor);c={anchor:null,node:null},a.set(e,c)}t?.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let u=function(e,t,r){if(t){const e=r.filter(e=>e.tag===t),n=e.find(e=>!e.format)??e[0];if(!n)throw new Error(`Tag ${t} not found`);return n}return r.find(t=>t.identify?.(e)&&!t.format)}(e,t,o.tags);if(!u){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){const t=new F(e);return c&&(c.node=t),t}u=e instanceof Map?o[l]:Symbol.iterator in Object(e)?o[f]:o[l]}i&&(i(u),delete r.onTagObj);const p=u?.createNode?u.createNode(r.schema,e,r):"function"==typeof u?.nodeClass?.from?u.nodeClass.from(r.schema,e,r):new F(e);return t?p.tag=t:u.default||(p.tag=u.tag),c&&(c.node=p),p}function J(e,t,r){let n=r;for(let e=t.length-1;e>=0;--e){const r=t[e];if("number"==typeof r&&Number.isInteger(r)&&r>=0){const e=[];e[r]=n,n=e}else n=new Map([[r,n]])}return z(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}F.BLOCK_FOLDED="BLOCK_FOLDED",F.BLOCK_LITERAL="BLOCK_LITERAL",F.PLAIN="PLAIN",F.QUOTE_DOUBLE="QUOTE_DOUBLE",F.QUOTE_SINGLE="QUOTE_SINGLE";const G=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class H extends K{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(t=>w(t)||y(t)?t.clone(e):t),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(G(e))this.add(t);else{const[r,...n]=e,s=this.get(r,!0);if(b(s))s.addIn(n,t);else{if(void 0!==s||!this.schema)throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`);this.set(r,J(this.schema,n,t))}}}deleteIn(e){const[t,...r]=e;if(0===r.length)return this.delete(t);const n=this.get(t,!0);if(b(n))return n.deleteIn(r);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${r}`)}getIn(e,t){const[r,...n]=e,s=this.get(r,!0);return 0===n.length?!t&&g(s)?s.value:s:b(s)?s.getIn(n,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!y(t))return!1;const r=t.value;return null==r||e&&g(r)&&null==r.value&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){const[t,...r]=e;if(0===r.length)return this.has(t);const n=this.get(t,!0);return!!b(n)&&n.hasIn(r)}setIn(e,t){const[r,...n]=e;if(0===n.length)this.set(r,t);else{const e=this.get(r,!0);if(b(e))e.setIn(n,t);else{if(void 0!==e||!this.schema)throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`);this.set(r,J(this.schema,n,t))}}}}const W=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function Y(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const Q=(e,t,r)=>e.endsWith("\n")?Y(r,t):r.includes("\n")?"\n"+Y(r,t):(e.endsWith(" ")?"":" ")+r,X="flow",Z="block",ee="quoted";function te(e,t,r="flow",{indentAtStart:n,lineWidth:s=80,minContentWidth:i=20,onFold:o,onOverflow:a}={}){if(!s||s<0)return e;s<i&&(i=0);const l=Math.max(1+i,1+s-t.length);if(e.length<=l)return e;const c=[],u={};let f,p,h=s-t.length;"number"==typeof n&&(n>s-Math.max(2,i)?c.push(0):h=s-n);let d=!1,m=-1,y=-1,g=-1;r===Z&&(m=re(e,m,t.length),-1!==m&&(h=m+l));for(let n;n=e[m+=1];){if(r===ee&&"\\"===n){switch(y=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}g=m}if("\n"===n)r===Z&&(m=re(e,m,t.length)),h=m+t.length+l,f=void 0;else{if(" "===n&&p&&" "!==p&&"\n"!==p&&"\t"!==p){const t=e[m+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(f=m)}if(m>=h)if(f)c.push(f),h=f+l,f=void 0;else if(r===ee){for(;" "===p||"\t"===p;)p=n,n=e[m+=1],d=!0;const t=m>g+1?m-2:y-1;if(u[t])return e;c.push(t),u[t]=!0,h=t+l,f=void 0}else d=!0}p=n}if(d&&a&&a(),0===c.length)return e;o&&o();let v=e.slice(0,c[0]);for(let n=0;n<c.length;++n){const s=c[n],i=c[n+1]||e.length;0===s?v=`\n${t}${e.slice(0,i)}`:(r===ee&&u[s]&&(v+=`${e[s]}\\`),v+=`\n${t}${e.slice(s+1,i)}`)}return v}function re(e,t,r){let n=t,s=t+1,i=e[s];for(;" "===i||"\t"===i;)if(t<s+r)i=e[++t];else{do{i=e[++t]}while(i&&"\n"!==i);n=t,s=t+1,i=e[s]}return n}const ne=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),se=e=>/^(%|---|\.\.\.)/m.test(e);function ie(e,t){const r=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return r;const{implicitKey:n}=t,s=t.options.doubleQuotedMinMultiLineLength,i=t.indent||(se(e)?"  ":"");let o="",a=0;for(let e=0,t=r[e];t;t=r[++e])if(" "===t&&"\\"===r[e+1]&&"n"===r[e+2]&&(o+=r.slice(a,e)+"\\ ",e+=1,a=e,t="\\"),"\\"===t)switch(r[e+1]){case"u":{o+=r.slice(a,e);const t=r.substr(e+2,4);switch(t){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:"00"===t.substr(0,2)?o+="\\x"+t.substr(2):o+=r.substr(e,6)}e+=5,a=e+1}break;case"n":if(n||'"'===r[e+2]||r.length<s)e+=1;else{for(o+=r.slice(a,e)+"\n\n";"\\"===r[e+2]&&"n"===r[e+3]&&'"'!==r[e+4];)o+="\n",e+=2;o+=i," "===r[e+2]&&(o+="\\"),e+=1,a=e+1}break;default:e+=1}return o=a?o+r.slice(a):r,n?o:te(o,i,ee,ne(t,!1))}function oe(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return ie(e,t);const r=t.indent||(se(e)?"  ":""),n="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${r}`)+"'";return t.implicitKey?n:te(n,r,X,ne(t,!1))}function ae(e,t){const{singleQuote:r}=t.options;let n;if(!1===r)n=ie;else{const t=e.includes('"'),s=e.includes("'");n=t&&!s?oe:s&&!t?ie:r?oe:ie}return n(e,t)}let le;try{le=new RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{le=/\n+(?!\n|$)/g}function ce({comment:e,type:t,value:r},n,s,i){const{blockQuote:o,commentString:a,lineWidth:l}=n.options;if(!o||/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return ae(r,n);const c=n.indent||(n.forceBlockIndent||se(r)?"  ":""),u="literal"===o||"folded"!==o&&t!==F.BLOCK_FOLDED&&(t===F.BLOCK_LITERAL||!function(e,t,r){if(!t||t<0)return!1;const n=t-r,s=e.length;if(s<=n)return!1;for(let t=0,r=0;t<s;++t)if("\n"===e[t]){if(t-r>n)return!0;if(r=t+1,s-r<=n)return!1}return!0}(r,l,c.length));if(!r)return u?"|\n":">\n";let f,p;for(p=r.length;p>0;--p){const e=r[p-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let h=r.substring(p);const d=h.indexOf("\n");-1===d?f="-":r===h||d!==h.length-1?(f="+",i&&i()):f="",h&&(r=r.slice(0,-h.length),"\n"===h[h.length-1]&&(h=h.slice(0,-1)),h=h.replace(le,`$&${c}`));let m,y=!1,g=-1;for(m=0;m<r.length;++m){const e=r[m];if(" "===e)y=!0;else{if("\n"!==e)break;g=m}}let v=r.substring(0,g<m?g+1:m);v&&(r=r.substring(v.length),v=v.replace(/\n+/g,`$&${c}`));let b=(y?c?"2":"1":"")+f;if(e&&(b+=" "+a(e.replace(/ ?[\r\n]+/g," ")),s&&s()),!u){const e=r.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let s=!1;const i=ne(n,!0);"folded"!==o&&t!==F.BLOCK_FOLDED&&(i.onOverflow=()=>{s=!0});const a=te(`${v}${e}${h}`,c,Z,i);if(!s)return`>${b}\n${c}${a}`}return`|${b}\n${c}${v}${r=r.replace(/\n+/g,`$&${c}`)}${h}`}function ue(e,t,r,n){const{implicitKey:s,inFlow:i}=t,o="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:a}=e;a!==F.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=F.QUOTE_DOUBLE);const l=e=>{switch(e){case F.BLOCK_FOLDED:case F.BLOCK_LITERAL:return s||i?ae(o.value,t):ce(o,t,r,n);case F.QUOTE_DOUBLE:return ie(o.value,t);case F.QUOTE_SINGLE:return oe(o.value,t);case F.PLAIN:return function(e,t,r,n){const{type:s,value:i}=e,{actualString:o,implicitKey:a,indent:l,indentStep:c,inFlow:u}=t;if(a&&i.includes("\n")||u&&/[[\]{},]/.test(i))return ae(i,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||u||!i.includes("\n")?ae(i,t):ce(e,t,r,n);if(!a&&!u&&s!==F.PLAIN&&i.includes("\n"))return ce(e,t,r,n);if(se(i)){if(""===l)return t.forceBlockIndent=!0,ce(e,t,r,n);if(a&&l===c)return ae(i,t)}const f=i.replace(/\n+/g,`$&\n${l}`);if(o){const e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(f),{compat:r,tags:n}=t.doc.schema;if(n.some(e)||r?.some(e))return ae(i,t)}return a?f:te(f,l,X,ne(t,!1))}(o,t,r,n);default:return null}};let c=l(a);if(null===c){const{defaultKeyType:e,defaultStringType:r}=t.options,n=s&&e||r;if(c=l(n),null===c)throw new Error(`Unsupported default string type ${n}`)}return c}function fe(e,t){const r=Object.assign({blockQuote:!0,commentString:W,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let n;switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:e,flowCollectionPadding:r.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof r.indent?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function pe(e,t,r,n){if(y(e))return e.toString(t,r,n);if(h(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let s;const i=w(e)?e:t.doc.createNode(e,{onTagObj:e=>s=e});s??(s=function(e,t){if(t.tag){const r=e.filter(e=>e.tag===t.tag);if(r.length>0)return r.find(e=>e.format===t.format)??r[0]}let r,n;if(g(t)){n=t.value;let s=e.filter(e=>e.identify?.(n));if(s.length>1){const e=s.filter(e=>e.test);e.length>0&&(s=e)}r=s.find(e=>e.format===t.format)??s.find(e=>!e.format)}else n=t,r=e.find(e=>e.nodeClass&&n instanceof e.nodeClass);if(!r)throw new Error(`Tag not resolved for ${n?.constructor?.name??(null===n?"null":typeof n)} value`);return r}(t.doc.schema.tags,i));const o=function(e,t,{anchors:r,doc:n}){if(!n.directives)return"";const s=[],i=(g(e)||b(e))&&e.anchor;i&&L(i)&&(r.add(i),s.push(`&${i}`));const o=e.tag??(t.default?null:t.tag);return o&&s.push(n.directives.tagString(o)),s.join(" ")}(i,s,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);const a="function"==typeof s.stringify?s.stringify(i,t,r,n):g(i)?ue(i,t,r,n):i.toString(t,r,n);return o?g(i)||"{"===a[0]||"["===a[0]?`${o} ${a}`:`${o}\n${t.indent}${a}`:a}function he(e,t){"debug"!==e&&"warn"!==e||console.warn(t)}const de="<<",me={identify:e=>e===de||"symbol"==typeof e&&e.description===de,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new F(Symbol(de)),{addToJSMap:ye}),stringify:()=>de};function ye(e,t,r){if(r=e&&h(r)?r.resolve(e.doc):r,v(r))for(const n of r.items)ge(e,t,n);else if(Array.isArray(r))for(const n of r)ge(e,t,n);else ge(e,t,r)}function ge(e,t,r){const n=e&&h(r)?r.resolve(e.doc):r;if(!m(n))throw new Error("Merge sources must be maps or map aliases");const s=n.toJSON(null,e,Map);for(const[e,r]of s)t instanceof Map?t.has(e)||t.set(e,r):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0});return t}function ve(e,t,{key:r,value:n}){if(w(r)&&r.addToJSMap)r.addToJSMap(e,t,n);else if(((e,t)=>(me.identify(t)||g(t)&&(!t.type||t.type===F.PLAIN)&&me.identify(t.value))&&e?.doc.schema.tags.some(e=>e.tag===me.tag&&e.default))(e,r))ye(e,t,n);else{const s=B(r,"",e);if(t instanceof Map)t.set(s,B(n,s,e));else if(t instanceof Set)t.add(s);else{const i=function(e,t,r){if(null===t)return"";if("object"!=typeof t)return String(t);if(w(e)&&r?.doc){const t=fe(r.doc,{});t.anchors=new Set;for(const e of r.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const n=e.toString(t);if(!r.mapKeyWarned){let e=JSON.stringify(n);e.length>40&&(e=e.substring(0,36)+'..."'),he(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return n}return JSON.stringify(t)}(r,s,e),o=B(n,i,e);i in t?Object.defineProperty(t,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[i]=o}}return t}function be(e,t,r){const n=z(e,void 0,r),s=z(t,void 0,r);return new we(n,s)}class we{constructor(e,t=null){Object.defineProperty(this,p,{value:c}),this.key=e,this.value=t}clone(e){let{key:t,value:r}=this;return w(t)&&(t=t.clone(e)),w(r)&&(r=r.clone(e)),new we(t,r)}toJSON(e,t){return ve(t,t?.mapAsMap?new Map:{},this)}toString(e,t,r){return e?.doc?function({key:e,value:t},r,n,s){const{allNullValues:i,doc:o,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:f}}=r;let p=w(e)&&e.comment||null;if(f){if(p)throw new Error("With simple keys, key nodes cannot have comments");if(b(e)||!w(e)&&"object"==typeof e)throw new Error("With simple keys, collection cannot be used as a key value")}let h=!f&&(!e||p&&null==t&&!r.inFlow||b(e)||(g(e)?e.type===F.BLOCK_FOLDED||e.type===F.BLOCK_LITERAL:"object"==typeof e));r=Object.assign({},r,{allNullValues:!1,implicitKey:!h&&(f||!i),indent:a+l});let d,m,y,k=!1,_=!1,$=pe(e,r,()=>k=!0,()=>_=!0);if(!h&&!r.inFlow&&$.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");h=!0}if(r.inFlow){if(i||null==t)return k&&n&&n(),""===$?"?":h?`? ${$}`:$}else if(i&&!f||null==t&&h)return $=`? ${$}`,p&&!k?$+=Q($,r.indent,c(p)):_&&s&&s(),$;k&&(p=null),h?(p&&($+=Q($,r.indent,c(p))),$=`? ${$}\n${a}:`):($=`${$}:`,p&&($+=Q($,r.indent,c(p)))),w(t)?(d=!!t.spaceBefore,m=t.commentBefore,y=t.comment):(d=!1,m=null,y=null,t&&"object"==typeof t&&(t=o.createNode(t))),r.implicitKey=!1,h||p||!g(t)||(r.indentAtStart=$.length+1),_=!1,u||!(l.length>=2)||r.inFlow||h||!v(t)||t.flow||t.tag||t.anchor||(r.indent=r.indent.substring(2));let E=!1;const S=pe(t,r,()=>E=!0,()=>_=!0);let O=" ";if(p||d||m)O=d?"\n":"",m&&(O+=`\n${Y(c(m),r.indent)}`),""!==S||r.inFlow?O+=`\n${r.indent}`:"\n"===O&&(O="\n\n");else if(!h&&b(t)){const e=S[0],n=S.indexOf("\n"),s=-1!==n,i=r.inFlow??t.flow??0===t.items.length;if(s||!i){let t=!1;if(s&&("&"===e||"!"===e)){let r=S.indexOf(" ");"&"===e&&-1!==r&&r<n&&"!"===S[r+1]&&(r=S.indexOf(" ",r+1)),(-1===r||n<r)&&(t=!0)}t||(O=`\n${r.indent}`)}}else""!==S&&"\n"!==S[0]||(O="");return $+=O+S,r.inFlow?E&&n&&n():y&&!E?$+=Q($,r.indent,c(y)):_&&s&&s(),$}(this,e,t,r):JSON.stringify(this)}}function ke(e,t,r){return(t.inFlow??e.flow?$e:_e)(e,t,r)}function _e({comment:e,items:t},r,{blockItemPrefix:n,flowChars:s,itemIndent:i,onChompKeep:o,onComment:a}){const{indent:l,options:{commentString:c}}=r,u=Object.assign({},r,{indent:i,type:null});let f=!1;const p=[];for(let e=0;e<t.length;++e){const s=t[e];let o=null;if(w(s))!f&&s.spaceBefore&&p.push(""),Ee(r,p,s.commentBefore,f),s.comment&&(o=s.comment);else if(y(s)){const e=w(s.key)?s.key:null;e&&(!f&&e.spaceBefore&&p.push(""),Ee(r,p,e.commentBefore,f))}f=!1;let a=pe(s,u,()=>o=null,()=>f=!0);o&&(a+=Q(a,i,c(o))),f&&o&&(f=!1),p.push(n+a)}let h;if(0===p.length)h=s.start+s.end;else{h=p[0];for(let e=1;e<p.length;++e){const t=p[e];h+=t?`\n${l}${t}`:"\n"}}return e?(h+="\n"+Y(c(e),l),a&&a()):f&&o&&o(),h}function $e({items:e},t,{flowChars:r,itemIndent:n}){const{indent:s,indentStep:i,flowCollectionPadding:o,options:{commentString:a}}=t;n+=i;const l=Object.assign({},t,{indent:n,inFlow:!0,type:null});let c=!1,u=0;const f=[];for(let r=0;r<e.length;++r){const s=e[r];let i=null;if(w(s))s.spaceBefore&&f.push(""),Ee(t,f,s.commentBefore,!1),s.comment&&(i=s.comment);else if(y(s)){const e=w(s.key)?s.key:null;e&&(e.spaceBefore&&f.push(""),Ee(t,f,e.commentBefore,!1),e.comment&&(c=!0));const r=w(s.value)?s.value:null;r?(r.comment&&(i=r.comment),r.commentBefore&&(c=!0)):null==s.value&&e?.comment&&(i=e.comment)}i&&(c=!0);let o=pe(s,l,()=>i=null);r<e.length-1&&(o+=","),i&&(o+=Q(o,n,a(i))),!c&&(f.length>u||o.includes("\n"))&&(c=!0),f.push(o),u=f.length}const{start:p,end:h}=r;if(0===f.length)return p+h;if(!c){const e=f.reduce((e,t)=>e+t.length+2,2);c=t.options.lineWidth>0&&e>t.options.lineWidth}if(c){let e=p;for(const t of f)e+=t?`\n${i}${s}${t}`:"\n";return`${e}\n${s}${h}`}return`${p}${o}${f.join(" ")}${o}${h}`}function Ee({indent:e,options:{commentString:t}},r,n,s){if(n&&s&&(n=n.replace(/^\n+/,"")),n){const s=Y(t(n),e);r.push(s.trimStart())}}function Se(e,t){const r=g(t)?t.value:t;for(const n of e)if(y(n)){if(n.key===t||n.key===r)return n;if(g(n.key)&&n.key.value===r)return n}}class Oe extends H{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(l,e),this.items=[]}static from(e,t,r){const{keepUndefined:n,replacer:s}=r,i=new this(e),o=(e,o)=>{if("function"==typeof s)o=s.call(t,e,o);else if(Array.isArray(s)&&!s.includes(e))return;(void 0!==o||n)&&i.items.push(be(e,o,r))};if(t instanceof Map)for(const[e,r]of t)o(e,r);else if(t&&"object"==typeof t)for(const e of Object.keys(t))o(e,t[e]);return"function"==typeof e.sortMapEntries&&i.items.sort(e.sortMapEntries),i}add(e,t){let r;r=y(e)?e:e&&"object"==typeof e&&"key"in e?new we(e.key,e.value):new we(e,e?.value);const n=Se(this.items,r.key),s=this.schema?.sortMapEntries;if(n){if(!t)throw new Error(`Key ${r.key} already set`);g(n.value)&&V(r.value)?n.value.value=r.value:n.value=r.value}else if(s){const e=this.items.findIndex(e=>s(r,e)<0);-1===e?this.items.push(r):this.items.splice(e,0,r)}else this.items.push(r)}delete(e){const t=Se(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const r=Se(this.items,e),n=r?.value;return(!t&&g(n)?n.value:n)??void 0}has(e){return!!Se(this.items,e)}set(e,t){this.add(new we(e,t),!0)}toJSON(e,t,r){const n=r?new r:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(n);for(const e of this.items)ve(t,n,e);return n}toString(e,t,r){if(!e)return JSON.stringify(this);for(const e of this.items)if(!y(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),ke(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:t})}}const Ne={collection:"map",default:!0,nodeClass:Oe,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(m(e)||t("Expected a mapping for this tag"),e),createNode:(e,t,r)=>Oe.from(e,t,r)};class Ae extends H{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(f,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=Pe(e);return"number"==typeof t&&this.items.splice(t,1).length>0}get(e,t){const r=Pe(e);if("number"!=typeof r)return;const n=this.items[r];return!t&&g(n)?n.value:n}has(e){const t=Pe(e);return"number"==typeof t&&t<this.items.length}set(e,t){const r=Pe(e);if("number"!=typeof r)throw new Error(`Expected a valid index, not ${e}.`);const n=this.items[r];g(n)&&V(t)?n.value=t:this.items[r]=t}toJSON(e,t){const r=[];t?.onCreate&&t.onCreate(r);let n=0;for(const e of this.items)r.push(B(e,String(n++),t));return r}toString(e,t,r){return e?ke(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:t}):JSON.stringify(this)}static from(e,t,r){const{replacer:n}=r,s=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let i of t){if("function"==typeof n){const r=t instanceof Set?i:String(e++);i=n.call(t,r,i)}s.items.push(z(i,void 0,r))}}return s}}function Pe(e){let t=g(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}const xe={collection:"seq",default:!0,nodeClass:Ae,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(v(e)||t("Expected a sequence for this tag"),e),createNode:(e,t,r)=>Ae.from(e,t,r)},je={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,r,n)=>ue(e,t=Object.assign({actualString:!0},t),r,n)},Ie={identify:e=>null==e,createNode:()=>new F(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new F(null),stringify:({source:e},t)=>"string"==typeof e&&Ie.test.test(e)?e:t.options.nullStr},Te={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new F("t"===e[0]||"T"===e[0]),stringify:({source:e,value:t},r)=>e&&Te.test.test(e)&&t===("t"===e[0]||"T"===e[0])?e:t?r.options.trueStr:r.options.falseStr};function Ce({format:e,minFractionDigits:t,tag:r,value:n}){if("bigint"==typeof n)return String(n);const s="number"==typeof n?n:Number(n);if(!isFinite(s))return isNaN(s)?".nan":s<0?"-.inf":".inf";let i=JSON.stringify(n);if(!e&&t&&(!r||"tag:yaml.org,2002:float"===r)&&/^\d/.test(i)){let e=i.indexOf(".");e<0&&(e=i.length,i+=".");let r=t-(i.length-e-1);for(;r-- >0;)i+="0"}return i}const Le={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ce},Me={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Ce(e)}},De={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new F(parseFloat(e)),r=e.indexOf(".");return-1!==r&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-r-1),t},stringify:Ce},Re=e=>"bigint"==typeof e||Number.isInteger(e),Be=(e,t,r,{intAsBigInt:n})=>n?BigInt(e):parseInt(e.substring(t),r);function Ke(e,t,r){const{value:n}=e;return Re(n)&&n>=0?r+n.toString(t):Ce(e)}const Ue={identify:e=>Re(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,r)=>Be(e,2,8,r),stringify:e=>Ke(e,8,"0o")},qe={identify:Re,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,r)=>Be(e,0,10,r),stringify:Ce},Ve={identify:e=>Re(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,r)=>Be(e,2,16,r),stringify:e=>Ke(e,16,"0x")},Fe=[Ne,xe,je,Ie,Te,Ue,qe,Ve,Le,Me,De];function ze(e){return"bigint"==typeof e||Number.isInteger(e)}const Je=({value:e})=>JSON.stringify(e),Ge=[Ne,xe].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Je},{identify:e=>null==e,createNode:()=>new F(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Je},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>"true"===e,stringify:Je},{identify:ze,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:r})=>r?BigInt(e):parseInt(e,10),stringify:({value:e})=>ze(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Je}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),He={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:r},n,s,i){if(!r)return"";const o=r;let a;if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<o.length;++t)e+=String.fromCharCode(o[t]);a=btoa(e)}if(t??(t=F.BLOCK_LITERAL),t!==F.QUOTE_DOUBLE){const e=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),r=Math.ceil(a.length/e),s=new Array(r);for(let t=0,n=0;t<r;++t,n+=e)s[t]=a.substr(n,e);a=s.join(t===F.BLOCK_LITERAL?"\n":" ")}return ue({comment:e,type:t,value:a},n,s,i)}};function We(e,t){if(v(e))for(let r=0;r<e.items.length;++r){let n=e.items[r];if(!y(n)){if(m(n)){n.items.length>1&&t("Each pair must have its own sequence indicator");const e=n.items[0]||new we(new F(null));if(n.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${n.commentBefore}\n${e.key.commentBefore}`:n.commentBefore),n.comment){const t=e.value??e.key;t.comment=t.comment?`${n.comment}\n${t.comment}`:n.comment}n=e}e.items[r]=y(n)?n:new we(n)}}else t("Expected a sequence for this tag");return e}function Ye(e,t,r){const{replacer:n}=r,s=new Ae(e);s.tag="tag:yaml.org,2002:pairs";let i=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let o,a;if("function"==typeof n&&(e=n.call(t,String(i++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);o=e[0],a=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected tuple with one key, not ${t.length} keys`);o=t[0],a=e[o]}else o=e;s.items.push(be(o,a,r))}return s}const Qe={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:We,createNode:Ye};class Xe extends Ae{constructor(){super(),this.add=Oe.prototype.add.bind(this),this.delete=Oe.prototype.delete.bind(this),this.get=Oe.prototype.get.bind(this),this.has=Oe.prototype.has.bind(this),this.set=Oe.prototype.set.bind(this),this.tag=Xe.tag}toJSON(e,t){if(!t)return super.toJSON(e);const r=new Map;t?.onCreate&&t.onCreate(r);for(const e of this.items){let n,s;if(y(e)?(n=B(e.key,"",t),s=B(e.value,n,t)):n=B(e,"",t),r.has(n))throw new Error("Ordered maps must not include duplicate keys");r.set(n,s)}return r}static from(e,t,r){const n=Ye(e,t,r),s=new this;return s.items=n.items,s}}Xe.tag="tag:yaml.org,2002:omap";const Ze={collection:"seq",identify:e=>e instanceof Map,nodeClass:Xe,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const r=We(e,t),n=[];for(const{key:e}of r.items)g(e)&&(n.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):n.push(e.value));return Object.assign(new Xe,r)},createNode:(e,t,r)=>Xe.from(e,t,r)};function et({value:e,source:t},r){return t&&(e?tt:rt).test.test(t)?t:e?r.options.trueStr:r.options.falseStr}const tt={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new F(!0),stringify:et},rt={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new F(!1),stringify:et},nt={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ce},st={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Ce(e)}},it={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new F(parseFloat(e.replace(/_/g,""))),r=e.indexOf(".");if(-1!==r){const n=e.substring(r+1).replace(/_/g,"");"0"===n[n.length-1]&&(t.minFractionDigits=n.length)}return t},stringify:Ce},ot=e=>"bigint"==typeof e||Number.isInteger(e);function at(e,t,r,{intAsBigInt:n}){const s=e[0];if("-"!==s&&"+"!==s||(t+=1),e=e.substring(t).replace(/_/g,""),n){switch(r){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===s?BigInt(-1)*t:t}const i=parseInt(e,r);return"-"===s?-1*i:i}function lt(e,t,r){const{value:n}=e;if(ot(n)){const e=n.toString(t);return n<0?"-"+r+e.substr(1):r+e}return Ce(e)}const ct={identify:ot,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,r)=>at(e,2,2,r),stringify:e=>lt(e,2,"0b")},ut={identify:ot,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,r)=>at(e,1,8,r),stringify:e=>lt(e,8,"0")},ft={identify:ot,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,r)=>at(e,0,10,r),stringify:Ce},pt={identify:ot,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,r)=>at(e,2,16,r),stringify:e=>lt(e,16,"0x")};class ht extends Oe{constructor(e){super(e),this.tag=ht.tag}add(e){let t;t=y(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new we(e.key,null):new we(e,null),Se(this.items,t.key)||this.items.push(t)}get(e,t){const r=Se(this.items,e);return!t&&y(r)?g(r.key)?r.key.value:r.key:r}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const r=Se(this.items,e);r&&!t?this.items.splice(this.items.indexOf(r),1):!r&&t&&this.items.push(new we(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,r);throw new Error("Set items must all have null values")}static from(e,t,r){const{replacer:n}=r,s=new this(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof n&&(e=n.call(t,e,e)),s.items.push(be(e,null,r));return s}}ht.tag="tag:yaml.org,2002:set";const dt={collection:"map",identify:e=>e instanceof Set,nodeClass:ht,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,r)=>ht.from(e,t,r),resolve(e,t){if(m(e)){if(e.hasAllNullValues(!0))return Object.assign(new ht,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function mt(e,t){const r=e[0],n="-"===r||"+"===r?e.substring(1):e,s=e=>t?BigInt(e):Number(e),i=n.replace(/_/g,"").split(":").reduce((e,t)=>e*s(60)+s(t),s(0));return"-"===r?s(-1)*i:i}function yt(e){let{value:t}=e,r=e=>e;if("bigint"==typeof t)r=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return Ce(e);let n="";t<0&&(n="-",t*=r(-1));const s=r(60),i=[t%s];return t<60?i.unshift(0):(t=(t-i[0])/s,i.unshift(t%s),t>=60&&(t=(t-i[0])/s,i.unshift(t))),n+i.map(e=>String(e).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const gt={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:r})=>mt(e,r),stringify:yt},vt={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>mt(e,!1),stringify:yt},bt={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(bt.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,r,n,s,i,o,a]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let c=Date.UTC(r,n-1,s,i||0,o||0,a||0,l);const u=t[8];if(u&&"Z"!==u){let e=mt(u,!1);Math.abs(e)<30&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},wt=[Ne,xe,je,Ie,tt,rt,ct,ut,ft,pt,nt,st,it,He,me,Ze,Qe,dt,gt,vt,bt],kt=new Map([["core",Fe],["failsafe",[Ne,xe,je]],["json",Ge],["yaml11",wt],["yaml-1.1",wt]]),_t={binary:He,bool:Te,float:De,floatExp:Me,floatNaN:Le,floatTime:vt,int:qe,intHex:Ve,intOct:Ue,intTime:gt,map:Ne,merge:me,null:Ie,omap:Ze,pairs:Qe,seq:xe,set:dt,timestamp:bt},$t={"tag:yaml.org,2002:binary":He,"tag:yaml.org,2002:merge":me,"tag:yaml.org,2002:omap":Ze,"tag:yaml.org,2002:pairs":Qe,"tag:yaml.org,2002:set":dt,"tag:yaml.org,2002:timestamp":bt};function Et(e,t,r){const n=kt.get(t);if(n&&!e)return r&&!n.includes(me)?n.concat(me):n.slice();let s=n;if(!s){if(!Array.isArray(e)){const e=Array.from(kt.keys()).filter(e=>"yaml11"!==e).map(e=>JSON.stringify(e)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}s=[]}if(Array.isArray(e))for(const t of e)s=s.concat(t);else"function"==typeof e&&(s=e(s.slice()));return r&&(s=s.concat(me)),s.reduce((e,t)=>{const r="string"==typeof t?_t[t]:t;if(!r){const e=JSON.stringify(t),r=Object.keys(_t).map(e=>JSON.stringify(e)).join(", ");throw new Error(`Unknown custom tag ${e}; use one of ${r}`)}return e.includes(r)||e.push(r),e},[])}const St=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class Ot{constructor({compat:e,customTags:t,merge:r,resolveKnownTags:n,schema:s,sortMapEntries:i,toStringDefaults:o}){this.compat=Array.isArray(e)?Et(e,"compat"):e?Et(null,e):null,this.name="string"==typeof s&&s||"core",this.knownTags=n?$t:{},this.tags=Et(t,this.name,r),this.toStringOptions=o??null,Object.defineProperty(this,l,{value:Ne}),Object.defineProperty(this,u,{value:je}),Object.defineProperty(this,f,{value:xe}),this.sortMapEntries="function"==typeof i?i:!0===i?St:null}clone(){const e=Object.create(Ot.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}class Nt{constructor(e,t,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,p,{value:i});let n=null;"function"==typeof t||Array.isArray(t)?n=t:void 0===r&&t&&(r=t,t=void 0);const s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=s;let{version:o}=s;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new C({version:o}),this.setSchema(o,r),this.contents=void 0===e?null:this.createNode(e,n,r)}clone(){const e=Object.create(Nt.prototype,{[p]:{value:i}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=w(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){At(this.contents)&&this.contents.add(e)}addIn(e,t){At(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const r=M(this);e.anchor=!t||r.has(t)?D(t||"a",r):t}return new U(e.anchor)}createNode(e,t,r){let n;if("function"==typeof t)e=t.call({"":e},"",e),n=t;else if(Array.isArray(t)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,r=t.filter(e).map(String);r.length>0&&(t=t.concat(r)),n=t}else void 0===r&&t&&(r=t,t=void 0);const{aliasDuplicateObjects:s,anchorPrefix:i,flow:o,keepUndefined:a,onTagObj:l,tag:c}=r??{},{onAnchor:u,setAnchors:f,sourceObjects:p}=function(e,t){const r=[],n=new Map;let s=null;return{onAnchor:n=>{r.push(n),s??(s=M(e));const i=D(t,s);return s.add(i),i},setAnchors:()=>{for(const e of r){const t=n.get(e);if("object"!=typeof t||!t.anchor||!g(t.node)&&!b(t.node)){const t=new Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:n}}(this,i||"a"),h=z(e,c,{aliasDuplicateObjects:s??!0,keepUndefined:a??!1,onAnchor:u,onTagObj:l,replacer:n,schema:this.schema,sourceObjects:p});return o&&b(h)&&(h.flow=!0),f(),h}createPair(e,t,r={}){const n=this.createNode(e,null,r),s=this.createNode(t,null,r);return new we(n,s)}delete(e){return!!At(this.contents)&&this.contents.delete(e)}deleteIn(e){return G(e)?null!=this.contents&&(this.contents=null,!0):!!At(this.contents)&&this.contents.deleteIn(e)}get(e,t){return b(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return G(e)?!t&&g(this.contents)?this.contents.value:this.contents:b(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!b(this.contents)&&this.contents.has(e)}hasIn(e){return G(e)?void 0!==this.contents:!!b(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=J(this.schema,[e],t):At(this.contents)&&this.contents.set(e,t)}setIn(e,t){G(e)?this.contents=t:null==this.contents?this.contents=J(this.schema,Array.from(e),t):At(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let r;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new C({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new C({version:e}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else{if(!r)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new Ot(Object.assign(r,t))}}toJS({json:e,jsonArg:t,mapAsMap:r,maxAliasCount:n,onAnchor:s,reviver:i}={}){const o={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===r,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},a=B(this.contents,t??"",o);if("function"==typeof s)for(const{count:e,res:t}of o.anchors.values())s(t,e);return"function"==typeof i?R(i,{"":a},"",a):a}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const r=[];let n=!0===t.directives;if(!1!==t.directives&&e.directives){const t=e.directives.toString(e);t?(r.push(t),n=!0):e.directives.docStart&&(n=!0)}n&&r.push("---");const s=fe(e,t),{commentString:i}=s.options;if(e.commentBefore){1!==r.length&&r.unshift("");const t=i(e.commentBefore);r.unshift(Y(t,""))}let o=!1,a=null;if(e.contents){if(w(e.contents)){if(e.contents.spaceBefore&&n&&r.push(""),e.contents.commentBefore){const t=i(e.contents.commentBefore);r.push(Y(t,""))}s.forceBlockIndent=!!e.comment,a=e.contents.comment}const t=a?void 0:()=>o=!0;let l=pe(e.contents,s,()=>a=null,t);a&&(l+=Q(l,"",i(a))),"|"!==l[0]&&">"!==l[0]||"---"!==r[r.length-1]?r.push(l):r[r.length-1]=`--- ${l}`}else r.push(pe(e.contents,s));if(e.directives?.docEnd)if(e.comment){const t=i(e.comment);t.includes("\n")?(r.push("..."),r.push(Y(t,""))):r.push(`... ${t}`)}else r.push("...");else{let t=e.comment;t&&o&&(t=t.replace(/^\n+/,"")),t&&(o&&!a||""===r[r.length-1]||r.push(""),r.push(Y(i(t),"")))}return r.join("\n")+"\n"}(this,e)}}function At(e){if(b(e))return!0;throw new Error("Expected a YAML collection as document contents")}class Pt extends Error{constructor(e,t,r,n){super(),this.name=e,this.code=r,this.message=n,this.pos=t}}class xt extends Pt{constructor(e,t,r){super("YAMLParseError",e,t,r)}}class jt extends Pt{constructor(e,t,r){super("YAMLWarning",e,t,r)}}const It=(e,t)=>r=>{if(-1===r.pos[0])return;r.linePos=r.pos.map(e=>t.linePos(e));const{line:n,col:s}=r.linePos[0];r.message+=` at line ${n}, column ${s}`;let i=s-1,o=e.substring(t.lineStarts[n-1],t.lineStarts[n]).replace(/[\n\r]+$/,"");if(i>=60&&o.length>80){const e=Math.min(i-39,o.length-79);o="…"+o.substring(e),i-=e-1}if(o.length>80&&(o=o.substring(0,79)+"…"),n>1&&/^ *$/.test(o.substring(0,i))){let r=e.substring(t.lineStarts[n-2],t.lineStarts[n-1]);r.length>80&&(r=r.substring(0,79)+"…\n"),o=r+o}if(/[^ ]/.test(o)){let e=1;const t=r.linePos[1];t&&t.line===n&&t.col>s&&(e=Math.max(1,Math.min(t.col-s,80-i)));const a=" ".repeat(i)+"^".repeat(e);r.message+=`:\n\n${o}\n${a}\n`}};function Tt(e,{flow:t,indicator:r,next:n,offset:s,onError:i,parentIndent:o,startOnNewline:a}){let l=!1,c=a,u=a,f="",p="",h=!1,d=!1,m=null,y=null,g=null,v=null,b=null,w=null,k=null;for(const s of e)switch(d&&("space"!==s.type&&"newline"!==s.type&&"comma"!==s.type&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),d=!1),m&&(c&&"comment"!==s.type&&"newline"!==s.type&&i(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),s.type){case"space":t||"doc-start"===r&&"flow-collection"===n?.type||!s.source.includes("\t")||(m=s),u=!0;break;case"comment":{u||i(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=s.source.substring(1)||" ";f?f+=p+e:f=e,p="",c=!1;break}case"newline":c?f?f+=s.source:w&&"seq-item-ind"===r||(l=!0):p+=s.source,c=!0,h=!0,(y||g)&&(v=s),u=!0;break;case"anchor":y&&i(s,"MULTIPLE_ANCHORS","A node can have at most one anchor"),s.source.endsWith(":")&&i(s.offset+s.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),y=s,k??(k=s.offset),c=!1,u=!1,d=!0;break;case"tag":g&&i(s,"MULTIPLE_TAGS","A node can have at most one tag"),g=s,k??(k=s.offset),c=!1,u=!1,d=!0;break;case r:(y||g)&&i(s,"BAD_PROP_ORDER",`Anchors and tags must be after the ${s.source} indicator`),w&&i(s,"UNEXPECTED_TOKEN",`Unexpected ${s.source} in ${t??"collection"}`),w=s,c="seq-item-ind"===r||"explicit-key-ind"===r,u=!1;break;case"comma":if(t){b&&i(s,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),b=s,c=!1,u=!1;break}default:i(s,"UNEXPECTED_TOKEN",`Unexpected ${s.type} token`),c=!1,u=!1}const _=e[e.length-1],$=_?_.offset+_.source.length:s;return d&&n&&"space"!==n.type&&"newline"!==n.type&&"comma"!==n.type&&("scalar"!==n.type||""!==n.source)&&i(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(c&&m.indent<=o||"block-map"===n?.type||"block-seq"===n?.type)&&i(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:b,found:w,spaceBefore:l,comment:f,hasNewline:h,anchor:y,tag:g,newlineAfterProp:v,end:$,start:k??$}}function Ct(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return!0;if(e.end)for(const t of e.end)if("newline"===t.type)return!0;return!1;case"flow-collection":for(const t of e.items){for(const e of t.start)if("newline"===e.type)return!0;if(t.sep)for(const e of t.sep)if("newline"===e.type)return!0;if(Ct(t.key)||Ct(t.value))return!0}return!1;default:return!0}}function Lt(e,t,r){if("flow-collection"===t?.type){const n=t.end[0];n.indent!==e||"]"!==n.source&&"}"!==n.source||!Ct(t)||r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Mt(e,t,r){const{uniqueKeys:n}=e.options;if(!1===n)return!1;const s="function"==typeof n?n:(e,t)=>e===t||g(e)&&g(t)&&e.value===t.value;return t.some(e=>s(e.key,r))}const Dt="All mapping items must start at the same column";function Rt(e,t,r,n){let s="";if(e){let i=!1,o="";for(const a of e){const{source:e,type:l}=a;switch(l){case"space":i=!0;break;case"comment":{r&&!i&&n(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=e.substring(1)||" ";s?s+=o+t:s=t,o="";break}case"newline":s&&(o+=e),i=!0;break;default:n(a,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}t+=e.length}}return{comment:s,offset:t}}const Bt="Block collections are not allowed within flow collections",Kt=e=>e&&("block-map"===e.type||"block-seq"===e.type);function Ut(e,t,r,n,s,i){const o="block-map"===r.type?function({composeNode:e,composeEmptyNode:t},r,n,s,i){const o=new(i?.nodeClass??Oe)(r.schema);r.atRoot&&(r.atRoot=!1);let a=n.offset,l=null;for(const i of n.items){const{start:c,key:u,sep:f,value:p}=i,h=Tt(c,{indicator:"explicit-key-ind",next:u??f?.[0],offset:a,onError:s,parentIndent:n.indent,startOnNewline:!0}),d=!h.found;if(d){if(u&&("block-seq"===u.type?s(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==n.indent&&s(a,"BAD_INDENT",Dt)),!h.anchor&&!h.tag&&!f){l=h.end,h.comment&&(o.comment?o.comment+="\n"+h.comment:o.comment=h.comment);continue}(h.newlineAfterProp||Ct(u))&&s(u??c[c.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else h.found?.indent!==n.indent&&s(a,"BAD_INDENT",Dt);r.atKey=!0;const m=h.end,y=u?e(r,u,h,s):t(r,m,c,null,h,s);r.schema.compat&&Lt(n.indent,u,s),r.atKey=!1,Mt(r,o.items,y)&&s(m,"DUPLICATE_KEY","Map keys must be unique");const g=Tt(f??[],{indicator:"map-value-ind",next:p,offset:y.range[2],onError:s,parentIndent:n.indent,startOnNewline:!u||"block-scalar"===u.type});if(a=g.end,g.found){d&&("block-map"!==p?.type||g.hasNewline||s(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&h.start<g.found.offset-1024&&s(y.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const l=p?e(r,p,g,s):t(r,a,f,null,g,s);r.schema.compat&&Lt(n.indent,p,s),a=l.range[2];const c=new we(y,l);r.options.keepSourceTokens&&(c.srcToken=i),o.items.push(c)}else{d&&s(y.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),g.comment&&(y.comment?y.comment+="\n"+g.comment:y.comment=g.comment);const e=new we(y);r.options.keepSourceTokens&&(e.srcToken=i),o.items.push(e)}}return l&&l<a&&s(l,"IMPOSSIBLE","Map comment with trailing content"),o.range=[n.offset,a,l??a],o}(e,t,r,n,i):"block-seq"===r.type?function({composeNode:e,composeEmptyNode:t},r,n,s,i){const o=new(i?.nodeClass??Ae)(r.schema);r.atRoot&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let a=n.offset,l=null;for(const{start:i,value:c}of n.items){const u=Tt(i,{indicator:"seq-item-ind",next:c,offset:a,onError:s,parentIndent:n.indent,startOnNewline:!0});if(!u.found){if(!(u.anchor||u.tag||c)){l=u.end,u.comment&&(o.comment=u.comment);continue}c&&"block-seq"===c.type?s(u.end,"BAD_INDENT","All sequence items must start at the same column"):s(a,"MISSING_CHAR","Sequence item without - indicator")}const f=c?e(r,c,u,s):t(r,u.end,i,null,u,s);r.schema.compat&&Lt(n.indent,c,s),a=f.range[2],o.items.push(f)}return o.range=[n.offset,a,l??a],o}(e,t,r,n,i):function({composeNode:e,composeEmptyNode:t},r,n,s,i){const o="{"===n.start.source,a=o?"flow map":"flow sequence",l=new(i?.nodeClass??(o?Oe:Ae))(r.schema);l.flow=!0;const c=r.atRoot;c&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let u=n.offset+n.start.source.length;for(let i=0;i<n.items.length;++i){const c=n.items[i],{start:f,key:p,sep:h,value:d}=c,m=Tt(f,{flow:a,indicator:"explicit-key-ind",next:p??h?.[0],offset:u,onError:s,parentIndent:n.indent,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||h||d)){0===i&&m.comma?s(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):i<n.items.length-1&&s(m.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),m.comment&&(l.comment?l.comment+="\n"+m.comment:l.comment=m.comment),u=m.end;continue}!o&&r.options.strict&&Ct(p)&&s(p,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===i)m.comma&&s(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(m.comma||s(m.start,"MISSING_CHAR",`Missing , between ${a} items`),m.comment){let e="";e:for(const t of f)switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break e;default:break e}if(e){let t=l.items[l.items.length-1];y(t)&&(t=t.value??t.key),t.comment?t.comment+="\n"+e:t.comment=e,m.comment=m.comment.substring(e.length+1)}}if(o||h||m.found){r.atKey=!0;const i=m.end,y=p?e(r,p,m,s):t(r,i,f,null,m,s);Kt(p)&&s(y.range,"BLOCK_IN_FLOW",Bt),r.atKey=!1;const g=Tt(h??[],{flow:a,indicator:"map-value-ind",next:d,offset:y.range[2],onError:s,parentIndent:n.indent,startOnNewline:!1});if(g.found){if(!o&&!m.found&&r.options.strict){if(h)for(const e of h){if(e===g.found)break;if("newline"===e.type){s(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<g.found.offset-1024&&s(g.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else d&&("source"in d&&d.source&&":"===d.source[0]?s(d,"MISSING_CHAR",`Missing space after : in ${a}`):s(g.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const v=d?e(r,d,g,s):g.found?t(r,g.end,h,null,g,s):null;v?Kt(d)&&s(v.range,"BLOCK_IN_FLOW",Bt):g.comment&&(y.comment?y.comment+="\n"+g.comment:y.comment=g.comment);const b=new we(y,v);if(r.options.keepSourceTokens&&(b.srcToken=c),o){const e=l;Mt(r,e.items,y)&&s(i,"DUPLICATE_KEY","Map keys must be unique"),e.items.push(b)}else{const e=new Oe(r.schema);e.flow=!0,e.items.push(b);const t=(v??y).range;e.range=[y.range[0],t[1],t[2]],l.items.push(e)}u=v?v.range[2]:g.end}else{const n=d?e(r,d,m,s):t(r,m.end,h,null,m,s);l.items.push(n),u=n.range[2],Kt(d)&&s(n.range,"BLOCK_IN_FLOW",Bt)}}const f=o?"}":"]",[p,...h]=n.end;let d=u;if(p&&p.source===f)d=p.offset+p.source.length;else{const e=a[0].toUpperCase()+a.substring(1);s(u,c?"MISSING_CHAR":"BAD_INDENT",c?`${e} must end with a ${f}`:`${e} in block collection must be sufficiently indented and end with a ${f}`),p&&1!==p.source.length&&h.unshift(p)}if(h.length>0){const e=Rt(h,d,r.options.strict,s);e.comment&&(l.comment?l.comment+="\n"+e.comment:l.comment=e.comment),l.range=[n.offset,d,e.offset]}else l.range=[n.offset,d,d];return l}(e,t,r,n,i),a=o.constructor;return"!"===s||s===a.tagName?(o.tag=a.tagName,o):(s&&(o.tag=s),o)}function qt(e,t,r){const n=t.offset,s=function({offset:e,props:t},r,n){if("block-scalar-header"!==t[0].type)return n(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:s}=t[0],i=s[0];let o=0,a="",l=-1;for(let t=1;t<s.length;++t){const r=s[t];if(a||"-"!==r&&"+"!==r){const n=Number(r);!o&&n?o=n:-1===l&&(l=e+t)}else a=r}-1!==l&&n(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${s}`);let c=!1,u="",f=s.length;for(let e=1;e<t.length;++e){const s=t[e];switch(s.type){case"space":c=!0;case"newline":f+=s.source.length;break;case"comment":r&&!c&&n(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=s.source.length,u=s.source.substring(1);break;case"error":n(s,"UNEXPECTED_TOKEN",s.message),f+=s.source.length;break;default:{n(s,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${s.type}`);const e=s.source;e&&"string"==typeof e&&(f+=e.length)}}}return{mode:i,indent:o,chomp:a,comment:u,length:f}}(t,e.options.strict,r);if(!s)return{value:"",type:null,comment:"",range:[n,n,n]};const i=">"===s.mode?F.BLOCK_FOLDED:F.BLOCK_LITERAL,o=t.source?function(e){const t=e.split(/\n( *)/),r=t[0],n=r.match(/^( *)/),s=[n?.[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let e=1;e<t.length;e+=2)s.push([t[e],t[e+1]]);return s}(t.source):[];let a=o.length;for(let e=o.length-1;e>=0;--e){const t=o[e][1];if(""!==t&&"\r"!==t)break;a=e}if(0===a){const e="+"===s.chomp&&o.length>0?"\n".repeat(Math.max(1,o.length-1)):"";let r=n+s.length;return t.source&&(r+=t.source.length),{value:e,type:i,comment:s.comment,range:[n,r,r]}}let l=t.indent+s.indent,c=t.offset+s.length,u=0;for(let t=0;t<a;++t){const[n,i]=o[t];if(""!==i&&"\r"!==i){if(n.length<l){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";r(c+n.length,"MISSING_CHAR",e)}0===s.indent&&(l=n.length),u=t,0!==l||e.atRoot||r(c,"BAD_INDENT","Block scalar values in collections must be indented");break}0===s.indent&&n.length>l&&(l=n.length),c+=n.length+i.length+1}for(let e=o.length-1;e>=a;--e)o[e][0].length>l&&(a=e+1);let f="",p="",h=!1;for(let e=0;e<u;++e)f+=o[e][0].slice(l)+"\n";for(let e=u;e<a;++e){let[t,n]=o[e];c+=t.length+n.length+1;const a="\r"===n[n.length-1];if(a&&(n=n.slice(0,-1)),n&&t.length<l){const e="Block scalar lines must not be less indented than their "+(s.indent?"explicit indentation indicator":"first line");r(c-n.length-(a?2:1),"BAD_INDENT",e),t=""}i===F.BLOCK_LITERAL?(f+=p+t.slice(l)+n,p="\n"):t.length>l||"\t"===n[0]?(" "===p?p="\n":h||"\n"!==p||(p="\n\n"),f+=p+t.slice(l)+n,p="\n",h=!0):""===n?"\n"===p?f+="\n":p="\n":(f+=p+n,p=" ",h=!1)}switch(s.chomp){case"-":break;case"+":for(let e=a;e<o.length;++e)f+="\n"+o[e][0].slice(l);"\n"!==f[f.length-1]&&(f+="\n");break;default:f+="\n"}const d=n+s.length+t.source.length;return{value:f,type:i,comment:s.comment,range:[n,d,d]}}function Vt(e,t,r){const{offset:n,type:s,source:i,end:o}=e;let a,l;const c=(e,t,s)=>r(n+e,t,s);switch(s){case"scalar":a=F.PLAIN,l=function(e,t){let r="";switch(e[0]){case"\t":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":r=`block scalar indicator ${e[0]}`;break;case"@":case"`":r=`reserved character ${e[0]}`}return r&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),Ft(e)}(i,c);break;case"single-quoted-scalar":a=F.QUOTE_SINGLE,l=function(e,t){return"'"===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR","Missing closing 'quote"),Ft(e.slice(1,-1)).replace(/''/g,"'")}(i,c);break;case"double-quoted-scalar":a=F.QUOTE_DOUBLE,l=function(e,t){let r="";for(let n=1;n<e.length-1;++n){const s=e[n];if("\r"!==s||"\n"!==e[n+1])if("\n"===s){const{fold:t,offset:s}=zt(e,n);r+=t,n=s}else if("\\"===s){let s=e[++n];const i=Jt[s];if(i)r+=i;else if("\n"===s)for(s=e[n+1];" "===s||"\t"===s;)s=e[1+ ++n];else if("\r"===s&&"\n"===e[n+1])for(s=e[1+ ++n];" "===s||"\t"===s;)s=e[1+ ++n];else if("x"===s||"u"===s||"U"===s){const i={x:2,u:4,U:8}[s];r+=Gt(e,n+1,i,t),n+=i}else{const s=e.substr(n-1,2);t(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${s}`),r+=s}}else if(" "===s||"\t"===s){const t=n;let i=e[n+1];for(;" "===i||"\t"===i;)i=e[1+ ++n];"\n"===i||"\r"===i&&"\n"===e[n+2]||(r+=n>t?e.slice(t,n+1):s)}else r+=s}return'"'===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR",'Missing closing "quote'),r}(i,c);break;default:return r(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${s}`),{value:"",type:null,comment:"",range:[n,n+i.length,n+i.length]}}const u=n+i.length,f=Rt(o,u,t,r);return{value:l,type:a,comment:f.comment,range:[n,u,f.offset]}}function Ft(e){let t,r;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),r=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=t.exec(e);if(!n)return e;let s=n[1],i=" ",o=t.lastIndex;for(r.lastIndex=o;n=r.exec(e);)""===n[1]?"\n"===i?s+=i:i="\n":(s+=i+n[1],i=" "),o=r.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,n=a.exec(e),s+i+(n?.[1]??"")}function zt(e,t){let r="",n=e[t+1];for(;!(" "!==n&&"\t"!==n&&"\n"!==n&&"\r"!==n||"\r"===n&&"\n"!==e[t+2]);)"\n"===n&&(r+="\n"),n=e[(t+=1)+1];return r||(r=" "),{fold:r,offset:t}}const Jt={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function Gt(e,t,r,n){const s=e.substr(t,r),i=s.length===r&&/^[0-9a-fA-F]+$/.test(s)?parseInt(s,16):NaN;if(isNaN(i)){const s=e.substr(t-2,r+2);return n(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${s}`),s}return String.fromCodePoint(i)}function Ht(e,t,r,n){const{value:s,type:i,comment:o,range:a}="block-scalar"===t.type?qt(e,t,n):Vt(t,e.options.strict,n),l=r?e.directives.tagName(r.source,e=>n(r,"TAG_RESOLVE_FAILED",e)):null;let c,f;c=e.options.stringKeys&&e.atKey?e.schema[u]:l?function(e,t,r,n,s){if("!"===r)return e[u];const i=[];for(const t of e.tags)if(!t.collection&&t.tag===r){if(!t.default||!t.test)return t;i.push(t)}for(const e of i)if(e.test?.test(t))return e;const o=e.knownTags[r];return o&&!o.collection?(e.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(s(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,"tag:yaml.org,2002:str"!==r),e[u])}(e.schema,s,l,r,n):"scalar"===t.type?function({atKey:e,directives:t,schema:r},n,s,i){const o=r.tags.find(t=>(!0===t.default||e&&"key"===t.default)&&t.test?.test(n))||r[u];if(r.compat){const e=r.compat.find(e=>e.default&&e.test?.test(n))??r[u];o.tag!==e.tag&&i(s,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${t.tagString(o.tag)} or ${t.tagString(e.tag)}`,!0)}return o}(e,s,t,n):e.schema[u];try{const i=c.resolve(s,e=>n(r??t,"TAG_RESOLVE_FAILED",e),e.options);f=g(i)?i:new F(i)}catch(e){const i=e instanceof Error?e.message:String(e);n(r??t,"TAG_RESOLVE_FAILED",i),f=new F(s)}return f.range=a,f.source=s,i&&(f.type=i),l&&(f.tag=l),c.format&&(f.format=c.format),o&&(f.comment=o),f}function Wt(e,t,r){if(t){r??(r=t.length);for(let n=r-1;n>=0;--n){let r=t[n];switch(r.type){case"space":case"comment":case"newline":e-=r.source.length;continue}for(r=t[++n];"space"===r?.type;)e+=r.source.length,r=t[++n];break}}return e}const Yt={composeNode:Qt,composeEmptyNode:Xt};function Qt(e,t,r,n){const s=e.atKey,{spaceBefore:i,comment:o,anchor:a,tag:l}=r;let c,u=!0;switch(t.type){case"alias":c=function({options:e},{offset:t,source:r,end:n},s){const i=new U(r.substring(1));""===i.source&&s(t,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&s(t+r.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=t+r.length,a=Rt(n,o,e.strict,s);return i.range=[t,o,a.offset],a.comment&&(i.comment=a.comment),i}(e,t,n),(a||l)&&n(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Ht(e,t,l,n),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=function(e,t,r,n,s){const i=n.tag,o=i?t.directives.tagName(i.source,e=>s(i,"TAG_RESOLVE_FAILED",e)):null;if("block-seq"===r.type){const{anchor:e,newlineAfterProp:t}=n,r=e&&i?e.offset>i.offset?e:i:e??i;r&&(!t||t.offset<r.offset)&&s(r,"MISSING_CHAR","Missing newline after block sequence props")}const a="block-map"===r.type?"map":"block-seq"===r.type?"seq":"{"===r.start.source?"map":"seq";if(!i||!o||"!"===o||o===Oe.tagName&&"map"===a||o===Ae.tagName&&"seq"===a)return Ut(e,t,r,s,o);let l=t.schema.tags.find(e=>e.tag===o&&e.collection===a);if(!l){const n=t.schema.knownTags[o];if(!n||n.collection!==a)return n?s(i,"BAD_COLLECTION_TYPE",`${n.tag} used for ${a} collection, but expects ${n.collection??"scalar"}`,!0):s(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),Ut(e,t,r,s,o);t.schema.tags.push(Object.assign({},n,{default:!1})),l=n}const c=Ut(e,t,r,s,o,l),u=l.resolve?.(c,e=>s(i,"TAG_RESOLVE_FAILED",e),t.options)??c,f=w(u)?u:new F(u);return f.range=c.range,f.tag=o,l?.format&&(f.format=l.format),f}(Yt,e,t,r,n),a&&(c.anchor=a.source.substring(1));break;default:n(t,"UNEXPECTED_TOKEN","error"===t.type?t.message:`Unsupported token (type: ${t.type})`),c=Xt(e,t.offset,void 0,null,r,n),u=!1}return a&&""===c.anchor&&n(a,"BAD_ALIAS","Anchor cannot be an empty string"),s&&e.options.stringKeys&&(!g(c)||"string"!=typeof c.value||c.tag&&"tag:yaml.org,2002:str"!==c.tag)&&n(l??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(c.spaceBefore=!0),o&&("scalar"===t.type&&""===t.source?c.comment=o:c.commentBefore=o),e.options.keepSourceTokens&&u&&(c.srcToken=t),c}function Xt(e,t,r,n,{spaceBefore:s,comment:i,anchor:o,tag:a,end:l},c){const u=Ht(e,{type:"scalar",offset:Wt(t,r,n),indent:-1,source:""},a,c);return o&&(u.anchor=o.source.substring(1),""===u.anchor&&c(o,"BAD_ALIAS","Anchor cannot be an empty string")),s&&(u.spaceBefore=!0),i&&(u.comment=i,u.range[2]=l),u}function Zt(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:r}=e;return[t,t+("string"==typeof r?r.length:1)]}function er(e){let t="",r=!1,n=!1;for(let s=0;s<e.length;++s){const i=e[s];switch(i[0]){case"#":t+=(""===t?"":n?"\n\n":"\n")+(i.substring(1)||" "),r=!0,n=!1;break;case"%":"#"!==e[s+1]?.[0]&&(s+=1),r=!1;break;default:r||(n=!0),r=!1}}return{comment:t,afterEmptyLine:n}}class tr{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,r,n)=>{const s=Zt(e);n?this.warnings.push(new jt(s,t,r)):this.errors.push(new xt(s,t,r))},this.directives=new C({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:r,afterEmptyLine:n}=er(this.prelude);if(r){const s=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${r}`:r;else if(n||e.directives.docStart||!s)e.commentBefore=r;else if(b(s)&&!s.flow&&s.items.length>0){let e=s.items[0];y(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${r}\n${t}`:r}else{const e=s.commentBefore;s.commentBefore=e?`${r}\n${e}`:r}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:er(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,r=-1){for(const t of e)yield*this.next(t);yield*this.end(t,r)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(t,r,n)=>{const s=Zt(e);s[0]+=t,this.onError(s,"BAD_DIRECTIVE",r,n)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:r,start:n,value:s,end:i},o){const a=Object.assign({_directives:t},e),l=new Nt(void 0,a),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=Tt(n,{indicator:"doc-start",next:s??i?.[0],offset:r,onError:o,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,!s||"block-map"!==s.type&&"block-seq"!==s.type||u.hasNewline||o(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=s?Qt(c,s,u,o):Xt(c,u.end,n,null,u,o);const f=l.contents.range[2],p=Rt(i,f,!1,o);return p.comment&&(l.comment=p.comment),l.range=[r,f,p.offset],l}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new xt(Zt(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new xt(Zt(e),"UNEXPECTED_TOKEN",t));break}this.doc.directives.docEnd=!0;const t=Rt(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new xt(Zt(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({_directives:this.directives},this.options),r=new Nt(void 0,e);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,t,t],this.decorate(r,!1),yield r}}}function rr(e,t=!0,r){if(e){const n=(e,t,n)=>{const s="number"==typeof e?e:Array.isArray(e)?e[0]:e.offset;if(!r)throw new xt([s,s+1],t,n);r(s,t,n)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Vt(e,t,n);case"block-scalar":return qt({options:{strict:t}},e,n)}}return null}function nr(e,t){const{implicitKey:r=!1,indent:n,inFlow:s=!1,offset:i=-1,type:o="PLAIN"}=t,a=ue({type:o,value:e},{implicitKey:r,indent:n>0?" ".repeat(n):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}}),l=t.end??[{type:"newline",offset:-1,indent:n,source:"\n"}];switch(a[0]){case"|":case">":{const e=a.indexOf("\n"),t=a.substring(0,e),r=a.substring(e+1)+"\n",s=[{type:"block-scalar-header",offset:i,indent:n,source:t}];return ir(s,l)||s.push({type:"newline",offset:-1,indent:n,source:"\n"}),{type:"block-scalar",offset:i,indent:n,props:s,source:r}}case'"':return{type:"double-quoted-scalar",offset:i,indent:n,source:a,end:l};case"'":return{type:"single-quoted-scalar",offset:i,indent:n,source:a,end:l};default:return{type:"scalar",offset:i,indent:n,source:a,end:l}}}function sr(e,t,r={}){let{afterKey:n=!1,implicitKey:s=!1,inFlow:i=!1,type:o}=r,a="indent"in e?e.indent:null;if(n&&"number"==typeof a&&(a+=2),!o)switch(e.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{const t=e.props[0];if("block-scalar-header"!==t.type)throw new Error("Invalid block scalar header");o=">"===t.source[0]?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}const l=ue({type:o,value:t},{implicitKey:s||null===a,indent:null!==a&&a>0?" ".repeat(a):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":!function(e,t){const r=t.indexOf("\n"),n=t.substring(0,r),s=t.substring(r+1)+"\n";if("block-scalar"===e.type){const t=e.props[0];if("block-scalar-header"!==t.type)throw new Error("Invalid block scalar header");t.source=n,e.source=s}else{const{offset:t}=e,r="indent"in e?e.indent:-1,i=[{type:"block-scalar-header",offset:t,indent:r,source:n}];ir(i,"end"in e?e.end:void 0)||i.push({type:"newline",offset:-1,indent:r,source:"\n"});for(const t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:"block-scalar",indent:r,props:i,source:s})}}(e,l);break;case'"':or(e,l,"double-quoted-scalar");break;case"'":or(e,l,"single-quoted-scalar");break;default:or(e,l,"scalar")}}function ir(e,t){if(t)for(const r of t)switch(r.type){case"space":case"comment":e.push(r);break;case"newline":return e.push(r),!0}return!1}function or(e,t,r){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=r,e.source=t;break;case"block-scalar":{const n=e.props.slice(1);let s=t.length;"block-scalar-header"===e.props[0].type&&(s-=e.props[0].source.length);for(const e of n)e.offset+=s;delete e.props,Object.assign(e,{type:r,source:t,end:n});break}case"block-map":case"block-seq":{const n={type:"newline",offset:e.offset+t.length,indent:e.indent,source:"\n"};delete e.items,Object.assign(e,{type:r,source:t,end:[n]});break}default:{const n="indent"in e?e.indent:-1,s="end"in e&&Array.isArray(e.end)?e.end.filter(e=>"space"===e.type||"comment"===e.type||"newline"===e.type):[];for(const t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:r,indent:n,source:t,end:s})}}}const ar=e=>"type"in e?lr(e):cr(e);function lr(e){switch(e.type){case"block-scalar":{let t="";for(const r of e.props)t+=lr(r);return t+e.source}case"block-map":case"block-seq":{let t="";for(const r of e.items)t+=cr(r);return t}case"flow-collection":{let t=e.start.source;for(const r of e.items)t+=cr(r);for(const r of e.end)t+=r.source;return t}case"document":{let t=cr(e);if(e.end)for(const r of e.end)t+=r.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(const r of e.end)t+=r.source;return t}}}function cr({start:e,key:t,sep:r,value:n}){let s="";for(const t of e)s+=t.source;if(t&&(s+=lr(t)),r)for(const e of r)s+=e.source;return n&&(s+=lr(n)),s}const ur=Symbol("break visit"),fr=Symbol("skip children"),pr=Symbol("remove item");function hr(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),dr(Object.freeze([]),e,t)}function dr(e,t,r){let n=r(t,e);if("symbol"==typeof n)return n;for(const s of["key","value"]){const i=t[s];if(i&&"items"in i){for(let t=0;t<i.items.length;++t){const n=dr(Object.freeze(e.concat([[s,t]])),i.items[t],r);if("number"==typeof n)t=n-1;else{if(n===ur)return ur;n===pr&&(i.items.splice(t,1),t-=1)}}"function"==typeof n&&"key"===s&&(n=n(t,e))}}return"function"==typeof n?n(t,e):n}hr.BREAK=ur,hr.SKIP=fr,hr.REMOVE=pr,hr.itemAtPath=(e,t)=>{let r=e;for(const[e,n]of t){const t=r?.[e];if(!t||!("items"in t))return;r=t.items[n]}return r},hr.parentCollection=(e,t)=>{const r=hr.itemAtPath(e,t.slice(0,-1)),n=t[t.length-1][0],s=r?.[n];if(s&&"items"in s)return s;throw new Error("Parent collection not found")};const mr="\ufeff",yr="",gr="",vr="",br=e=>!!e&&"items"in e,wr=e=>!!e&&("scalar"===e.type||"single-quoted-scalar"===e.type||"double-quoted-scalar"===e.type||"block-scalar"===e.type);function kr(e){switch(e){case mr:return"<BOM>";case yr:return"<DOC>";case gr:return"<FLOW_END>";case vr:return"<SCALAR>";default:return JSON.stringify(e)}}function _r(e){switch(e){case mr:return"byte-order-mark";case yr:return"doc-mode";case gr:return"flow-error-end";case vr:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function $r(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const Er=new Set("0123456789ABCDEFabcdef"),Sr=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Or=new Set(",[]{}"),Nr=new Set(" ,[]{}\n\r\t"),Ar=e=>!e||Nr.has(e);class Pr{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){if(e){if("string"!=typeof e)throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!t;let r=this.next??"stream";for(;r&&(t||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let r=0;for(;" "===t;)t=this.buffer[++r+e];if("\r"===t){const t=this.buffer[r+e+1];if("\n"===t||!t&&!this.atEnd)return e+r+1}return"\n"===t||r>=this.indentNext||!t&&!this.atEnd?e+r:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&$r(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if(e[0]===mr&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length,r=e.indexOf("#");for(;-1!==r;){const n=e[r-1];if(" "===n||"\t"===n){t=r-1;break}r=e.indexOf("#",r+1)}for(;;){const r=e[t-1];if(" "!==r&&"\t"!==r)break;t-=1}const n=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-n),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield yr,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if(("---"===e||"..."===e)&&$r(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"---"===e?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!$r(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&$r(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Ar),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,r=-1;do{e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=r=t):t=0,t+=(yield*this.pushSpaces(!0))}while(e+t>0);const n=this.getLine();if(null===n)return this.setNext("flow");if((-1!==r&&r<this.indentNext&&"#"!==n[0]||0===r&&(n.startsWith("---")||n.startsWith("..."))&&$r(n[3]))&&(r!==this.indentNext-1||1!==this.flowLevel||"]"!==n[0]&&"}"!==n[0]))return this.flowLevel=0,yield gr,yield*this.parseLineStart();let s=0;for(;","===n[s];)s+=(yield*this.pushCount(1)),s+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(s+=(yield*this.pushIndicators()),n[s]){case void 0:return"flow";case"#":return yield*this.pushCount(n.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Ar),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||$r(e)||","===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}const r=this.buffer.substring(0,t);let n=r.indexOf("\n",this.pos);if(-1!==n){for(;-1!==n;){const e=this.continueScalar(n+1);if(-1===e)break;n=r.indexOf("\n",e)}-1!==n&&(t=n-("\r"===r[n-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil(e=>$r(e)||"#"===e)}*parseBlockScalar(){let e,t=this.pos-1,r=0;e:for(let n=this.pos;e=this.buffer[n];++n)switch(e){case" ":r+=1;break;case"\n":t=n,r=0;break;case"\r":{const e=this.buffer[n+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=r:this.indentNext=this.blockScalarIndent+(0===this.indentNext?1:this.indentNext);do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let n=t+1;for(e=this.buffer[n];" "===e;)e=this.buffer[++n];if("\t"===e){for(;"\t"===e||" "===e||"\r"===e||"\n"===e;)e=this.buffer[++n];t=n-1}else if(!this.blockScalarKeep)for(;;){let e=t-1,n=this.buffer[e];"\r"===n&&(n=this.buffer[--e]);const s=e;for(;" "===n;)n=this.buffer[--e];if(!("\n"===n&&e>=this.pos&&e+1+r>s))break;t=e}return yield vr,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,r=this.pos-1,n=this.pos-1;for(;t=this.buffer[++n];)if(":"===t){const t=this.buffer[n+1];if($r(t)||e&&Or.has(t))break;r=n}else if($r(t)){let s=this.buffer[n+1];if("\r"===t&&("\n"===s?(n+=1,t="\n",s=this.buffer[n+1]):r=n),"#"===s||e&&Or.has(s))break;if("\n"===t){const e=this.continueScalar(n+1);if(-1===e)break;n=Math.max(n,e-2)}}else{if(e&&Or.has(t))break;r=n}return t||this.atEnd?(yield vr,yield*this.pushToIndex(r+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Ar))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if($r(t)||e&&Or.has(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!$r(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(Sr.has(t))t=this.buffer[++e];else{if("%"!==t||!Er.has(this.buffer[e+1])||!Er.has(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,r=this.pos-1;do{t=this.buffer[++r]}while(" "===t||e&&"\t"===t);const n=r-this.pos;return n>0&&(yield this.buffer.substr(this.pos,n),this.pos=r),n}*pushUntil(e){let t=this.pos,r=this.buffer[t];for(;!e(r);)r=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class xr{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,r=this.lineStarts.length;for(;t<r;){const n=t+r>>1;this.lineStarts[n]<e?t=n+1:r=n}return this.lineStarts[t]===e?{line:t+1,col:1}:0===t?{line:0,col:e}:{line:t,col:e-this.lineStarts[t-1]+1}}}}function jr(e,t){for(let r=0;r<e.length;++r)if(e[r].type===t)return!0;return!1}function Ir(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function Tr(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Cr(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function Lr(e){if(0===e.length)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===e[++t]?.type;);return e.splice(t,e.length)}function Mr(e){if("flow-seq-start"===e.start.type)for(const t of e.items)!t.sep||t.value||jr(t.start,"explicit-key-ind")||jr(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,Tr(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Dr{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Pr,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const r of this.lexer.lex(e,t))yield*this.next(r);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=_r(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if("doc-end"!==this.type||e&&"doc-end"===e.type){if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch("block-scalar"===t.type?t.indent="indent"in e?e.indent:0:"flow-collection"===t.type&&"document"===e.type&&(t.indent=0),"flow-collection"===t.type&&Mr(t),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const r=e.items[e.items.length-1];if(r.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!r.sep)return Object.assign(r,{key:t,sep:[]}),void(this.onKeyLine=!r.explicitKey);r.value=t;break}case"block-seq":{const r=e.items[e.items.length-1];r.value?e.items.push({start:[],value:t}):r.value=t;break}case"flow-collection":{const r=e.items[e.items.length-1];return void(!r||r.value?e.items.push({start:[],key:t,sep:[]}):r.sep?r.value=t:Object.assign(r,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const r=t.items[t.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&-1===Ir(r.start)&&(0===t.indent||r.start.every(e=>"comment"!==e.type||e.indent<t.indent))&&("document"===e.type?e.end=r.start:e.items.push({start:r.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:e}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":return void(-1!==Ir(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){const t=Lr(Cr(this.peek(2)));let r;e.end?(r=e.end,r.push(this.sourceToken),delete e.end):r=[this.sourceToken];const n={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=n}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const r="end"in t.value?t.value.end:void 0,n=Array.isArray(r)?r[r.length-1]:void 0;"comment"===n?.type?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const r=e.items[e.items.length-2],n=r?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,t.start),n.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const r=!this.onKeyLine&&this.indent===e.indent,n=r&&(t.sep||t.explicitKey)&&"seq-item-ind"!==this.type;let s=[];if(n&&t.sep&&!t.value){const r=[];for(let n=0;n<t.sep.length;++n){const s=t.sep[n];switch(s.type){case"newline":r.push(n);break;case"space":break;case"comment":s.indent>e.indent&&(r.length=0);break;default:r.length=0}}r.length>=2&&(s=t.sep.splice(r[1]))}switch(this.type){case"anchor":case"tag":return void(n||t.value?(s.push(this.sourceToken),e.items.push({start:s}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"explicit-key-ind":return t.sep||t.explicitKey?n||t.value?(s.push(this.sourceToken),e.items.push({start:s,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}):(t.start.push(this.sourceToken),t.explicitKey=!0),void(this.onKeyLine=!0);case"map-value-ind":if(t.explicitKey)if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(jr(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(Tr(t.key)&&!jr(t.sep,"newline")){const e=Lr(t.start),r=t.key,n=t.sep;n.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:r,sep:n}]})}else s.length>0?t.sep=t.sep.concat(s,this.sourceToken):t.sep.push(this.sourceToken);else if(jr(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const e=Lr(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||n?e.items.push({start:s,key:null,sep:[this.sourceToken]}):jr(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);return void(n||t.value?(e.items.push({start:s,key:r,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(r):(Object.assign(t,{key:r,sep:[]}),this.onKeyLine=!0))}default:{const n=this.startBlockValue(e);if(n){if("block-seq"===n.type){if(!t.explicitKey&&t.sep&&!jr(t.sep,"newline"))return void(yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source}))}else r&&e.items.push({start:s});return void this.stack.push(n)}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const r="end"in t.value?t.value.end:void 0,n=Array.isArray(r)?r[r.length-1]:void 0;"comment"===n?.type?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const r=e.items[e.items.length-2],n=r?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,t.start),n.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;return void t.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(t.value||jr(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case"map-value-ind":return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:r,sep:[]}):t.sep?this.stack.push(r):Object.assign(t,{key:r,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const r=this.startBlockValue(e);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if("block-map"===t.type&&("map-value-ind"===this.type&&t.indent===e.indent||"newline"===this.type&&!t.items[t.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==t.type){const r=Lr(Cr(t));Mr(e);const n=e.end.splice(1,e.end.length);n.push(this.sourceToken);const s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=Lr(Cr(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const t=Lr(Cr(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return"comment"===this.type&&!(this.indent<=t)&&e.every(e=>"newline"===e.type||"space"===e.type)}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function Rr(e){const t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new xr||null,prettyErrors:t}}function Br(e,t={}){const{lineCounter:r,prettyErrors:n}=Rr(t),s=new Dr(r?.addNewLine),i=new tr(t),o=Array.from(i.compose(s.parse(e)));if(n&&r)for(const t of o)t.errors.forEach(It(e,r)),t.warnings.forEach(It(e,r));return o.length>0?o:Object.assign([],{empty:!0},i.streamInfo())}function Kr(e,t={}){const{lineCounter:r,prettyErrors:n}=Rr(t),s=new Dr(r?.addNewLine),i=new tr(t);let o=null;for(const t of i.compose(s.parse(e),!0,e.length))if(o){if("silent"!==o.options.logLevel){o.errors.push(new xt(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else o=t;return n&&r&&(o.errors.forEach(It(e,r)),o.warnings.forEach(It(e,r))),o}function Ur(e,t,r){let n;"function"==typeof t?n=t:void 0===r&&t&&"object"==typeof t&&(r=t);const s=Kr(e,r);if(!s)return null;if(s.warnings.forEach(e=>he(s.options.logLevel,e)),s.errors.length>0){if("silent"!==s.options.logLevel)throw s.errors[0];s.errors=[]}return s.toJS(Object.assign({reviver:n},r))}function qr(e,t,r){let n=null;if("function"==typeof t||Array.isArray(t)?n=t:void 0===r&&t&&(r=t),"string"==typeof r&&(r=r.length),"number"==typeof r){const e=Math.round(r);r=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){const{keepUndefined:e}=r??t??{};if(!e)return}return d(e)&&!n?e.toString(r):new Nt(e,n,r).toString(r)}const Vr=t;class Fr{constructor(){this.supportedFeatures=this._initializeSupportedFeatures()}parse(e){const t=Vr.parse(e);if(!t||"object"!=typeof t)throw new Error("Invalid compose file format");this._validateCompose(t);const r={};if(t.services)for(const[e,n]of Object.entries(t.services))r[e]=this._parseService(e,n,t);return r}async parseFile(e){const t=await Promise.all([o.e(605),o.e(586)]).then(o.t.bind(o,1605,19)),r=await t.default.readFile(e,"utf8");return this.parse(r)}_parseService(e,t,n){const s=new r;if(t.image)s.setImage(t.image);else{if(!t.build)throw new Error(`Service '${e}' must have either 'image' or 'build'`);s.setImage(`${e}.build`)}if(t.container_name?s.setContainerName(t.container_name):s.setContainerName(e),t.command){const e=Array.isArray(t.command)?t.command.join(" "):t.command;s.setExec(e)}if(t.entrypoint){const e=Array.isArray(t.entrypoint)?t.entrypoint.join(" "):t.entrypoint;s.entrypoint=e}if(t.ports&&this._parsePorts(t.ports,s),t.volumes&&this._parseVolumes(t.volumes,s,n.volumes),t.environment&&this._parseEnvironment(t.environment,s),t.env_file&&(Array.isArray(t.env_file)?t.env_file:[t.env_file]).forEach(e=>s.environmentFile.push(e)),t.labels&&this._parseLabels(t.labels,s),t.networks&&this._parseNetworks(t.networks,s),t.hostname&&(s.hostName=t.hostname),t.user){const e=String(t.user);if(e.includes(":")){const[t,r]=e.split(":");s.user=t,s.group=r}else s.user=e}if(t.working_dir&&(s.workingDir=t.working_dir),t.restart&&(s._restart=t.restart),t.security_opt&&this._parseSecurityOptions(t.security_opt,s),t.cap_add){const e=Array.isArray(t.cap_add)?t.cap_add:[t.cap_add];s.addCapability.push(...e)}if(t.cap_drop){const e=Array.isArray(t.cap_drop)?t.cap_drop:[t.cap_drop];s.dropCapability.push(...e)}if(t.devices){const e=Array.isArray(t.devices)?t.devices:[t.devices];s.addDevice.push(...e)}if(t.dns){const e=Array.isArray(t.dns)?t.dns:[t.dns];s.dns.push(...e)}if(t.read_only&&(s.readOnly=!0),t.init&&(s.runInit=!0),t.tmpfs){const e=Array.isArray(t.tmpfs)?t.tmpfs:[t.tmpfs];s.tmpfs.push(...e)}return t.privileged&&this._addToPodmanArgs(s,"--privileged"),t.tty&&this._addToPodmanArgs(s,"--tty"),t.stdin_open&&this._addToPodmanArgs(s,"--interactive"),t.mem_limit&&this._addToPodmanArgs(s,"--memory",t.mem_limit),t.cpus&&this._addToPodmanArgs(s,"--cpus",String(t.cpus)),t.healthcheck&&this._parseHealthcheck(t.healthcheck,s),t.depends_on&&(s._dependsOn=Array.isArray(t.depends_on)?t.depends_on:Object.keys(t.depends_on)),s}_parsePorts(e,t){const r=Array.isArray(e)?e:[e];for(const e of r)if("string"==typeof e||"number"==typeof e)t.addPublishPort(String(e));else if("object"==typeof e){let r="";e.published&&(r+=e.published+":"),r+=e.target,e.protocol&&"tcp"!==e.protocol&&(r+="/"+e.protocol),t.addPublishPort(r)}}_parseVolumes(e,t,r={}){const n=Array.isArray(e)?e:[e];for(const e of n)if("string"==typeof e)t.addVolume(e);else if("object"==typeof e){let r="";if("tmpfs"===e.type){let r=e.target;e.tmpfs&&e.tmpfs.size&&(r+=":size="+e.tmpfs.size),t.tmpfs.push(r);continue}e.source&&(r+=e.source+":"),r+=e.target,e.read_only&&(r+=":ro"),t.addVolume(r)}}_parseEnvironment(e,t){if(Array.isArray(e))e.forEach(e=>t.addEnvironment(e));else if("object"==typeof e)for(const[r,n]of Object.entries(e))t.addEnvironment(`${r}=${n}`)}_parseLabels(e,t){if(Array.isArray(e))e.forEach(e=>t.addLabel(e));else if("object"==typeof e)for(const[r,n]of Object.entries(e))t.addLabel(`${r}=${n}`)}_parseNetworks(e,t){if(Array.isArray(e))e.forEach(e=>{"string"==typeof e&&t.network.push(e)});else if("object"==typeof e)for(const[r,n]of Object.entries(e)){let e=r;if(n&&"object"==typeof n){const r=[];n.ipv4_address&&r.push(`ip=${n.ipv4_address}`),n.aliases&&n.aliases.length>0&&n.aliases.forEach(e=>{t.networkAlias.push(e)}),r.length>0&&(e+=":"+r.join(","))}t.network.push(e)}}_parseSecurityOptions(e,t){const r=Array.isArray(e)?e:[e];for(const e of r)"no-new-privileges:true"===e?t.noNewPrivileges=!0:e.startsWith("label=disable")?t.securityLabelDisable=!0:this._addToPodmanArgs(t,"--security-opt",e)}_parseHealthcheck(e,t){if(e.disable)t.healthCmd="none";else{if(e.test){const r=Array.isArray(e.test)?e.test.join(" "):e.test;t.healthCmd=r}e.interval&&(t.healthInterval=e.interval),e.timeout&&(t.healthTimeout=e.timeout),e.retries&&(t.healthRetries=e.retries),e.start_period&&(t.healthStartPeriod=e.start_period)}}_addToPodmanArgs(e,t,r=null){let n=e.podmanArgs||"";n&&(n+=" "),n+=t,null!==r&&(n+=" "+this._escapeArg(r)),e.podmanArgs=n}_escapeArg(e){return"string"!=typeof e&&(e=String(e)),/[\s"'`$\\|&;()<>]/.test(e)?`"${e.replace(/["\\]/g,"\\$&")}"`:e}_validateCompose(e){if(!e.services||0===Object.keys(e.services).length)throw new Error("Compose file must contain at least one service");const t=["configs","secrets"];for(const r of t)if(e[r]&&Object.keys(e[r]).length>0)throw new Error(`Compose feature '${r}' is not yet supported`);for(const[t,r]of Object.entries(e.services))this._validateService(t,r)}_validateService(e,t){if(!t.image&&!t.build)throw new Error(`Service '${e}' must have either 'image' or 'build'`);const r=["external_links","links","network_mode","secrets","configs","deploy"];for(const n of r)t[n]&&console.warn(`Warning: Service '${e}' uses unsupported feature '${n}' - ignoring`)}_initializeSupportedFeatures(){return{services:!0,volumes:!0,networks:!0,version:!0,name:!0,configs:!1,secrets:!1,extensions:!1}}}var zr=o(6724);class Jr{constructor(){this.composeParser=new Fr,this.quadletGenerator=new n}dockerRunToQuadlet(e,t={}){const r=this.parseDockerRun(e),n=Object.keys(r.services)[0],s=r.services[n],i=this.composeParser._parseService(n,s,r);return this.containerToQuadlet(i,t)}composeToQuadlet(e,t={}){const r=this.composeParser.parse(e),n=[];for(const[e,s]of Object.entries(r)){let r=t.unit||{};s._dependsOn&&s._dependsOn.length>0&&(r={...r,after:[...r.after||[],...s._dependsOn.map(e=>`${e}.service`)],wants:[...r.wants||[],...s._dependsOn.map(e=>`${e}.service`)]});let i=t.service||{};if(s._restart){const e={no:"no",always:"always","on-failure":"on-failure","unless-stopped":"unless-stopped"}[s._restart];void 0!==e&&(i={...i,Restart:e})}const o=this.containerToQuadlet(s,{...t,name:e,unit:Object.keys(r).length>0?r:t.unit,service:Object.keys(i).length>0?i:t.service});n.push({filename:`${e}.container`,content:o})}return n}containerToQuadlet(e,t={}){return e.validate(),n.generateFile(e,t)}parseDockerRun(e){Array.isArray(e)&&(e=e.join(" "));const t=zr(e);return Vr.parse(t)}parseCompose(e){const t=this.composeParser.parse(e);return Object.values(t)}fromDockerRun(e,t={}){return this.dockerRunToQuadlet(e,t)}async fromCompose(e,t={}){const r=await Promise.all([o.e(605),o.e(586)]).then(o.t.bind(o,1605,19)),n=await r.readFile(e,"utf8");return this.composeToQuadlet(n,t)}}function Gr(){return new Jr}const Hr=Jr})(),a})());